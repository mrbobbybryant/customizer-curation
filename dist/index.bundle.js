!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=2)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){if(!e)return!1;var i=!1;e.addEventListener("keyup",function(n){if(0===n.target.value.length&&r&&r(),n.target.value.length<3)return!1;e.classList.add("show"),i=u(i,l,e,t)}),e.addEventListener("input",function(t){var r=o(t);r&&n(r,e)})};var r=function(e){if("string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},i=function(e){return encodeURIComponent(e.toLowerCase())},o=function(e){var t=e.target,n=t.value,r=t.getAttribute("list"),i=document.getElementById(r).childNodes,o=[].reduce.call(i,function(e,t){return t.value===n?e.concat({id:t.dataset.id,title:t.value}):e},[]);return 0!==o.length&&o[0]},u=function(e,t,n,o){var u=i(n.value),c=o+u;return e&&e.abort(),e=new XMLHttpRequest,e.addEventListener("load",function(e){t(!1,e)},!1),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status?t(!1,{results:JSON.parse(e.responseText),input:n}):e.readyState===XMLHttpRequest.DONE&&e.status>=400&&e.responseText&&r(e.responseText)&&t({message:JSON.parse(e.responseText),input:n},!1)},e.addEventListener("error",function(e){t(e,!1)},!1),e.addEventListener("abort",function(e){t(!0,!1)},!1),e.open("GET",c,!0),e.send(),e},c=function(e){return"<option data-id="+e.id+' value="'+e.title.rendered+'">'},a=function(e,t){var n=t.getAttribute("list"),r=document.getElementById(n),i=e.reduce(function(e,t){var n=c(t);return e.concat(n)},"");t.classList.remove("show"),r.innerHTML=i},l=function(e,t){if(e){if(!0===e)return!1;e.input.classList.remove("show"),console.warn(e)}if(t){if(!Array.isArray(t.results))return!1;a(t.results,t.input)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(3),o=(r(i),n(4)),u=r(o),c=n(20),a=r(c),l=function(e){return'<li class="text-list-item" data-id="'+e.id+'">\n        <span>'+e.title+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8\n\t\t\t8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'};document.addEventListener("DOMContentLoaded",function(){(0,u.default)({parent:".customizer-curation-list",input:".customizer-curation-list-input",list:".customizer-curation-list-list",hidden:".customizer-curation-list-hidden",listTemplate:l}),(0,a.default)({parent:".customizer-curation",input:".customizer-curation-input",hidden:".customizer-curation-hidden"})})},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=(0,l.default)(t,e.hidden),r=t.querySelector(e.hidden),i=(0,s.removeItems)(n,s.onRemoveObject,t),u=(0,s.dragItems)(n,s.onDragObject),a=(0,o.default)(t,Object.assign(e,{onDrag:u,onRemove:i})),f="Curation_"+t.dataset.id,d=window[f].baseURL+"/wp-json/wp/v2/"+window[f].resource+"?search=";(0,c.default)(t.querySelector(e.input),d,function(e,i){a.add(e),i.value="",n.add(e),(0,s.checkLimit)(t),jQuery(r).trigger("change")})})};var i=n(5),o=r(i),u=n(1),c=r(u),a=n(18),l=r(a),s=n(19)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t.list);return u(n,t.onDrag),o(n,t.onRemove),{add:function(e){var r=t.listTemplate(e),i=document.createRange().createContextualFragment(r);n.appendChild(i)}}};var r=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t){var n=e.querySelectorAll("li");return e.addEventListener("click",function(n){if("svg"===("svg"===n.target.tagName?n.target:n.target.closest("svg")).tagName){var r=n.target.closest("li"),i=r.querySelector("span").innerHTML;e.removeChild(r),t(i)}}),n},u=function(e,t){(0,i.default)([e]).on("dragend",function(n){var r=e.querySelectorAll("li");t(e,r)})}},function(e,t,n){"use strict";(function(t){function r(e,t){function n(e){return-1!==le.containers.indexOf(e)||ae.isContainer(e)}function r(e){var t=e?"remove":"add";i(S,t,"mousedown",x),i(S,t,"mouseup",q)}function c(e){i(S,e?"remove":"add","mousemove",_)}function p(e){var t=e?"remove":"add";w[t](S,"selectstart",O),w[t](S,"click",O)}function h(){r(!0),q({})}function O(e){ue&&e.preventDefault()}function x(e){if(ee=e.clientX,te=e.clientY,!(1!==o(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=C(t);n&&(ue=n,c(),"mousedown"===e.type&&(m(t)?t.focus():e.preventDefault()))}}function _(e){if(ue){if(0===o(e))return void q({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(ae.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e);if(m(E.elementFromPoint(t,n)))return}var r=ue;c(!0),p(),j(),I(r);var i=u(V);W=y("pageX",e)-i.left,Z=y("pageY",e)-i.top,T.add(ie||V,"gu-transit"),H(),B(e)}}}function C(e){if(!(le.dragging&&K||n(e))){for(var t=e;v(e)&&!1===n(v(e));){if(ae.invalid(e,t))return;if(!(e=v(e)))return}var r=v(e);if(r&&!ae.invalid(e,t)){if(ae.moves(e,r,t,g(e)))return{item:e,source:r}}}}function L(e){return!!C(e)}function M(e){var t=C(e);t&&I(t)}function I(e){$(e.item,e.source)&&(ie=e.item.cloneNode(!0),le.emit("cloned",ie,e.item,"copy")),G=e.source,V=e.item,ne=re=g(e.item),le.dragging=!0,le.emit("drag",V,G)}function N(){return!1}function j(){if(le.dragging){var e=ie||V;P(e,v(e))}}function A(){ue=!1,c(!0),p(!0)}function q(e){if(A(),le.dragging){var t=ie||V,n=y("clientX",e),r=y("clientY",e),i=a(K,n,r),o=z(i,n,r);o&&(ie&&ae.copySortSource||!ie||o!==G)?P(t,o):ae.removeOnSpill?R():k()}}function P(e,t){var n=v(e);ie&&ae.copySortSource&&t===G&&n.removeChild(V),X(t)?le.emit("cancel",e,G,G):le.emit("drop",e,t,G,re),D()}function R(){if(le.dragging){var e=ie||V,t=v(e);t&&t.removeChild(e),le.emit(ie?"cancel":"remove",e,t,G),D()}}function k(e){if(le.dragging){var t=arguments.length>0?e:ae.revertOnSpill,n=ie||V,r=v(n),i=X(r);!1===i&&t&&(ie?r&&r.removeChild(ie):G.insertBefore(n,ne)),i||t?le.emit("cancel",n,G,G):le.emit("drop",n,r,G,re),D()}}function D(){var e=ie||V;A(),J(),e&&T.rm(e,"gu-transit"),oe&&clearTimeout(oe),le.dragging=!1,ce&&le.emit("out",e,ce,G),le.emit("dragend",e),G=V=ie=ne=re=oe=ce=null}function X(e,t){var n;return n=void 0!==t?t:K?re:g(ie||V),e===G&&n===ne}function z(e,t,r){for(var i=e;i&&!function(){if(!1===n(i))return!1;var o=Q(i,e),u=U(i,o,t,r);return!!X(i,u)||ae.accepts(V,i,G,u)}();)i=v(i);return i}function B(e){function t(e){le.emit(e,u,ce,G)}if(K){e.preventDefault();var n=y("clientX",e),r=y("clientY",e),i=n-W,o=r-Z;K.style.left=i+"px",K.style.top=o+"px";var u=ie||V,c=a(K,n,r),l=z(c,n,r),s=null!==l&&l!==ce;(s||null===l)&&(function(){ce&&t("out")}(),ce=l,function(){s&&t("over")}());var f=v(u);if(l===G&&ie&&!ae.copySortSource)return void(f&&f.removeChild(u));var d,m=Q(l,c);if(null!==m)d=U(l,m,n,r);else{if(!0!==ae.revertOnSpill||ie)return void(ie&&f&&f.removeChild(u));d=ne,l=G}(null===d&&s||d!==u&&d!==g(u))&&(re=d,l.insertBefore(u,d),le.emit("shadow",u,l,G))}}function Y(e){T.rm(e,"gu-hide")}function F(e){le.dragging&&T.add(e,"gu-hide")}function H(){if(!K){var e=V.getBoundingClientRect();K=V.cloneNode(!0),K.style.width=f(e)+"px",K.style.height=d(e)+"px",T.rm(K,"gu-transit"),T.add(K,"gu-mirror"),ae.mirrorContainer.appendChild(K),i(S,"add","mousemove",B),T.add(ae.mirrorContainer,"gu-unselectable"),le.emit("cloned",K,V,"mirror")}}function J(){K&&(T.rm(ae.mirrorContainer,"gu-unselectable"),i(S,"remove","mousemove",B),v(K).removeChild(K),K=null)}function Q(e,t){for(var n=t;n!==e&&v(n)!==e;)n=v(n);return n===S?null:n}function U(e,t,n,r){function i(e){return e?g(t):t}var o="horizontal"===ae.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(o?n>e.left+f(e)/2:r>e.top+d(e)/2)}():function(){var t,i,u,c=e.children.length;for(t=0;t<c;t++){if(i=e.children[t],u=i.getBoundingClientRect(),o&&u.left+u.width/2>n)return i;if(!o&&u.top+u.height/2>r)return i}return null}()}function $(e,t){return"boolean"==typeof ae.copy?ae.copy:ae.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var K,G,V,W,Z,ee,te,ne,re,ie,oe,ue,ce=null,ae=t||{};void 0===ae.moves&&(ae.moves=s),void 0===ae.accepts&&(ae.accepts=s),void 0===ae.invalid&&(ae.invalid=N),void 0===ae.containers&&(ae.containers=e||[]),void 0===ae.isContainer&&(ae.isContainer=l),void 0===ae.copy&&(ae.copy=!1),void 0===ae.copySortSource&&(ae.copySortSource=!1),void 0===ae.revertOnSpill&&(ae.revertOnSpill=!1),void 0===ae.removeOnSpill&&(ae.removeOnSpill=!1),void 0===ae.direction&&(ae.direction="vertical"),void 0===ae.ignoreInputTextSelection&&(ae.ignoreInputTextSelection=!0),void 0===ae.mirrorContainer&&(ae.mirrorContainer=E.body);var le=b({containers:ae.containers,start:M,end:j,cancel:k,remove:R,destroy:h,canMove:L,dragging:!1});return!0===ae.removeOnSpill&&le.on("over",Y).on("out",F),r(),le}function i(e,n,r,i){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},u={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?w[n](e,u[r],i):t.navigator.msPointerEnabled?w[n](e,c[r],i):(w[n](e,o[r],i),w[n](e,r,i))}function o(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function u(e){var t=e.getBoundingClientRect();return{left:t.left+c("scrollLeft","pageXOffset"),top:t.top+c("scrollTop","pageYOffset")}}function c(e,n){return void 0!==t[n]?t[n]:S.clientHeight?S[e]:E.body[e]}function a(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=E.elementFromPoint(t,n),i.className=o,r}function l(){return!1}function s(){return!0}function f(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function v(e){return e.parentNode===E?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||p(e)}function p(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||p(v(e))))}function g(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=h(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var b=n(7),w=n(14),T=n(17),E=document,S=E.documentElement;e.exports=r}).call(t,n(0))},function(e,t,n){"use strict";var r=n(8),i=n(9);e.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete o[t];else if(0===r)o={};else{var i=o[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var u=(o[t]||[]).slice(0);return function(){var o=r(arguments),c=this||e;if("error"===t&&!1!==n.throws&&!u.length)throw 1===o.length?o[0]:o;return u.forEach(function(r){n.async?i(r,o,c):r.apply(c,o),r._once&&e.off(t,r)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var r=n(10);e.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,r="function"==typeof t;n=r?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(11).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(12),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[a]=r,c(a),a++}function i(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function u(e){if(s)setTimeout(u,0,e);else{var t=l[e];if(t){s=!0;try{o(t)}finally{i(e),s=!1}}}}if(!e.setImmediate){var c,a=1,l={},s=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){u(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},c=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;c=function(t){var n=f.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(u,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(13))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){p&&v&&(p=!1,v.length?m=v.concat(m):g=-1,m.length&&c())}function c(){if(!p){var e=i(u);p=!0;for(var t=m.length;t;){for(v=m,m=[];++g<t;)v&&v[g].run();g=-1,t=m.length}v=null,p=!1,o(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var s,f,d=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var v,m=[],p=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new a(e,t)),1!==m.length||p||i(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){return e.addEventListener(t,n,r)}function i(e,t,n){return e.attachEvent("on"+t,l(e,t,n))}function o(e,t,n,r){return e.removeEventListener(t,n,r)}function u(e,t,n){var r=s(e,t,n);if(r)return e.detachEvent("on"+t,r)}function c(e,t,n){var r=-1===v.indexOf(t)?function(){return new d(t,{detail:n})}():function(){var e;return m.createEvent?(e=m.createEvent("Event"),e.initEvent(t,!0,!0)):m.createEventObject&&(e=m.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}function a(e,n,r){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,r.call(e,i)}}function l(e,t,n){var r=s(e,t,n)||a(e,t,n);return h.push({wrapper:r,element:e,type:t,fn:n}),r}function s(e,t,n){var r=f(e,t,n);if(r){var i=h[r].wrapper;return h.splice(r,1),i}}function f(e,t,n){var r,i;for(r=0;r<h.length;r++)if(i=h[r],i.element===e&&i.type===t&&i.fn===n)return r}var d=n(15),v=n(16),m=t.document,p=r,g=o,h=[];t.addEventListener||(p=i,g=u),e.exports={add:p,remove:g,fabricate:c}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],r="",i=/^on/;for(r in t)i.test(r)&&n.push(r.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function r(e){var t=u[e];return t?t.lastIndex=0:u[e]=t=new RegExp(c+e+a,"g"),t}function i(e,t){var n=e.className;n.length?r(t).test(n)||(e.className+=" "+t):e.className=t}function o(e,t){e.className=e.className.replace(r(t)," ").trim()}var u={},c="(?:^|\\s)",a="(?:\\s|$)";e.exports={add:i,rm:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t),r=function(){var e=n.value;return e?JSON.parse(e):[]},i=function(t){var n=t.length,r=e.querySelector(".customizer-curation-list-input"),i=r.getAttribute("data-max");i&&(n<parseInt(i,10)?r.removeAttribute("disabled"):r.setAttribute("disabled",!0))},o=function(e){var t=r();return t=t.concat(e),i(t),t},u=function(e,t){var n=r();return n=t(n,e),i(n),n};return{add:function(e){n.value=JSON.stringify(o(e))},remove:function(e,t){n.value=JSON.stringify(u(e,t))},update:function(e){n.value=JSON.stringify(e)},el:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.checkLimit=function(e){var t=e.querySelectorAll("li"),n=e.querySelector(".customizer-curation-list-input"),r=n.getAttribute("data-max");r&&(t.length<parseInt(r,10)?n.removeAttribute("disabled"):n.setAttribute("disabled",!0))};t.removeItems=function(e,t,n){return function(i){e.remove(i,t),r(n),jQuery(e.el).trigger("change")}},t.dragItems=function(e,t){return function(n,r){var i=t(n,r);e.update(i),jQuery(e.el).trigger("change")}},t.onDragObject=function(e,t){return[].reduce.call(t,function(e,t){var n={id:t.dataset.id,title:t.querySelector("span").innerHTML};return e.concat([n])},[])},t.onDragText=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector("span").innerHTML;return e.concat([n])},[])},t.onRemoveObject=function(e,t){return e.filter(function(e){return e.title!==t})},t.onRemoveText=function(e,t){return e.filter(function(e){return e!==t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector(e.hidden),r="Curation_"+t.dataset.id,o=window[r].baseURL+"/wp-json/wp/v2/"+window[r].resource+"?search=";(0,i.default)(t.querySelector(e.input),o,function(e,t){n.value=JSON.stringify(e),jQuery(n).trigger("change")},function(){n.value="",jQuery(n).trigger("change")})})};var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA3NmZhZDRkZDA1NGI5NGRjZmVmNSIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL2F1dG9zdWdnZXN0LmpzIiwid2VicGFjazovLy8uL2luZGV4LmpzIiwid2VicGFjazovLy8uL2F1dG9zdWdnZXN0LWxpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vbGlzdC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvZHJhZ3VsYS9kcmFndWxhLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvcmlzZS9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvcmlzZS92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9jb250cmEvZW1pdHRlci5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvYXRvYS9hdG9hLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvcmlzZS9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvcmlzZS92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9jb250cmEvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9jcm9zc3ZlbnQuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9ldmVudG1hcC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvZHJhZ3VsYS9jbGFzc2VzLmpzIiwid2VicGFjazovLy8uL3NlcmlhbGl6ZWQtaW5wdXQuanMiLCJ3ZWJwYWNrOi8vLy4vdXRpbGl0aWVzLmpzIiwid2VicGFjazovLy8uL2F1dG8taXRlbS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJlIiwid2luZG93IiwidmFsdWUiLCJkZWZhdWx0IiwiYXV0b3N1Z2dlc3QiLCJlbmRwb2ludCIsIm9uU2VsZWN0Iiwib25FbXB0eSIsInhociIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJhZGQiLCJnZXRPcHRpb25zIiwidXBkYXRlT3B0aW9ucyIsIm9uQXV0b1N1Z2dlc3RJbnB1dCIsImlzSlNPTiIsInN0ciIsIkpTT04iLCJwYXJzZSIsImJ1aWxkUXVlcnkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0xvd2VyQ2FzZSIsImlucHV0IiwiaW5wdXRWYWx1ZSIsImxpc3ROYW1lIiwiZ2V0QXR0cmlidXRlIiwibGlzdE9wdGlvbnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsIm1hdGNoIiwicmVkdWNlIiwiYWNjIiwib3B0aW9uIiwiY29uY2F0IiwiaWQiLCJkYXRhc2V0IiwidGl0bGUiLCJjYWxsYmFjayIsInF1ZXJ5IiwidXJsIiwiYWJvcnQiLCJYTUxIdHRwUmVxdWVzdCIsImV2dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJET05FIiwic3RhdHVzIiwicmVzdWx0cyIsInJlc3BvbnNlVGV4dCIsIm1lc3NhZ2UiLCJvcGVuIiwic2VuZCIsImNyZWF0ZU9wdGlvbiIsInJlbmRlcmVkIiwiY3JlYXRlT3B0aW9ucyIsImRhdGFsaXN0IiwibmV3T3B0aW9ucyIsInJlc3VsdCIsInJlbW92ZSIsImlubmVySFRNTCIsImVycm9yIiwicmVzcG9uc2UiLCJjb25zb2xlIiwid2FybiIsIkFycmF5IiwiaXNBcnJheSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfaW5kZXgiLCJfYXV0b3N1Z2dlc3RMaXN0IiwiX2F1dG9zdWdnZXN0TGlzdDIiLCJfYXV0b0l0ZW0iLCJfYXV0b0l0ZW0yIiwiY3JlYXRlQXV0b1N1Z2dlc3RJdGVtIiwicGFyZW50IiwibGlzdCIsImhpZGRlbiIsImxpc3RUZW1wbGF0ZSIsImFyZ3MiLCJmaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImF1dG9MaXN0IiwiSGlkZGVuIiwiX3NlcmlhbGl6ZWRJbnB1dDIiLCJoaWRkZW5FbCIsInF1ZXJ5U2VsZWN0b3IiLCJfdXRpbGl0aWVzIiwicmVtb3ZlSXRlbXMiLCJvblJlbW92ZU9iamVjdCIsImRyYWciLCJkcmFnSXRlbXMiLCJvbkRyYWdPYmplY3QiLCJMaXN0IiwiX2xpc3QyIiwiYXNzaWduIiwib25EcmFnIiwib25SZW1vdmUiLCJsb2NhbGl6ZWRLZXkiLCJiYXNlVVJMIiwicmVzb3VyY2UiLCJfYXV0b3N1Z2dlc3QyIiwiY2hlY2tMaW1pdCIsImpRdWVyeSIsInRyaWdnZXIiLCJfbGlzdCIsIl9hdXRvc3VnZ2VzdCIsIl9zZXJpYWxpemVkSW5wdXQiLCJyZWdpc3RlckRyYWdFdmVudHMiLCJyZWdpc3RlclJlbW92ZUV2ZW50cyIsImh0bWwiLCJsaXN0SXRlbSIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IiwiYXBwZW5kQ2hpbGQiLCJfZHJhZ3VsYSIsIl9kcmFndWxhMiIsImxpc3RJdGVtcyIsInRhZ05hbWUiLCJjbG9zZXN0IiwicmVtb3ZlQ2hpbGQiLCJvbiIsImVsIiwiZ2xvYmFsIiwiZHJhZ3VsYSIsImluaXRpYWxDb250YWluZXJzIiwib3B0aW9ucyIsImlzQ29udGFpbmVyIiwiZHJha2UiLCJjb250YWluZXJzIiwiaW5kZXhPZiIsImV2ZW50cyIsIm9wIiwidG91Y2h5IiwiZG9jdW1lbnRFbGVtZW50IiwiZ3JhYiIsInJlbGVhc2UiLCJldmVudHVhbE1vdmVtZW50cyIsInN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQiLCJtb3ZlbWVudHMiLCJjcm9zc3ZlbnQiLCJwcmV2ZW50R3JhYmJlZCIsImRlc3Ryb3kiLCJfZ3JhYmJlZCIsInByZXZlbnREZWZhdWx0IiwiX21vdmVYIiwiY2xpZW50WCIsIl9tb3ZlWSIsImNsaWVudFkiLCJ3aGljaE1vdXNlQnV0dG9uIiwibWV0YUtleSIsImN0cmxLZXkiLCJpdGVtIiwiY29udGV4dCIsImNhblN0YXJ0IiwidHlwZSIsImlzSW5wdXQiLCJmb2N1cyIsImlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiIsImdldENvb3JkIiwiZG9jIiwiZWxlbWVudEZyb21Qb2ludCIsImdyYWJiZWQiLCJlbmQiLCJzdGFydCIsIm9mZnNldCIsImdldE9mZnNldCIsIl9pdGVtIiwiX29mZnNldFgiLCJsZWZ0IiwiX29mZnNldFkiLCJ0b3AiLCJjbGFzc2VzIiwiX2NvcHkiLCJyZW5kZXJNaXJyb3JJbWFnZSIsImRyYWdnaW5nIiwiX21pcnJvciIsImhhbmRsZSIsImdldFBhcmVudCIsImludmFsaWQiLCJzb3VyY2UiLCJtb3ZlcyIsIm5leHRFbCIsImNhbk1vdmUiLCJtYW51YWxTdGFydCIsImlzQ29weSIsImNsb25lTm9kZSIsImVtaXQiLCJfc291cmNlIiwiX2luaXRpYWxTaWJsaW5nIiwiX2N1cnJlbnRTaWJsaW5nIiwiaW52YWxpZFRhcmdldCIsImRyb3AiLCJ1bmdyYWIiLCJlbGVtZW50QmVoaW5kQ3Vyc29yIiwiZ2V0RWxlbWVudEJlaGluZFBvaW50IiwiZHJvcFRhcmdldCIsImZpbmREcm9wVGFyZ2V0IiwiY29weVNvcnRTb3VyY2UiLCJyZW1vdmVPblNwaWxsIiwiY2FuY2VsIiwiaXNJbml0aWFsUGxhY2VtZW50IiwiY2xlYW51cCIsInJldmVydCIsInJldmVydHMiLCJhcmd1bWVudHMiLCJyZXZlcnRPblNwaWxsIiwiaW5pdGlhbCIsImluc2VydEJlZm9yZSIsInJlbW92ZU1pcnJvckltYWdlIiwicm0iLCJfcmVuZGVyVGltZXIiLCJjbGVhclRpbWVvdXQiLCJfbGFzdERyb3BUYXJnZXQiLCJzaWJsaW5nIiwiaW1tZWRpYXRlIiwiZ2V0SW1tZWRpYXRlQ2hpbGQiLCJyZWZlcmVuY2UiLCJnZXRSZWZlcmVuY2UiLCJhY2NlcHRzIiwibW92ZWQiLCJ4IiwieSIsInN0eWxlIiwiY2hhbmdlZCIsInNwaWxsT3ZlciIsInNwaWxsT3V0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiZ2V0UmVjdFdpZHRoIiwiaGVpZ2h0IiwiZ2V0UmVjdEhlaWdodCIsIm1pcnJvckNvbnRhaW5lciIsInJlc29sdmUiLCJhZnRlciIsImhvcml6b250YWwiLCJkaXJlY3Rpb24iLCJsZW4iLCJjaGlsZHJlbiIsImNvbnRhaW5lciIsImNvcHkiLCJhbHdheXMiLCJuZXZlciIsImJvZHkiLCJlbWl0dGVyIiwiZm4iLCJ0b3VjaCIsIm1vdXNldXAiLCJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJwb2ludGVycyIsIm1pY3Jvc29mdCIsIm5hdmlnYXRvciIsInBvaW50ZXJFbmFibGVkIiwibXNQb2ludGVyRW5hYmxlZCIsInRvdWNoZXMiLCJ3aGljaCIsImJ1dHRvbnMiLCJidXR0b24iLCJnZXRTY3JvbGwiLCJzY3JvbGxQcm9wIiwib2Zmc2V0UHJvcCIsImNsaWVudEhlaWdodCIsInBvaW50Iiwic3RhdGUiLCJjbGFzc05hbWUiLCJyaWdodCIsImJvdHRvbSIsInBhcmVudE5vZGUiLCJpc0VkaXRhYmxlIiwiY29udGVudEVkaXRhYmxlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsImdldEV2ZW50SG9zdCIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImNvb3JkIiwiaG9zdCIsIm1pc3NNYXAiLCJwYWdlWCIsInBhZ2VZIiwiYXRvYSIsImRlYm91bmNlIiwidGhpbmciLCJvcHRzIiwidW5kZWZpbmVkIiwicHVzaCIsIm9uY2UiLCJfb25jZSIsIm9mZiIsImV0Iiwic3BsaWNlIiwiZW1pdHRlclNuYXBzaG90Iiwic2hpZnQiLCJhcHBseSIsInNsaWNlIiwiY3R4IiwidGhyb3dzIiwibGlzdGVuIiwiYXN5bmMiLCJhIiwidGlja3kiLCJzZXRJbW1lZGlhdGUiLCJ0aWNrIiwic2kiLCJzZXRUaW1lb3V0IiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVvdXQiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsImNsZWFySW1tZWRpYXRlIiwicHJvY2VzcyIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwicnVuIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwibmV4dFRpY2siLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzIiwib2xkT25NZXNzYWdlIiwib25tZXNzYWdlIiwibWVzc2FnZVByZWZpeCIsIk1hdGgiLCJyYW5kb20iLCJvbkdsb2JhbE1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJjcmVhdGVFbGVtZW50Iiwic2NyaXB0Iiwic2VsZiIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJhZGRFdmVudEVhc3kiLCJjYXB0dXJpbmciLCJhZGRFdmVudEhhcmQiLCJ3cmFwIiwicmVtb3ZlRXZlbnRFYXN5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50SGFyZCIsImxpc3RlbmVyIiwidW53cmFwIiwiZGV0YWNoRXZlbnQiLCJmYWJyaWNhdGVFdmVudCIsIm1vZGVsIiwiZXZlbnRtYXAiLCJjdXN0b21FdmVudCIsImRldGFpbCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJkaXNwYXRjaEV2ZW50IiwiZmlyZUV2ZW50Iiwid3JhcHBlckZhY3RvcnkiLCJvcmlnaW5hbEV2ZW50Iiwic3JjRWxlbWVudCIsInJldHVyblZhbHVlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwia2V5Q29kZSIsIndyYXBwZXIiLCJoYXJkQ2FjaGUiLCJlbGVtZW50IiwiZmluZCIsImFkZEV2ZW50IiwicmVtb3ZlRXZlbnQiLCJmYWJyaWNhdGUiLCJOYXRpdmVDdXN0b21FdmVudCIsIkN1c3RvbUV2ZW50IiwiZm9vIiwicGFyYW1zIiwiaW5pdEN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJCb29sZWFuIiwiZXZlbnRuYW1lIiwicm9uIiwidGVzdCIsImxvb2t1cENsYXNzIiwiY2FjaGVkIiwiY2FjaGUiLCJsYXN0SW5kZXgiLCJSZWdFeHAiLCJhZGRDbGFzcyIsImN1cnJlbnQiLCJybUNsYXNzIiwicmVwbGFjZSIsInRyaW0iLCJoaWRkZW5JbnB1dCIsImdldEN1cnJlbnRWYWx1ZSIsImN1cnJlbnRWYWx1ZSIsImNvdW50IiwiZmllbGQiLCJtYXgiLCJwYXJzZUludCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImFkZFZhbHVlIiwicmVtb3ZlVmFsdWUiLCJzdHJpbmdpZnkiLCJ1cGRhdGUiLCJ2YWx1ZXMiLCJvbkRyYWdUZXh0IiwibmV3VmFsdWUiLCJmaWx0ZXIiLCJvblJlbW92ZVRleHQiLCJhdXRvSXRlbSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUksRUFBQUosRUFDQUssR0FBQSxFQUNBSCxXQVVBLE9BTkFKLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0E0QkFGLEdBQUFRLEVBQUFULEVB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akRFLGVBQWUsU0FBRWYsRUFBY2EsR0FDM0MsTUFBT2IsR0FBYWMsT0FBUSxTQUFFcEIsR0FBRixNQUFlQSxLQUFZbUIsTXBCazFEbEQsU0FBVTVlLEVBQVFELEVBQVNILEdBRWpDLFlBR0FjLFFBQU9DLGVBQWVaLEVBQVMsY0FDOUI4QixPQUFPLElBR1I5QixFQUFRK0IsUXFCLzRETyxTQUFXOEUsR0FDekIsR0FBTUMsR0FBU3JELFNBQVNzRCxpQkFBa0JGLEVBQUtKLE9BRS9DLEtBQU9LLEVBQ04sT0FBTyxLQUdMRSxRQUFRNUcsS0FBTTBHLEVBQVEsU0FBRWtZLEdBQzFCLEdBQU1yWSxHQUFTcVksRUFBUzNYLGNBQWVSLEVBQUtGLFFBQ3RDc0IsY0FBMkIrVyxFQUFTOWEsUUFBUUQsR0FDNUNoQyxFQUFjSixPQUFPb0csR0FBY0MsUUFBbkMsa0JBQTREckcsT0FBT29HLEdBQWNFLFNBQWpGLFlBRU4sRUFBQUMsRUFBQXJHLFNBQ0NpZCxFQUFTM1gsY0FBZVIsRUFBS3pELE9BQzdCbkIsRUFDQSxTQUFFSCxFQUFPc0IsR0FDUnVELEVBQU83RSxNQUFRaUIsS0FBSzBiLFVBQVczYyxHQUMvQndHLE9BQVEzQixHQUFTNEIsUUFBUyxXQUUzQixXQUNDNUIsRUFBTzdFLE1BQVEsR0FDZndHLE9BQVEzQixHQUFTNEIsUUFBUyxjQXZCOUIsSUFBQUUsR0FBQTVJLEVBQUEsR3JCeTZESXVJLEVBRUosU0FBZ0NsQyxHQUFPLE1BQU9BLElBQU9BLEVBQUlqRixXQUFhaUYsR0FBUW5FLFFBQVNtRSxJQUY1Q3VDIiwiZmlsZSI6ImluZGV4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIvZGlzdC9cIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxudmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXV0b3N1Z2dlc3QsIGVuZHBvaW50LCBvblNlbGVjdCwgb25FbXB0eSkge1xuXG5cdGlmICghYXV0b3N1Z2dlc3QpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHR2YXIgeGhyID0gZmFsc2U7XG5cblx0YXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHRcdGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPT09IDAgJiYgb25FbXB0eSkge1xuXHRcdFx0b25FbXB0eSgpO1xuXHRcdH1cblxuXHRcdGlmIChlLnRhcmdldC52YWx1ZS5sZW5ndGggPCAzKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0YXV0b3N1Z2dlc3QuY2xhc3NMaXN0LmFkZCgnc2hvdycpO1xuXHRcdHhociA9IGdldE9wdGlvbnMoeGhyLCB1cGRhdGVPcHRpb25zLCBhdXRvc3VnZ2VzdCwgZW5kcG9pbnQpO1xuXHR9KTtcblx0YXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBmdW5jdGlvbiAoZSkge1xuXHRcdHZhciB2YWx1ZSA9IG9uQXV0b1N1Z2dlc3RJbnB1dChlKTtcblxuXHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0b25TZWxlY3QodmFsdWUsIGF1dG9zdWdnZXN0KTtcblx0XHR9XG5cdH0pO1xufTtcblxudmFyIGlzSlNPTiA9IGZ1bmN0aW9uIGlzSlNPTihzdHIpIHtcblxuXHRpZiAodHlwZW9mIHN0ciAhPT0gJ3N0cmluZycpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0dHJ5IHtcblx0XHRKU09OLnBhcnNlKHN0cik7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5cbnZhciBidWlsZFF1ZXJ5ID0gZnVuY3Rpb24gYnVpbGRRdWVyeSh2YWx1ZSkge1xuXHRyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlLnRvTG93ZXJDYXNlKCkpO1xufTtcblxudmFyIG9uQXV0b1N1Z2dlc3RJbnB1dCA9IGZ1bmN0aW9uIG9uQXV0b1N1Z2dlc3RJbnB1dChlKSB7XG5cdHZhciBpbnB1dCA9IGUudGFyZ2V0O1xuXHR2YXIgaW5wdXRWYWx1ZSA9IGlucHV0LnZhbHVlO1xuXHR2YXIgbGlzdE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ2xpc3QnKTtcblx0dmFyIGxpc3RPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobGlzdE5hbWUpLmNoaWxkTm9kZXM7XG5cblx0dmFyIG1hdGNoID0gW10ucmVkdWNlLmNhbGwobGlzdE9wdGlvbnMsIGZ1bmN0aW9uIChhY2MsIG9wdGlvbikge1xuXHRcdGlmIChvcHRpb24udmFsdWUgPT09IGlucHV0VmFsdWUpIHtcblx0XHRcdHJldHVybiBhY2MuY29uY2F0KHtcblx0XHRcdFx0aWQ6IG9wdGlvbi5kYXRhc2V0LmlkLFxuXHRcdFx0XHR0aXRsZTogb3B0aW9uLnZhbHVlXG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0cmV0dXJuIGFjYztcblx0fSwgW10pO1xuXG5cdHJldHVybiBtYXRjaC5sZW5ndGggPT09IDAgPyBmYWxzZSA6IG1hdGNoWzBdO1xufTtcblxudmFyIGdldE9wdGlvbnMgPSBmdW5jdGlvbiBnZXRPcHRpb25zKHhociwgY2FsbGJhY2ssIGlucHV0LCBlbmRwb2ludCkge1xuXHR2YXIgcXVlcnkgPSBidWlsZFF1ZXJ5KGlucHV0LnZhbHVlKTtcblx0dmFyIHVybCA9IGVuZHBvaW50ICsgcXVlcnk7XG5cblx0aWYgKHhocikge1xuXHRcdHhoci5hYm9ydCgpO1xuXHR9XG5cblx0eGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cblx0eGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAoZXZ0KSB7XG5cdFx0Y2FsbGJhY2soZmFsc2UsIGV2dCk7XG5cdH0sIGZhbHNlKTtcblxuXHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSAmJiB4aHIuc3RhdHVzID09PSAyMDApIHtcblx0XHRcdGNhbGxiYWNrKGZhbHNlLCB7IHJlc3VsdHM6IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCksIGlucHV0OiBpbnB1dCB9KTtcblx0XHR9IGVsc2UgaWYgKHhoci5yZWFkeVN0YXRlID09PSBYTUxIdHRwUmVxdWVzdC5ET05FICYmIHhoci5zdGF0dXMgPj0gNDAwKSB7XG5cdFx0XHRpZiAoeGhyLnJlc3BvbnNlVGV4dCAmJiBpc0pTT04oeGhyLnJlc3BvbnNlVGV4dCkpIHtcblx0XHRcdFx0Y2FsbGJhY2soeyBtZXNzYWdlOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSwgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHR4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbiAoZXZ0KSB7XG5cdFx0Y2FsbGJhY2soZXZ0LCBmYWxzZSk7XG5cdH0sIGZhbHNlKTtcblxuXHR4aHIuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBmdW5jdGlvbiAoZXZ0KSB7XG5cdFx0Y2FsbGJhY2sodHJ1ZSwgZmFsc2UpO1xuXHR9LCBmYWxzZSk7XG5cblx0eGhyLm9wZW4oJ0dFVCcsIHVybCwgdHJ1ZSk7XG5cblx0eGhyLnNlbmQoKTtcblxuXHRyZXR1cm4geGhyO1xufTtcblxudmFyIGNyZWF0ZU9wdGlvbiA9IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbih2YWx1ZSkge1xuXHRyZXR1cm4gJzxvcHRpb24gZGF0YS1pZD0nICsgdmFsdWUuaWQgKyAnIHZhbHVlPVwiJyArIHZhbHVlLnRpdGxlLnJlbmRlcmVkICsgJ1wiPic7XG59O1xuXG52YXIgY3JlYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMocmVzdWx0cywgaW5wdXQpIHtcblx0dmFyIGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG5cdHZhciBkYXRhbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKTtcblxuXHR2YXIgbmV3T3B0aW9ucyA9IHJlc3VsdHMucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHJlc3VsdCkge1xuXHRcdHZhciBvcHRpb24gPSBjcmVhdGVPcHRpb24ocmVzdWx0KTtcblxuXHRcdHJldHVybiBhY2MuY29uY2F0KG9wdGlvbik7XG5cdH0sICcnKTtcblxuXHRpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93Jyk7XG5cdGRhdGFsaXN0LmlubmVySFRNTCA9IG5ld09wdGlvbnM7XG59O1xuXG52YXIgdXBkYXRlT3B0aW9ucyA9IGZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMoZXJyb3IsIHJlc3BvbnNlKSB7XG5cdGlmIChlcnJvcikge1xuXG5cdFx0aWYgKGVycm9yID09PSB0cnVlKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0ZXJyb3IuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuXHRcdGNvbnNvbGUud2FybihlcnJvcik7XG5cdH1cblxuXHRpZiAocmVzcG9uc2UpIHtcblx0XHRpZiAoIUFycmF5LmlzQXJyYXkocmVzcG9uc2UucmVzdWx0cykpIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRjcmVhdGVPcHRpb25zKHJlc3BvbnNlLnJlc3VsdHMsIHJlc3BvbnNlLmlucHV0KTtcblx0fVxufTtcblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblxudmFyIF9hdXRvc3VnZ2VzdExpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXG52YXIgX2F1dG9zdWdnZXN0TGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc3VnZ2VzdExpc3QpO1xuXG52YXIgX2F1dG9JdGVtID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cbnZhciBfYXV0b0l0ZW0yID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b0l0ZW0pO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gZnVuY3Rpb24gY3JlYXRlQXV0b1N1Z2dlc3RJdGVtKHZhbHVlKSB7XG5cdHJldHVybiAnPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW1cIiBkYXRhLWlkPVwiJyArIHZhbHVlLmlkICsgJ1wiPlxcbiAgICAgICAgPHNwYW4+JyArIHZhbHVlLnRpdGxlICsgJzwvc3Bhbj5cXG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxcbiAgICAgICAgICAgIDxwYXRoIGQ9XCJNMTAgMmM0LjQyIDAgOCAzLjU4IDggOHMtMy41OCA4LTggOC04LTMuNTgtOC04IDMuNTgtOFxcblxcdFxcdFxcdDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxcbiAgICAgICAgPC9zdmc+XFxuICAgIDwvbGk+Jztcbn07IC8qIGVzbGludCBuby11bnVzZWQtdmFyczogW1wiZXJyb3JcIiwgeyBcInZhcnNJZ25vcmVQYXR0ZXJuXCI6IFwiYmFzZUNzc1wiIH1dICovXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCgwLCBfYXV0b3N1Z2dlc3RMaXN0Mi5kZWZhdWx0KSh7XG5cdFx0cGFyZW50OiAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdCcsXG5cdFx0aW5wdXQ6ICcuY3VzdG9taXplci1jdXJhdGlvbi1saXN0LWlucHV0Jyxcblx0XHRsaXN0OiAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1saXN0Jyxcblx0XHRoaWRkZW46ICcuY3VzdG9taXplci1jdXJhdGlvbi1saXN0LWhpZGRlbicsXG5cdFx0bGlzdFRlbXBsYXRlOiBjcmVhdGVBdXRvU3VnZ2VzdEl0ZW1cblx0fSk7XG5cblx0KDAsIF9hdXRvSXRlbTIuZGVmYXVsdCkoe1xuXHRcdHBhcmVudDogJy5jdXN0b21pemVyLWN1cmF0aW9uJyxcblx0XHRpbnB1dDogJy5jdXN0b21pemVyLWN1cmF0aW9uLWlucHV0Jyxcblx0XHRoaWRkZW46ICcuY3VzdG9taXplci1jdXJhdGlvbi1oaWRkZW4nXG5cdH0pO1xufSk7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0dmFyIGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG5cdGlmICghZmllbGRzKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0W10uZm9yRWFjaC5jYWxsKGZpZWxkcywgZnVuY3Rpb24gKGF1dG9MaXN0KSB7XG5cdFx0dmFyIEhpZGRlbiA9ICgwLCBfc2VyaWFsaXplZElucHV0Mi5kZWZhdWx0KShhdXRvTGlzdCwgYXJncy5oaWRkZW4pO1xuXHRcdHZhciBoaWRkZW5FbCA9IGF1dG9MaXN0LnF1ZXJ5U2VsZWN0b3IoYXJncy5oaWRkZW4pO1xuXHRcdHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlT2JqZWN0LCBhdXRvTGlzdCk7XG5cdFx0dmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdPYmplY3QpO1xuXHRcdHZhciBMaXN0ID0gKDAsIF9saXN0Mi5kZWZhdWx0KShhdXRvTGlzdCwgT2JqZWN0LmFzc2lnbihhcmdzLCB7IG9uRHJhZzogZHJhZywgb25SZW1vdmU6IHJlbW92ZSB9KSk7XG5cdFx0dmFyIGxvY2FsaXplZEtleSA9ICdDdXJhdGlvbl8nICsgYXV0b0xpc3QuZGF0YXNldC5pZDtcblx0XHR2YXIgZW5kcG9pbnQgPSB3aW5kb3dbbG9jYWxpemVkS2V5XS5iYXNlVVJMICsgJy93cC1qc29uL3dwL3YyLycgKyB3aW5kb3dbbG9jYWxpemVkS2V5XS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG5cblx0XHQoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKGFyZ3MuaW5wdXQpLCBlbmRwb2ludCwgZnVuY3Rpb24gKHZhbHVlLCBpbnB1dCkge1xuXHRcdFx0TGlzdC5hZGQodmFsdWUpO1xuXHRcdFx0aW5wdXQudmFsdWUgPSAnJztcblx0XHRcdEhpZGRlbi5hZGQodmFsdWUpO1xuXHRcdFx0KDAsIF91dGlsaXRpZXMuY2hlY2tMaW1pdCkoYXV0b0xpc3QpO1xuXHRcdFx0alF1ZXJ5KGhpZGRlbkVsKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9KTtcblx0fSk7XG59O1xuXG52YXIgX2xpc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXG52YXIgX2xpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGlzdCk7XG5cbnZhciBfYXV0b3N1Z2dlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX2F1dG9zdWdnZXN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9zdWdnZXN0KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4KTtcblxudmFyIF9zZXJpYWxpemVkSW5wdXQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2VyaWFsaXplZElucHV0KTtcblxudmFyIF91dGlsaXRpZXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJlbnQsIGFyZ3MpIHtcblx0dmFyIGxpc3QgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihhcmdzLmxpc3QpO1xuXG5cdHJlZ2lzdGVyRHJhZ0V2ZW50cyhsaXN0LCBhcmdzLm9uRHJhZyk7XG5cdHJlZ2lzdGVyUmVtb3ZlRXZlbnRzKGxpc3QsIGFyZ3Mub25SZW1vdmUpO1xuXG5cdHJldHVybiB7XG5cdFx0YWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpIHtcblx0XHRcdHZhciBodG1sID0gYXJncy5saXN0VGVtcGxhdGUodmFsdWUpO1xuXHRcdFx0dmFyIGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoaHRtbCk7XG5cblx0XHRcdGxpc3QuYXBwZW5kQ2hpbGQobGlzdEl0ZW0pO1xuXHRcdH1cblx0fTtcbn07XG5cbnZhciBfZHJhZ3VsYSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cbnZhciBfZHJhZ3VsYTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kcmFndWxhKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIHJlZ2lzdGVyUmVtb3ZlRXZlbnRzID0gZnVuY3Rpb24gcmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgb25SZW1vdmUpIHtcblx0dmFyIGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcblxuXHRsaXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHR2YXIgdGFyZ2V0ID0gZS50YXJnZXQudGFnTmFtZSA9PT0gJ3N2ZycgPyBlLnRhcmdldCA6IGUudGFyZ2V0LmNsb3Nlc3QoJ3N2ZycpO1xuXG5cdFx0aWYgKHRhcmdldC50YWdOYW1lID09PSAnc3ZnJykge1xuXHRcdFx0dmFyIGxpc3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnbGknKTtcblx0XHRcdHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG5cblx0XHRcdGxpc3QucmVtb3ZlQ2hpbGQobGlzdEl0ZW0pO1xuXHRcdFx0b25SZW1vdmUodmFsdWUpO1xuXHRcdH1cblx0fSk7XG5cblx0cmV0dXJuIGxpc3RJdGVtcztcbn07XG5cbnZhciByZWdpc3RlckRyYWdFdmVudHMgPSBmdW5jdGlvbiByZWdpc3RlckRyYWdFdmVudHMobGlzdCwgY2FsbGJhY2spIHtcblx0dmFyIGRyYWtlID0gKDAsIF9kcmFndWxhMi5kZWZhdWx0KShbbGlzdF0pO1xuXG5cdGRyYWtlLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24gKGVsKSB7XG5cdFx0dmFyIGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcblxuXHRcdGNhbGxiYWNrKGxpc3QsIGxpc3RJdGVtcyk7XG5cdH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgZW1pdHRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG52YXIgY3Jvc3N2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNCk7XG52YXIgY2xhc3NlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgYXRvYSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG52YXIgZGVib3VuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtaXR0ZXIgKHRoaW5nLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGV2dCA9IHt9O1xuICBpZiAodGhpbmcgPT09IHVuZGVmaW5lZCkgeyB0aGluZyA9IHt9OyB9XG4gIHRoaW5nLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgaWYgKCFldnRbdHlwZV0pIHtcbiAgICAgIGV2dFt0eXBlXSA9IFtmbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2dFt0eXBlXS5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vbmNlID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgZm4uX29uY2UgPSB0cnVlOyAvLyB0aGluZy5vZmYoZm4pIHN0aWxsIHdvcmtzIVxuICAgIHRoaW5nLm9uKHR5cGUsIGZuKTtcbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoYyA9PT0gMSkge1xuICAgICAgZGVsZXRlIGV2dFt0eXBlXTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDApIHtcbiAgICAgIGV2dCA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXQgPSBldnRbdHlwZV07XG4gICAgICBpZiAoIWV0KSB7IHJldHVybiB0aGluZzsgfVxuICAgICAgZXQuc3BsaWNlKGV0LmluZGV4T2YoZm4pLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5lbWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgIHJldHVybiB0aGluZy5lbWl0dGVyU25hcHNob3QoYXJncy5zaGlmdCgpKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgdGhpbmcuZW1pdHRlclNuYXBzaG90ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgZXQgPSAoZXZ0W3R5cGVdIHx8IFtdKS5zbGljZSgwKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgICB2YXIgY3R4ID0gdGhpcyB8fCB0aGluZztcbiAgICAgIGlmICh0eXBlID09PSAnZXJyb3InICYmIG9wdHMudGhyb3dzICE9PSBmYWxzZSAmJiAhZXQubGVuZ3RoKSB7IHRocm93IGFyZ3MubGVuZ3RoID09PSAxID8gYXJnc1swXSA6IGFyZ3M7IH1cbiAgICAgIGV0LmZvckVhY2goZnVuY3Rpb24gZW1pdHRlciAobGlzdGVuKSB7XG4gICAgICAgIGlmIChvcHRzLmFzeW5jKSB7IGRlYm91bmNlKGxpc3RlbiwgYXJncywgY3R4KTsgfSBlbHNlIHsgbGlzdGVuLmFwcGx5KGN0eCwgYXJncyk7IH1cbiAgICAgICAgaWYgKGxpc3Rlbi5fb25jZSkgeyB0aGluZy5vZmYodHlwZSwgbGlzdGVuKTsgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpbmc7XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIHRoaW5nO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgdGlja3kgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZSAoZm4sIGFyZ3MsIGN0eCkge1xuICBpZiAoIWZuKSB7IHJldHVybjsgfVxuICB0aWNreShmdW5jdGlvbiBydW4gKCkge1xuICAgIGZuLmFwcGx5KGN0eCB8fCBudWxsLCBhcmdzIHx8IFtdKTtcbiAgfSk7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHNldEltbWVkaWF0ZSkge3ZhciBzaSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsIHRpY2s7XG5pZiAoc2kpIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRJbW1lZGlhdGUoZm4pOyB9O1xufSBlbHNlIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRUaW1lb3V0KGZuLCAwKTsgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aWNrO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTEpLnNldEltbWVkaWF0ZSkpXG5cbi8qKiovIH0pLFxuLyogMTEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2VzcykgeyhmdW5jdGlvbiAoZ2xvYmFsLCB1bmRlZmluZWQpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGlmIChnbG9iYWwuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDE7IC8vIFNwZWMgc2F5cyBncmVhdGVyIHRoYW4gemVyb1xuICAgIHZhciB0YXNrc0J5SGFuZGxlID0ge307XG4gICAgdmFyIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgIHZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG4gICAgdmFyIHJlZ2lzdGVySW1tZWRpYXRlO1xuXG4gICAgZnVuY3Rpb24gc2V0SW1tZWRpYXRlKGNhbGxiYWNrKSB7XG4gICAgICAvLyBDYWxsYmFjayBjYW4gZWl0aGVyIGJlIGEgZnVuY3Rpb24gb3IgYSBzdHJpbmdcbiAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBjYWxsYmFjayA9IG5ldyBGdW5jdGlvbihcIlwiICsgY2FsbGJhY2spO1xuICAgICAgfVxuICAgICAgLy8gQ29weSBmdW5jdGlvbiBhcmd1bWVudHNcbiAgICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaSArIDFdO1xuICAgICAgfVxuICAgICAgLy8gU3RvcmUgYW5kIHJlZ2lzdGVyIHRoZSB0YXNrXG4gICAgICB2YXIgdGFzayA9IHsgY2FsbGJhY2s6IGNhbGxiYWNrLCBhcmdzOiBhcmdzIH07XG4gICAgICB0YXNrc0J5SGFuZGxlW25leHRIYW5kbGVdID0gdGFzaztcbiAgICAgIHJlZ2lzdGVySW1tZWRpYXRlKG5leHRIYW5kbGUpO1xuICAgICAgcmV0dXJuIG5leHRIYW5kbGUrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjbGVhckltbWVkaWF0ZShoYW5kbGUpIHtcbiAgICAgICAgZGVsZXRlIHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW4odGFzaykge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSB0YXNrLmNhbGxiYWNrO1xuICAgICAgICB2YXIgYXJncyA9IHRhc2suYXJncztcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIGNhbGxiYWNrKGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlKSB7XG4gICAgICAgIC8vIEZyb20gdGhlIHNwZWM6IFwiV2FpdCB1bnRpbCBhbnkgaW52b2NhdGlvbnMgb2YgdGhpcyBhbGdvcml0aG0gc3RhcnRlZCBiZWZvcmUgdGhpcyBvbmUgaGF2ZSBjb21wbGV0ZWQuXCJcbiAgICAgICAgLy8gU28gaWYgd2UncmUgY3VycmVudGx5IHJ1bm5pbmcgYSB0YXNrLCB3ZSdsbCBuZWVkIHRvIGRlbGF5IHRoaXMgaW52b2NhdGlvbi5cbiAgICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmdBVGFzaykge1xuICAgICAgICAgICAgLy8gRGVsYXkgYnkgZG9pbmcgYSBzZXRUaW1lb3V0LiBzZXRJbW1lZGlhdGUgd2FzIHRyaWVkIGluc3RlYWQsIGJ1dCBpbiBGaXJlZm94IDcgaXQgZ2VuZXJhdGVkIGFcbiAgICAgICAgICAgIC8vIFwidG9vIG11Y2ggcmVjdXJzaW9uXCIgZXJyb3IuXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bih0YXNrKTtcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckltbWVkaWF0ZShoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZnVuY3Rpb24gKCkgeyBydW5JZlByZXNlbnQoaGFuZGxlKTsgfSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2FuVXNlUG9zdE1lc3NhZ2UoKSB7XG4gICAgICAgIC8vIFRoZSB0ZXN0IGFnYWluc3QgYGltcG9ydFNjcmlwdHNgIHByZXZlbnRzIHRoaXMgaW1wbGVtZW50YXRpb24gZnJvbSBiZWluZyBpbnN0YWxsZWQgaW5zaWRlIGEgd2ViIHdvcmtlcixcbiAgICAgICAgLy8gd2hlcmUgYGdsb2JhbC5wb3N0TWVzc2FnZWAgbWVhbnMgc29tZXRoaW5nIGNvbXBsZXRlbHkgZGlmZmVyZW50IGFuZCBjYW4ndCBiZSB1c2VkIGZvciB0aGlzIHB1cnBvc2UuXG4gICAgICAgIGlmIChnbG9iYWwucG9zdE1lc3NhZ2UgJiYgIWdsb2JhbC5pbXBvcnRTY3JpcHRzKSB7XG4gICAgICAgICAgICB2YXIgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IHRydWU7XG4gICAgICAgICAgICB2YXIgb2xkT25NZXNzYWdlID0gZ2xvYmFsLm9ubWVzc2FnZTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gZmFsc2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKFwiXCIsIFwiKlwiKTtcbiAgICAgICAgICAgIGdsb2JhbC5vbm1lc3NhZ2UgPSBvbGRPbk1lc3NhZ2U7XG4gICAgICAgICAgICByZXR1cm4gcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICAvLyBJbnN0YWxscyBhbiBldmVudCBoYW5kbGVyIG9uIGBnbG9iYWxgIGZvciB0aGUgYG1lc3NhZ2VgIGV2ZW50OiBzZWVcbiAgICAgICAgLy8gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi9ET00vd2luZG93LnBvc3RNZXNzYWdlXG4gICAgICAgIC8vICogaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvY29tbXMuaHRtbCNjcm9zc0RvY3VtZW50TWVzc2FnZXNcblxuICAgICAgICB2YXIgbWVzc2FnZVByZWZpeCA9IFwic2V0SW1tZWRpYXRlJFwiICsgTWF0aC5yYW5kb20oKSArIFwiJFwiO1xuICAgICAgICB2YXIgb25HbG9iYWxNZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IGdsb2JhbCAmJlxuICAgICAgICAgICAgICAgIHR5cGVvZiBldmVudC5kYXRhID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgICAgICAgZXZlbnQuZGF0YS5pbmRleE9mKG1lc3NhZ2VQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KCtldmVudC5kYXRhLnNsaWNlKG1lc3NhZ2VQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICAgICAgICBnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnbG9iYWwuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgb25HbG9iYWxNZXNzYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UobWVzc2FnZVByZWZpeCArIGhhbmRsZSwgXCIqXCIpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgaGFuZGxlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGh0bWwgPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgPHNjcmlwdD4gZWxlbWVudDsgaXRzIHJlYWR5c3RhdGVjaGFuZ2UgZXZlbnQgd2lsbCBiZSBmaXJlZCBhc3luY2hyb25vdXNseSBvbmNlIGl0IGlzIGluc2VydGVkXG4gICAgICAgICAgICAvLyBpbnRvIHRoZSBkb2N1bWVudC4gRG8gc28sIHRodXMgcXVldWluZyB1cCB0aGUgdGFzay4gUmVtZW1iZXIgdG8gY2xlYW4gdXAgb25jZSBpdCdzIGJlZW4gY2FsbGVkLlxuICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBodG1sLnJlbW92ZUNoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgICAgICAgc2NyaXB0ID0gbnVsbDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBodG1sLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8vIElmIHN1cHBvcnRlZCwgd2Ugc2hvdWxkIGF0dGFjaCB0byB0aGUgcHJvdG90eXBlIG9mIGdsb2JhbCwgc2luY2UgdGhhdCBpcyB3aGVyZSBzZXRUaW1lb3V0IGV0IGFsLiBsaXZlLlxuICAgIHZhciBhdHRhY2hUbyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZiAmJiBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZ2xvYmFsKTtcbiAgICBhdHRhY2hUbyA9IGF0dGFjaFRvICYmIGF0dGFjaFRvLnNldFRpbWVvdXQgPyBhdHRhY2hUbyA6IGdsb2JhbDtcblxuICAgIC8vIERvbid0IGdldCBmb29sZWQgYnkgZS5nLiBicm93c2VyaWZ5IGVudmlyb25tZW50cy5cbiAgICBpZiAoe30udG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiKSB7XG4gICAgICAgIC8vIEZvciBOb2RlLmpzIGJlZm9yZSAwLjlcbiAgICAgICAgaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoY2FuVXNlUG9zdE1lc3NhZ2UoKSkge1xuICAgICAgICAvLyBGb3Igbm9uLUlFMTAgbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxQb3N0TWVzc2FnZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgICAvLyBGb3Igd2ViIHdvcmtlcnMsIHdoZXJlIHN1cHBvcnRlZFxuICAgICAgICBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChkb2MgJiYgXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIiBpbiBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKSkge1xuICAgICAgICAvLyBGb3IgSUUgNuKAkzhcbiAgICAgICAgaW5zdGFsbFJlYWR5U3RhdGVDaGFuZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRm9yIG9sZGVyIGJyb3dzZXJzXG4gICAgICAgIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKTtcbiAgICB9XG5cbiAgICBhdHRhY2hUby5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG4gICAgYXR0YWNoVG8uY2xlYXJJbW1lZGlhdGUgPSBjbGVhckltbWVkaWF0ZTtcbn0odHlwZW9mIHNlbGYgPT09IFwidW5kZWZpbmVkXCIgPyB0eXBlb2YgZ2xvYmFsID09PSBcInVuZGVmaW5lZFwiID8gdGhpcyA6IGdsb2JhbCA6IHNlbGYpKTtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCksIF9fd2VicGFja19yZXF1aXJlX18oMTMpKSlcblxuLyoqKi8gfSksXG4vKiAxMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0pLFxuLyogMTQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBjdXN0b21FdmVudCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xudmFyIGV2ZW50bWFwID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNik7XG52YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xudmFyIGFkZEV2ZW50ID0gYWRkRXZlbnRFYXN5O1xudmFyIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRFYXN5O1xudmFyIGhhcmRDYWNoZSA9IFtdO1xuXG5pZiAoIWdsb2JhbC5hZGRFdmVudExpc3RlbmVyKSB7XG4gIGFkZEV2ZW50ID0gYWRkRXZlbnRIYXJkO1xuICByZW1vdmVFdmVudCA9IHJlbW92ZUV2ZW50SGFyZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkRXZlbnQsXG4gIHJlbW92ZTogcmVtb3ZlRXZlbnQsXG4gIGZhYnJpY2F0ZTogZmFicmljYXRlRXZlbnRcbn07XG5cbmZ1bmN0aW9uIGFkZEV2ZW50RWFzeSAoZWwsIHR5cGUsIGZuLCBjYXB0dXJpbmcpIHtcbiAgcmV0dXJuIGVsLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgZm4sIGNhcHR1cmluZyk7XG59XG5cbmZ1bmN0aW9uIGFkZEV2ZW50SGFyZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBlbC5hdHRhY2hFdmVudCgnb24nICsgdHlwZSwgd3JhcChlbCwgdHlwZSwgZm4pKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGxpc3RlbmVyID0gdW53cmFwKGVsLCB0eXBlLCBmbik7XG4gIGlmIChsaXN0ZW5lcikge1xuICAgIHJldHVybiBlbC5kZXRhY2hFdmVudCgnb24nICsgdHlwZSwgbGlzdGVuZXIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZhYnJpY2F0ZUV2ZW50IChlbCwgdHlwZSwgbW9kZWwpIHtcbiAgdmFyIGUgPSBldmVudG1hcC5pbmRleE9mKHR5cGUpID09PSAtMSA/IG1ha2VDdXN0b21FdmVudCgpIDogbWFrZUNsYXNzaWNFdmVudCgpO1xuICBpZiAoZWwuZGlzcGF0Y2hFdmVudCkge1xuICAgIGVsLmRpc3BhdGNoRXZlbnQoZSk7XG4gIH0gZWxzZSB7XG4gICAgZWwuZmlyZUV2ZW50KCdvbicgKyB0eXBlLCBlKTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ2xhc3NpY0V2ZW50ICgpIHtcbiAgICB2YXIgZTtcbiAgICBpZiAoZG9jLmNyZWF0ZUV2ZW50KSB7XG4gICAgICBlID0gZG9jLmNyZWF0ZUV2ZW50KCdFdmVudCcpO1xuICAgICAgZS5pbml0RXZlbnQodHlwZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgfSBlbHNlIGlmIChkb2MuY3JlYXRlRXZlbnRPYmplY3QpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG4gIH1cbiAgZnVuY3Rpb24gbWFrZUN1c3RvbUV2ZW50ICgpIHtcbiAgICByZXR1cm4gbmV3IGN1c3RvbUV2ZW50KHR5cGUsIHsgZGV0YWlsOiBtb2RlbCB9KTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwcGVyRmFjdG9yeSAoZWwsIHR5cGUsIGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiB3cmFwcGVyIChvcmlnaW5hbEV2ZW50KSB7XG4gICAgdmFyIGUgPSBvcmlnaW5hbEV2ZW50IHx8IGdsb2JhbC5ldmVudDtcbiAgICBlLnRhcmdldCA9IGUudGFyZ2V0IHx8IGUuc3JjRWxlbWVudDtcbiAgICBlLnByZXZlbnREZWZhdWx0ID0gZS5wcmV2ZW50RGVmYXVsdCB8fCBmdW5jdGlvbiBwcmV2ZW50RGVmYXVsdCAoKSB7IGUucmV0dXJuVmFsdWUgPSBmYWxzZTsgfTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbiA9IGUuc3RvcFByb3BhZ2F0aW9uIHx8IGZ1bmN0aW9uIHN0b3BQcm9wYWdhdGlvbiAoKSB7IGUuY2FuY2VsQnViYmxlID0gdHJ1ZTsgfTtcbiAgICBlLndoaWNoID0gZS53aGljaCB8fCBlLmtleUNvZGU7XG4gICAgZm4uY2FsbChlbCwgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHdyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgd3JhcHBlciA9IHVud3JhcChlbCwgdHlwZSwgZm4pIHx8IHdyYXBwZXJGYWN0b3J5KGVsLCB0eXBlLCBmbik7XG4gIGhhcmRDYWNoZS5wdXNoKHtcbiAgICB3cmFwcGVyOiB3cmFwcGVyLFxuICAgIGVsZW1lbnQ6IGVsLFxuICAgIHR5cGU6IHR5cGUsXG4gICAgZm46IGZuXG4gIH0pO1xuICByZXR1cm4gd3JhcHBlcjtcbn1cblxuZnVuY3Rpb24gdW53cmFwIChlbCwgdHlwZSwgZm4pIHtcbiAgdmFyIGkgPSBmaW5kKGVsLCB0eXBlLCBmbik7XG4gIGlmIChpKSB7XG4gICAgdmFyIHdyYXBwZXIgPSBoYXJkQ2FjaGVbaV0ud3JhcHBlcjtcbiAgICBoYXJkQ2FjaGUuc3BsaWNlKGksIDEpOyAvLyBmcmVlIHVwIGEgdGFkIG9mIG1lbW9yeVxuICAgIHJldHVybiB3cmFwcGVyO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZpbmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSwgaXRlbTtcbiAgZm9yIChpID0gMDsgaSA8IGhhcmRDYWNoZS5sZW5ndGg7IGkrKykge1xuICAgIGl0ZW0gPSBoYXJkQ2FjaGVbaV07XG4gICAgaWYgKGl0ZW0uZWxlbWVudCA9PT0gZWwgJiYgaXRlbS50eXBlID09PSB0eXBlICYmIGl0ZW0uZm4gPT09IGZuKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbn1cblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcbnZhciBOYXRpdmVDdXN0b21FdmVudCA9IGdsb2JhbC5DdXN0b21FdmVudDtcblxuZnVuY3Rpb24gdXNlTmF0aXZlICgpIHtcbiAgdHJ5IHtcbiAgICB2YXIgcCA9IG5ldyBOYXRpdmVDdXN0b21FdmVudCgnY2F0JywgeyBkZXRhaWw6IHsgZm9vOiAnYmFyJyB9IH0pO1xuICAgIHJldHVybiAgJ2NhdCcgPT09IHAudHlwZSAmJiAnYmFyJyA9PT0gcC5kZXRhaWwuZm9vO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIENyb3NzLWJyb3dzZXIgYEN1c3RvbUV2ZW50YCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvQ3VzdG9tRXZlbnQuQ3VzdG9tRXZlbnRcbiAqXG4gKiBAcHVibGljXG4gKi9cblxubW9kdWxlLmV4cG9ydHMgPSB1c2VOYXRpdmUoKSA/IE5hdGl2ZUN1c3RvbUV2ZW50IDpcblxuLy8gSUUgPj0gOVxuJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUV2ZW50ID8gZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgfSBlbHNlIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBmYWxzZSwgZmFsc2UsIHZvaWQgMCk7XG4gIH1cbiAgcmV0dXJuIGU7XG59IDpcblxuLy8gSUUgPD0gOFxuZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKHR5cGUsIHBhcmFtcykge1xuICB2YXIgZSA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XG4gIGUudHlwZSA9IHR5cGU7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmJ1YmJsZXMgPSBCb29sZWFuKHBhcmFtcy5idWJibGVzKTtcbiAgICBlLmNhbmNlbGFibGUgPSBCb29sZWFuKHBhcmFtcy5jYW5jZWxhYmxlKTtcbiAgICBlLmRldGFpbCA9IHBhcmFtcy5kZXRhaWw7XG4gIH0gZWxzZSB7XG4gICAgZS5idWJibGVzID0gZmFsc2U7XG4gICAgZS5jYW5jZWxhYmxlID0gZmFsc2U7XG4gICAgZS5kZXRhaWwgPSB2b2lkIDA7XG4gIH1cbiAgcmV0dXJuIGU7XG59XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIGV2ZW50bWFwID0gW107XG52YXIgZXZlbnRuYW1lID0gJyc7XG52YXIgcm9uID0gL15vbi87XG5cbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xuICBpZiAocm9uLnRlc3QoZXZlbnRuYW1lKSkge1xuICAgIGV2ZW50bWFwLnB1c2goZXZlbnRuYW1lLnNsaWNlKDIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxudmFyIGNhY2hlID0ge307XG52YXIgc3RhcnQgPSAnKD86XnxcXFxccyknO1xudmFyIGVuZCA9ICcoPzpcXFxcc3wkKSc7XG5cbmZ1bmN0aW9uIGxvb2t1cENsYXNzIChjbGFzc05hbWUpIHtcbiAgdmFyIGNhY2hlZCA9IGNhY2hlW2NsYXNzTmFtZV07XG4gIGlmIChjYWNoZWQpIHtcbiAgICBjYWNoZWQubGFzdEluZGV4ID0gMDtcbiAgfSBlbHNlIHtcbiAgICBjYWNoZVtjbGFzc05hbWVdID0gY2FjaGVkID0gbmV3IFJlZ0V4cChzdGFydCArIGNsYXNzTmFtZSArIGVuZCwgJ2cnKTtcbiAgfVxuICByZXR1cm4gY2FjaGVkO1xufVxuXG5mdW5jdGlvbiBhZGRDbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICB2YXIgY3VycmVudCA9IGVsLmNsYXNzTmFtZTtcbiAgaWYgKCFjdXJyZW50Lmxlbmd0aCkge1xuICAgIGVsLmNsYXNzTmFtZSA9IGNsYXNzTmFtZTtcbiAgfSBlbHNlIGlmICghbG9va3VwQ2xhc3MoY2xhc3NOYW1lKS50ZXN0KGN1cnJlbnQpKSB7XG4gICAgZWwuY2xhc3NOYW1lICs9ICcgJyArIGNsYXNzTmFtZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBybUNsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKGxvb2t1cENsYXNzKGNsYXNzTmFtZSksICcgJykudHJpbSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRDbGFzcyxcbiAgcm06IHJtQ2xhc3Ncbn07XG5cblxuLyoqKi8gfSksXG4vKiAxOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAocGFyZW50LCBoaWRkZW5JbnB1dCkge1xuXHR2YXIgaGlkZGVuRWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihoaWRkZW5JbnB1dCk7XG5cblx0dmFyIGdldEN1cnJlbnRWYWx1ZSA9IGZ1bmN0aW9uIGdldEN1cnJlbnRWYWx1ZSgpIHtcblx0XHR2YXIgdmFsdWUgPSBoaWRkZW5FbC52YWx1ZTtcblxuXHRcdGlmICh2YWx1ZSkge1xuXHRcdFx0cmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuXHRcdH1cblx0XHRyZXR1cm4gW107XG5cdH07XG5cblx0dmFyIGNoZWNrTGltaXQgPSBmdW5jdGlvbiBjaGVja0xpbWl0KGN1cnJlbnRWYWx1ZSkge1xuXHRcdHZhciBjb3VudCA9IGN1cnJlbnRWYWx1ZS5sZW5ndGg7XG5cdFx0dmFyIGZpZWxkID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXN0b21pemVyLWN1cmF0aW9uLWxpc3QtaW5wdXQnKTtcblx0XHR2YXIgbWF4ID0gZmllbGQuZ2V0QXR0cmlidXRlKCdkYXRhLW1heCcpO1xuXG5cdFx0aWYgKG1heCkge1xuXHRcdFx0aWYgKGNvdW50IDwgcGFyc2VJbnQobWF4LCAxMCkpIHtcblx0XHRcdFx0ZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmllbGQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHR2YXIgYWRkVmFsdWUgPSBmdW5jdGlvbiBhZGRWYWx1ZSh2YWx1ZSkge1xuXHRcdHZhciBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcblxuXHRcdGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRWYWx1ZS5jb25jYXQodmFsdWUpO1xuXHRcdGNoZWNrTGltaXQoY3VycmVudFZhbHVlKTtcblx0XHRyZXR1cm4gY3VycmVudFZhbHVlO1xuXHR9O1xuXG5cdHZhciByZW1vdmVWYWx1ZSA9IGZ1bmN0aW9uIHJlbW92ZVZhbHVlKHZhbHVlLCBvblJlbW92ZSkge1xuXHRcdHZhciBjdXJyZW50VmFsdWUgPSBnZXRDdXJyZW50VmFsdWUoKTtcblxuXHRcdGN1cnJlbnRWYWx1ZSA9IG9uUmVtb3ZlKGN1cnJlbnRWYWx1ZSwgdmFsdWUpO1xuXHRcdGNoZWNrTGltaXQoY3VycmVudFZhbHVlKTtcblx0XHRyZXR1cm4gY3VycmVudFZhbHVlO1xuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0YWRkOiBmdW5jdGlvbiBhZGQodmFsdWUpIHtcblx0XHRcdGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoYWRkVmFsdWUodmFsdWUpKTtcblx0XHR9LFxuXHRcdHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKHZhbHVlLCBvblJlbW92ZSkge1xuXHRcdFx0aGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShyZW1vdmVWYWx1ZSh2YWx1ZSwgb25SZW1vdmUpKTtcblx0XHR9LFxuXHRcdHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlcykge1xuXHRcdFx0aGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeSh2YWx1ZXMpO1xuXHRcdH0sXG5cdFx0ZWw6IGhpZGRlbkVsXG5cdH07XG59O1xuXG4vKioqLyB9KSxcbi8qIDE5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG4vKiBnbG9iYWwgalF1ZXJ5ICovXG52YXIgY2hlY2tMaW1pdCA9IGV4cG9ydHMuY2hlY2tMaW1pdCA9IGZ1bmN0aW9uIGNoZWNrTGltaXQoYXV0b0xpc3QpIHtcblx0dmFyIGNoaWxkcmVuID0gYXV0b0xpc3QucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcblx0dmFyIGZpZWxkID0gYXV0b0xpc3QucXVlcnlTZWxlY3RvcignLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1pbnB1dCcpO1xuXHR2YXIgbWF4ID0gZmllbGQuZ2V0QXR0cmlidXRlKCdkYXRhLW1heCcpO1xuXG5cdGlmIChtYXgpIHtcblx0XHRpZiAoY2hpbGRyZW4ubGVuZ3RoIDwgcGFyc2VJbnQobWF4LCAxMCkpIHtcblx0XHRcdGZpZWxkLnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZmllbGQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuXHRcdH1cblx0fVxufTtcblxudmFyIHJlbW92ZUl0ZW1zID0gZXhwb3J0cy5yZW1vdmVJdGVtcyA9IGZ1bmN0aW9uIHJlbW92ZUl0ZW1zKEhpZGRlbiwgb25SZW1vdmUsIGF1dG9MaXN0KSB7XG5cdHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcblx0XHRIaWRkZW4ucmVtb3ZlKHZhbHVlLCBvblJlbW92ZSk7XG5cdFx0Y2hlY2tMaW1pdChhdXRvTGlzdCk7XG5cdFx0alF1ZXJ5KEhpZGRlbi5lbCkudHJpZ2dlcignY2hhbmdlJyk7XG5cdH07XG59O1xuXG52YXIgZHJhZ0l0ZW1zID0gZXhwb3J0cy5kcmFnSXRlbXMgPSBmdW5jdGlvbiBkcmFnSXRlbXMoSGlkZGVuLCBvbkRyYWcpIHtcblx0cmV0dXJuIGZ1bmN0aW9uIChsaXN0LCBsaXN0SXRlbXMpIHtcblx0XHR2YXIgdmFsdWVzID0gb25EcmFnKGxpc3QsIGxpc3RJdGVtcyk7XG5cblx0XHRIaWRkZW4udXBkYXRlKHZhbHVlcyk7XG5cdFx0alF1ZXJ5KEhpZGRlbi5lbCkudHJpZ2dlcignY2hhbmdlJyk7XG5cdH07XG59O1xuXG52YXIgb25EcmFnT2JqZWN0ID0gZXhwb3J0cy5vbkRyYWdPYmplY3QgPSBmdW5jdGlvbiBvbkRyYWdPYmplY3QobGlzdCwgbGlzdEl0ZW1zKSB7XG5cdHJldHVybiBbXS5yZWR1Y2UuY2FsbChsaXN0SXRlbXMsIGZ1bmN0aW9uIChhY2MsIGxpc3RJdGVtKSB7XG5cdFx0dmFyIHZhbHVlID0ge1xuXHRcdFx0aWQ6IGxpc3RJdGVtLmRhdGFzZXQuaWQsXG5cdFx0XHR0aXRsZTogbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTFxuXHRcdH07XG5cblx0XHRyZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcblx0fSwgW10pO1xufTtcblxudmFyIG9uRHJhZ1RleHQgPSBleHBvcnRzLm9uRHJhZ1RleHQgPSBmdW5jdGlvbiBvbkRyYWdUZXh0KGxpc3QsIGxpc3RJdGVtcykge1xuXHRyZXR1cm4gW10ucmVkdWNlLmNhbGwobGlzdEl0ZW1zLCBmdW5jdGlvbiAoYWNjLCBsaXN0SXRlbSkge1xuXHRcdHZhciB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKS5pbm5lckhUTUw7XG5cblx0XHRyZXR1cm4gYWNjLmNvbmNhdChbdmFsdWVdKTtcblx0fSwgW10pO1xufTtcblxudmFyIG9uUmVtb3ZlT2JqZWN0ID0gZXhwb3J0cy5vblJlbW92ZU9iamVjdCA9IGZ1bmN0aW9uIG9uUmVtb3ZlT2JqZWN0KGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcblx0cmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcblx0XHRyZXR1cm4gY3VycmVudC50aXRsZSAhPT0gbmV3VmFsdWU7XG5cdH0pO1xufTtcblxudmFyIG9uUmVtb3ZlVGV4dCA9IGV4cG9ydHMub25SZW1vdmVUZXh0ID0gZnVuY3Rpb24gb25SZW1vdmVUZXh0KGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUpIHtcblx0cmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoZnVuY3Rpb24gKGN1cnJlbnQpIHtcblx0XHRyZXR1cm4gY3VycmVudCAhPT0gbmV3VmFsdWU7XG5cdH0pO1xufTtcblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBmdW5jdGlvbiAoYXJncykge1xuXHR2YXIgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhcmdzLnBhcmVudCk7XG5cblx0aWYgKCFmaWVsZHMpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRbXS5mb3JFYWNoLmNhbGwoZmllbGRzLCBmdW5jdGlvbiAoYXV0b0l0ZW0pIHtcblx0XHR2YXIgaGlkZGVuID0gYXV0b0l0ZW0ucXVlcnlTZWxlY3RvcihhcmdzLmhpZGRlbik7XG5cdFx0dmFyIGxvY2FsaXplZEtleSA9ICdDdXJhdGlvbl8nICsgYXV0b0l0ZW0uZGF0YXNldC5pZDtcblx0XHR2YXIgZW5kcG9pbnQgPSB3aW5kb3dbbG9jYWxpemVkS2V5XS5iYXNlVVJMICsgJy93cC1qc29uL3dwL3YyLycgKyB3aW5kb3dbbG9jYWxpemVkS2V5XS5yZXNvdXJjZSArICc/c2VhcmNoPSc7XG5cblx0XHQoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKGFyZ3MuaW5wdXQpLCBlbmRwb2ludCwgZnVuY3Rpb24gKHZhbHVlLCBpbnB1dCkge1xuXHRcdFx0aGlkZGVuLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHRcdFx0alF1ZXJ5KGhpZGRlbikudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0aGlkZGVuLnZhbHVlID0gJyc7XG5cdFx0XHRqUXVlcnkoaGlkZGVuKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0XHR9KTtcblx0fSk7XG59O1xuXG52YXIgX2F1dG9zdWdnZXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF9hdXRvc3VnZ2VzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9hdXRvc3VnZ2VzdCk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gaW5kZXguYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3QvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgNzZmYWQ0ZGQwNTRiOTRkY2ZlZjUiLCJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiY29uc3QgaXNKU09OID0gKCBzdHIgKSA9PiB7XG5cblx0aWYgKCB0eXBlb2YgKCBzdHIgKSAhPT0gJ3N0cmluZycgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHRyeSB7XG5cdFx0SlNPTi5wYXJzZSggc3RyICk7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufTtcblxuY29uc3QgYnVpbGRRdWVyeSA9ICggdmFsdWUgKSA9PiB7XG5cdHJldHVybiBlbmNvZGVVUklDb21wb25lbnQoIHZhbHVlLnRvTG93ZXJDYXNlKCkgKTtcbn07XG5cbmNvbnN0IG9uQXV0b1N1Z2dlc3RJbnB1dCA9ICggZSApID0+IHtcblx0Y29uc3QgaW5wdXQgPSBlLnRhcmdldDtcblx0Y29uc3QgaW5wdXRWYWx1ZSA9IGlucHV0LnZhbHVlO1xuXHRjb25zdCBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSggJ2xpc3QnICk7XG5cdGNvbnN0IGxpc3RPcHRpb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGxpc3ROYW1lICkuY2hpbGROb2RlcztcblxuXHRjb25zdCBtYXRjaCA9IFtdLnJlZHVjZS5jYWxsKCBsaXN0T3B0aW9ucywgKCBhY2MsIG9wdGlvbiApID0+IHtcblx0XHRpZiAoIG9wdGlvbi52YWx1ZSA9PT0gaW5wdXRWYWx1ZSApIHtcblx0XHRcdHJldHVybiBhY2MuY29uY2F0KCB7XG5cdFx0XHRcdGlkOiBvcHRpb24uZGF0YXNldC5pZCxcblx0XHRcdFx0dGl0bGU6IG9wdGlvbi52YWx1ZVxuXHRcdFx0fSApIDtcblx0XHR9XG5cdFx0cmV0dXJuIGFjYztcblx0fSwgW10gKTtcblxuXHRyZXR1cm4gKCBtYXRjaC5sZW5ndGggPT09IDAgKSA/IGZhbHNlIDogbWF0Y2hbMF07XG59O1xuXG5jb25zdCBnZXRPcHRpb25zID0gKCB4aHIsIGNhbGxiYWNrLCBpbnB1dCwgZW5kcG9pbnQgKSA9PiB7XG5cdGNvbnN0IHF1ZXJ5ID0gYnVpbGRRdWVyeSggaW5wdXQudmFsdWUgKTtcblx0Y29uc3QgdXJsID0gZW5kcG9pbnQgKyBxdWVyeTtcblxuXHRpZiAoIHhociApIHtcblx0XHR4aHIuYWJvcnQoKTtcblx0fVxuXG5cdHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdHhoci5hZGRFdmVudExpc3RlbmVyKCAnbG9hZCcsICggZXZ0ICkgPT4ge1xuXHRcdGNhbGxiYWNrKCBmYWxzZSwgZXZ0ICk7XG5cdH0sIGZhbHNlICk7XG5cblx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoIHhoci5yZWFkeVN0YXRlID09PSBYTUxIdHRwUmVxdWVzdC5ET05FICYmIHhoci5zdGF0dXMgPT09IDIwMCApIHtcblx0XHRcdGNhbGxiYWNrKCBmYWxzZSwgeyByZXN1bHRzOiBKU09OLnBhcnNlKCB4aHIucmVzcG9uc2VUZXh0ICksIGlucHV0OiBpbnB1dCB9ICk7XG5cdFx0fSBlbHNlIGlmICggeGhyLnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUgJiYgeGhyLnN0YXR1cyA+PSA0MDAgKSB7XG5cdFx0XHRpZiAoIHhoci5yZXNwb25zZVRleHQgJiYgaXNKU09OKCB4aHIucmVzcG9uc2VUZXh0ICkgKSB7XG5cdFx0XHRcdGNhbGxiYWNrKCB7IG1lc3NhZ2U6IEpTT04ucGFyc2UoIHhoci5yZXNwb25zZVRleHQgKSwgaW5wdXQ6IGlucHV0IH0sIGZhbHNlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHhoci5hZGRFdmVudExpc3RlbmVyKCAnZXJyb3InLCAoIGV2dCApID0+IHtcblx0XHRjYWxsYmFjayggZXZ0LCBmYWxzZSApO1xuXHR9LCBmYWxzZSApO1xuXG5cdHhoci5hZGRFdmVudExpc3RlbmVyKCAnYWJvcnQnLCAoIGV2dCApID0+IHtcblx0XHRjYWxsYmFjayggdHJ1ZSwgZmFsc2UgKTtcblx0fSwgZmFsc2UgKTtcblxuXHR4aHIub3BlbiggJ0dFVCcsIHVybCwgdHJ1ZSApO1xuXG5cdHhoci5zZW5kKCk7XG5cblx0cmV0dXJuIHhocjtcbn07XG5cbmNvbnN0IGNyZWF0ZU9wdGlvbiA9ICggdmFsdWUgKSA9PiB7XG5cdHJldHVybiBgPG9wdGlvbiBkYXRhLWlkPSR7dmFsdWUuaWR9IHZhbHVlPVwiJHt2YWx1ZS50aXRsZS5yZW5kZXJlZH1cIj5gO1xufTtcblxuY29uc3QgY3JlYXRlT3B0aW9ucyA9ICggcmVzdWx0cywgaW5wdXQgKSA9PiB7XG5cdGNvbnN0IGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCAnbGlzdCcgKTtcblx0Y29uc3QgZGF0YWxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbGlzdE5hbWUgKTtcblxuXHRjb25zdCBuZXdPcHRpb25zID0gcmVzdWx0cy5yZWR1Y2UoICggYWNjLCByZXN1bHQgKSA9PiB7XG5cdFx0Y29uc3Qgb3B0aW9uID0gY3JlYXRlT3B0aW9uKCByZXN1bHQgKTtcblxuXHRcdHJldHVybiBhY2MuY29uY2F0KCBvcHRpb24gKTtcblx0fSwgJycgKTtcblxuXHRpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCAnc2hvdycgKTtcblx0ZGF0YWxpc3QuaW5uZXJIVE1MID0gbmV3T3B0aW9ucztcbn07XG5cbmNvbnN0IHVwZGF0ZU9wdGlvbnMgPSAoIGVycm9yLCByZXNwb25zZSApID0+IHtcblx0aWYgKCBlcnJvciApIHtcblxuXHRcdGlmICggZXJyb3IgPT09IHRydWUgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0ZXJyb3IuaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSggJ3Nob3cnICk7XG5cdFx0Y29uc29sZS53YXJuKCBlcnJvciApO1xuXHR9XG5cblx0aWYgKCByZXNwb25zZSApIHtcblx0XHRpZiAoICEgQXJyYXkuaXNBcnJheSggcmVzcG9uc2UucmVzdWx0cyApICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGNyZWF0ZU9wdGlvbnMoIHJlc3BvbnNlLnJlc3VsdHMsIHJlc3BvbnNlLmlucHV0ICk7XG5cdH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICggYXV0b3N1Z2dlc3QsIGVuZHBvaW50LCBvblNlbGVjdCwgb25FbXB0eSApIHtcblxuXHRpZiAoICEgYXV0b3N1Z2dlc3QgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0bGV0IHhociA9IGZhbHNlO1xuXG5cdGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoICdrZXl1cCcsICggZSApID0+IHtcblx0XHRpZiAoIGUudGFyZ2V0LnZhbHVlLmxlbmd0aCA9PT0gMCAmJiBvbkVtcHR5ICkge1xuXHRcdFx0b25FbXB0eSgpO1xuXHRcdH1cblxuXHRcdGlmICggZS50YXJnZXQudmFsdWUubGVuZ3RoIDwgMyApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRhdXRvc3VnZ2VzdC5jbGFzc0xpc3QuYWRkKCAnc2hvdycgKTtcblx0XHR4aHIgPSBnZXRPcHRpb25zKCB4aHIsIHVwZGF0ZU9wdGlvbnMsIGF1dG9zdWdnZXN0LCBlbmRwb2ludCApO1xuXG5cdH0gKTtcblx0YXV0b3N1Z2dlc3QuYWRkRXZlbnRMaXN0ZW5lciggJ2lucHV0JywgKCBlICkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlID0gb25BdXRvU3VnZ2VzdElucHV0KCBlICk7XG5cblx0XHRpZiAoIHZhbHVlICkge1xuXHRcdFx0b25TZWxlY3QoIHZhbHVlLCBhdXRvc3VnZ2VzdCApO1xuXHRcdH1cblx0fSApO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0b3N1Z2dlc3QuanMiLCIvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzSWdub3JlUGF0dGVyblwiOiBcImJhc2VDc3NcIiB9XSAqL1xuXG5pbXBvcnQgYmFzZUNzcyBmcm9tICcuLi9jc3MvaW5kZXguY3NzJztcbmltcG9ydCBhdXRvTGlzdCBmcm9tICcuL2F1dG9zdWdnZXN0LWxpc3QnO1xuaW1wb3J0IGF1dG9JdGVtIGZyb20gJy4vYXV0by1pdGVtJztcblxuY29uc3QgY3JlYXRlQXV0b1N1Z2dlc3RJdGVtID0gKCB2YWx1ZSApID0+IHtcblx0cmV0dXJuIGA8bGkgY2xhc3M9XCJ0ZXh0LWxpc3QtaXRlbVwiIGRhdGEtaWQ9XCIke3ZhbHVlLmlkfVwiPlxuICAgICAgICA8c3Bhbj4ke3ZhbHVlLnRpdGxlfTwvc3Bhbj5cbiAgICAgICAgPHN2ZyB2aWV3Qm94PVwiMCAwIDIwIDIwXCI+XG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LThcblx0XHRcdDgtOHpNMTUgMTNsLTMtMyAzLTMtMi0yLTMgMy0zLTMtMiAyIDMgMy0zIDMgMiAyIDMtMyAzIDN6XCI+PC9wYXRoPlxuICAgICAgICA8L3N2Zz5cbiAgICA8L2xpPmA7XG59O1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAnRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcblx0YXV0b0xpc3QoIHtcblx0XHRwYXJlbnQ6ICcuY3VzdG9taXplci1jdXJhdGlvbi1saXN0Jyxcblx0XHRpbnB1dDogJy5jdXN0b21pemVyLWN1cmF0aW9uLWxpc3QtaW5wdXQnLFxuXHRcdGxpc3Q6ICcuY3VzdG9taXplci1jdXJhdGlvbi1saXN0LWxpc3QnLFxuXHRcdGhpZGRlbjogJy5jdXN0b21pemVyLWN1cmF0aW9uLWxpc3QtaGlkZGVuJyxcblx0XHRsaXN0VGVtcGxhdGU6IGNyZWF0ZUF1dG9TdWdnZXN0SXRlbVxuXHR9ICk7XG5cblx0YXV0b0l0ZW0oIHtcblx0XHRwYXJlbnQ6ICcuY3VzdG9taXplci1jdXJhdGlvbicsXG5cdFx0aW5wdXQ6ICcuY3VzdG9taXplci1jdXJhdGlvbi1pbnB1dCcsXG5cdFx0aGlkZGVuOiAnLmN1c3RvbWl6ZXItY3VyYXRpb24taGlkZGVuJ1xuXHR9ICk7XG59ICk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9pbmRleC5qcyIsIi8qIGdsb2JhbCBqUXVlcnkgKi9cblxuaW1wb3J0IGxpc3QgZnJvbSAnLi9saXN0JztcbmltcG9ydCBhdXRvU3VnZ2VzdCBmcm9tICcuL2F1dG9zdWdnZXN0JztcbmltcG9ydCBoaWRkZW4gZnJvbSAnLi9zZXJpYWxpemVkLWlucHV0JztcbmltcG9ydCB7IHJlbW92ZUl0ZW1zLCBkcmFnSXRlbXMsIG9uRHJhZ09iamVjdCwgb25SZW1vdmVPYmplY3QsIGNoZWNrTGltaXQgfSBmcm9tICcuL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICggYXJncyApIHtcblx0Y29uc3QgZmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggYXJncy5wYXJlbnQgKTtcblxuXHRpZiAoICEgZmllbGRzICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdFtdLmZvckVhY2guY2FsbCggZmllbGRzLCAoIGF1dG9MaXN0ICkgPT4ge1xuXHRcdGNvbnN0IEhpZGRlbiA9IGhpZGRlbiggYXV0b0xpc3QsIGFyZ3MuaGlkZGVuICk7XG5cdFx0Y29uc3QgaGlkZGVuRWwgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCBhcmdzLmhpZGRlbiApO1xuXHRcdGNvbnN0IHJlbW92ZSA9IHJlbW92ZUl0ZW1zKCBIaWRkZW4sIG9uUmVtb3ZlT2JqZWN0LCBhdXRvTGlzdCApO1xuXHRcdGNvbnN0IGRyYWcgPSBkcmFnSXRlbXMoIEhpZGRlbiwgb25EcmFnT2JqZWN0ICk7XG5cdFx0Y29uc3QgTGlzdCA9IGxpc3QoIGF1dG9MaXN0LCBPYmplY3QuYXNzaWduKCBhcmdzLCB7IG9uRHJhZzogZHJhZywgb25SZW1vdmU6IHJlbW92ZX0gKSApO1xuXHRcdGNvbnN0IGxvY2FsaXplZEtleSA9IGBDdXJhdGlvbl8ke2F1dG9MaXN0LmRhdGFzZXQuaWR9YDtcblx0XHRjb25zdCBlbmRwb2ludCA9IGAke3dpbmRvd1tsb2NhbGl6ZWRLZXldLmJhc2VVUkx9L3dwLWpzb24vd3AvdjIvJHt3aW5kb3dbbG9jYWxpemVkS2V5XS5yZXNvdXJjZX0/c2VhcmNoPWA7XG5cblx0XHRhdXRvU3VnZ2VzdCggYXV0b0xpc3QucXVlcnlTZWxlY3RvciggYXJncy5pbnB1dCApLCBlbmRwb2ludCwgKCB2YWx1ZSwgaW5wdXQgKSA9PiB7XG5cdFx0XHRMaXN0LmFkZCggdmFsdWUgKTtcblx0XHRcdGlucHV0LnZhbHVlID0gJyc7XG5cdFx0XHRIaWRkZW4uYWRkKCB2YWx1ZSApO1xuXHRcdFx0Y2hlY2tMaW1pdCggYXV0b0xpc3QgKTtcblx0XHRcdGpRdWVyeSggaGlkZGVuRWwgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdH0gKTtcblx0fSApO1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vYXV0b3N1Z2dlc3QtbGlzdC5qcyIsImltcG9ydCBkcmFndWxhIGZyb20gJ2RyYWd1bGEnO1xuXG5jb25zdCByZWdpc3RlclJlbW92ZUV2ZW50cyA9ICggbGlzdCwgb25SZW1vdmUgKSA9PiB7XG5cdGNvbnN0IGxpc3RJdGVtcyA9IGxpc3QucXVlcnlTZWxlY3RvckFsbCggJ2xpJyApO1xuXG5cdGxpc3QuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgKCBlICkgPT4ge1xuXHRcdGNvbnN0IHRhcmdldCA9ICggZS50YXJnZXQudGFnTmFtZSA9PT0gJ3N2ZycgKSA/IGUudGFyZ2V0IDogZS50YXJnZXQuY2xvc2VzdCggJ3N2ZycgKTtcblxuXHRcdGlmICggdGFyZ2V0LnRhZ05hbWUgPT09ICdzdmcnICkge1xuXHRcdFx0Y29uc3QgbGlzdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCAnbGknICk7XG5cdFx0XHRjb25zdCB2YWx1ZSA9IGxpc3RJdGVtLnF1ZXJ5U2VsZWN0b3IoICdzcGFuJyApLmlubmVySFRNTDtcblxuXHRcdFx0bGlzdC5yZW1vdmVDaGlsZCggbGlzdEl0ZW0gKTtcblx0XHRcdG9uUmVtb3ZlKCB2YWx1ZSApO1xuXHRcdH1cblx0fSApO1xuXG5cdHJldHVybiBsaXN0SXRlbXM7XG59O1xuXG5jb25zdCByZWdpc3RlckRyYWdFdmVudHMgPSAoIGxpc3QsIGNhbGxiYWNrICkgPT4ge1xuXHRjb25zdCBkcmFrZSA9IGRyYWd1bGEoIFtsaXN0XSApO1xuXG5cdGRyYWtlLm9uKCAnZHJhZ2VuZCcsICggZWwgKSA9PiB7XG5cdFx0Y29uc3QgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCAnbGknICk7XG5cblx0XHRjYWxsYmFjayggbGlzdCwgbGlzdEl0ZW1zICk7XG5cdH0gKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICggcGFyZW50LCBhcmdzICkge1xuXHRjb25zdCBsaXN0ID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoIGFyZ3MubGlzdCApO1xuXG5cdHJlZ2lzdGVyRHJhZ0V2ZW50cyggbGlzdCwgYXJncy5vbkRyYWcgKTtcblx0cmVnaXN0ZXJSZW1vdmVFdmVudHMoIGxpc3QsIGFyZ3Mub25SZW1vdmUgKTtcblxuXHRyZXR1cm4ge1xuXHRcdGFkZDogZnVuY3Rpb24gKCB2YWx1ZSApIHtcblx0XHRcdGNvbnN0IGh0bWwgPSBhcmdzLmxpc3RUZW1wbGF0ZSggdmFsdWUgKTtcblx0XHRcdGNvbnN0IGxpc3RJdGVtID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoIGh0bWwgKTtcblxuXHRcdFx0bGlzdC5hcHBlbmRDaGlsZCggbGlzdEl0ZW0gKTtcblx0XHR9XG5cdH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9saXN0LmpzIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1pdHRlciA9IHJlcXVpcmUoJ2NvbnRyYS9lbWl0dGVyJyk7XG52YXIgY3Jvc3N2ZW50ID0gcmVxdWlyZSgnY3Jvc3N2ZW50Jyk7XG52YXIgY2xhc3NlcyA9IHJlcXVpcmUoJy4vY2xhc3NlcycpO1xudmFyIGRvYyA9IGRvY3VtZW50O1xudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbmZ1bmN0aW9uIGRyYWd1bGEgKGluaXRpYWxDb250YWluZXJzLCBvcHRpb25zKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICBpZiAobGVuID09PSAxICYmIEFycmF5LmlzQXJyYXkoaW5pdGlhbENvbnRhaW5lcnMpID09PSBmYWxzZSkge1xuICAgIG9wdGlvbnMgPSBpbml0aWFsQ29udGFpbmVycztcbiAgICBpbml0aWFsQ29udGFpbmVycyA9IFtdO1xuICB9XG4gIHZhciBfbWlycm9yOyAvLyBtaXJyb3IgaW1hZ2VcbiAgdmFyIF9zb3VyY2U7IC8vIHNvdXJjZSBjb250YWluZXJcbiAgdmFyIF9pdGVtOyAvLyBpdGVtIGJlaW5nIGRyYWdnZWRcbiAgdmFyIF9vZmZzZXRYOyAvLyByZWZlcmVuY2UgeFxuICB2YXIgX29mZnNldFk7IC8vIHJlZmVyZW5jZSB5XG4gIHZhciBfbW92ZVg7IC8vIHJlZmVyZW5jZSBtb3ZlIHhcbiAgdmFyIF9tb3ZlWTsgLy8gcmVmZXJlbmNlIG1vdmUgeVxuICB2YXIgX2luaXRpYWxTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyB3aGVuIGdyYWJiZWRcbiAgdmFyIF9jdXJyZW50U2libGluZzsgLy8gcmVmZXJlbmNlIHNpYmxpbmcgbm93XG4gIHZhciBfY29weTsgLy8gaXRlbSB1c2VkIGZvciBjb3B5aW5nXG4gIHZhciBfcmVuZGVyVGltZXI7IC8vIHRpbWVyIGZvciBzZXRUaW1lb3V0IHJlbmRlck1pcnJvckltYWdlXG4gIHZhciBfbGFzdERyb3BUYXJnZXQgPSBudWxsOyAvLyBsYXN0IGNvbnRhaW5lciBpdGVtIHdhcyBvdmVyXG4gIHZhciBfZ3JhYmJlZDsgLy8gaG9sZHMgbW91c2Vkb3duIGNvbnRleHQgdW50aWwgZmlyc3QgbW91c2Vtb3ZlXG5cbiAgdmFyIG8gPSBvcHRpb25zIHx8IHt9O1xuICBpZiAoby5tb3ZlcyA9PT0gdm9pZCAwKSB7IG8ubW92ZXMgPSBhbHdheXM7IH1cbiAgaWYgKG8uYWNjZXB0cyA9PT0gdm9pZCAwKSB7IG8uYWNjZXB0cyA9IGFsd2F5czsgfVxuICBpZiAoby5pbnZhbGlkID09PSB2b2lkIDApIHsgby5pbnZhbGlkID0gaW52YWxpZFRhcmdldDsgfVxuICBpZiAoby5jb250YWluZXJzID09PSB2b2lkIDApIHsgby5jb250YWluZXJzID0gaW5pdGlhbENvbnRhaW5lcnMgfHwgW107IH1cbiAgaWYgKG8uaXNDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLmlzQ29udGFpbmVyID0gbmV2ZXI7IH1cbiAgaWYgKG8uY29weSA9PT0gdm9pZCAwKSB7IG8uY29weSA9IGZhbHNlOyB9XG4gIGlmIChvLmNvcHlTb3J0U291cmNlID09PSB2b2lkIDApIHsgby5jb3B5U29ydFNvdXJjZSA9IGZhbHNlOyB9XG4gIGlmIChvLnJldmVydE9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJldmVydE9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5yZW1vdmVPblNwaWxsID09PSB2b2lkIDApIHsgby5yZW1vdmVPblNwaWxsID0gZmFsc2U7IH1cbiAgaWYgKG8uZGlyZWN0aW9uID09PSB2b2lkIDApIHsgby5kaXJlY3Rpb24gPSAndmVydGljYWwnOyB9XG4gIGlmIChvLmlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiA9PT0gdm9pZCAwKSB7IG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID0gdHJ1ZTsgfVxuICBpZiAoby5taXJyb3JDb250YWluZXIgPT09IHZvaWQgMCkgeyBvLm1pcnJvckNvbnRhaW5lciA9IGRvYy5ib2R5OyB9XG5cbiAgdmFyIGRyYWtlID0gZW1pdHRlcih7XG4gICAgY29udGFpbmVyczogby5jb250YWluZXJzLFxuICAgIHN0YXJ0OiBtYW51YWxTdGFydCxcbiAgICBlbmQ6IGVuZCxcbiAgICBjYW5jZWw6IGNhbmNlbCxcbiAgICByZW1vdmU6IHJlbW92ZSxcbiAgICBkZXN0cm95OiBkZXN0cm95LFxuICAgIGNhbk1vdmU6IGNhbk1vdmUsXG4gICAgZHJhZ2dpbmc6IGZhbHNlXG4gIH0pO1xuXG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHRydWUpIHtcbiAgICBkcmFrZS5vbignb3ZlcicsIHNwaWxsT3Zlcikub24oJ291dCcsIHNwaWxsT3V0KTtcbiAgfVxuXG4gIGV2ZW50cygpO1xuXG4gIHJldHVybiBkcmFrZTtcblxuICBmdW5jdGlvbiBpc0NvbnRhaW5lciAoZWwpIHtcbiAgICByZXR1cm4gZHJha2UuY29udGFpbmVycy5pbmRleE9mKGVsKSAhPT0gLTEgfHwgby5pc0NvbnRhaW5lcihlbCk7XG4gIH1cblxuICBmdW5jdGlvbiBldmVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZWRvd24nLCBncmFiKTtcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNldXAnLCByZWxlYXNlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50dWFsTW92ZW1lbnRzIChyZW1vdmUpIHtcbiAgICB2YXIgb3AgPSByZW1vdmUgPyAncmVtb3ZlJyA6ICdhZGQnO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2Vtb3ZlJywgc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCk7XG4gIH1cblxuICBmdW5jdGlvbiBtb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdzZWxlY3RzdGFydCcsIHByZXZlbnRHcmFiYmVkKTsgLy8gSUU4XG4gICAgY3Jvc3N2ZW50W29wXShkb2N1bWVudEVsZW1lbnQsICdjbGljaycsIHByZXZlbnRHcmFiYmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlc3Ryb3kgKCkge1xuICAgIGV2ZW50cyh0cnVlKTtcbiAgICByZWxlYXNlKHt9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHByZXZlbnRHcmFiYmVkIChlKSB7XG4gICAgaWYgKF9ncmFiYmVkKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ3JhYiAoZSkge1xuICAgIF9tb3ZlWCA9IGUuY2xpZW50WDtcbiAgICBfbW92ZVkgPSBlLmNsaWVudFk7XG5cbiAgICB2YXIgaWdub3JlID0gd2hpY2hNb3VzZUJ1dHRvbihlKSAhPT0gMSB8fCBlLm1ldGFLZXkgfHwgZS5jdHJsS2V5O1xuICAgIGlmIChpZ25vcmUpIHtcbiAgICAgIHJldHVybjsgLy8gd2Ugb25seSBjYXJlIGFib3V0IGhvbmVzdC10by1nb2QgbGVmdCBjbGlja3MgYW5kIHRvdWNoIGV2ZW50c1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IGUudGFyZ2V0O1xuICAgIHZhciBjb250ZXh0ID0gY2FuU3RhcnQoaXRlbSk7XG4gICAgaWYgKCFjb250ZXh0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIF9ncmFiYmVkID0gY29udGV4dDtcbiAgICBldmVudHVhbE1vdmVtZW50cygpO1xuICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nKSB7XG4gICAgICBpZiAoaXNJbnB1dChpdGVtKSkgeyAvLyBzZWUgYWxzbzogaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzIwOFxuICAgICAgICBpdGVtLmZvY3VzKCk7IC8vIGZpeGVzIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8xNzZcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE1NVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQgKGUpIHtcbiAgICBpZiAoIV9ncmFiYmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh3aGljaE1vdXNlQnV0dG9uKGUpID09PSAwKSB7XG4gICAgICByZWxlYXNlKHt9KTtcbiAgICAgIHJldHVybjsgLy8gd2hlbiB0ZXh0IGlzIHNlbGVjdGVkIG9uIGFuIGlucHV0IGFuZCB0aGVuIGRyYWdnZWQsIG1vdXNldXAgZG9lc24ndCBmaXJlLiB0aGlzIGlzIG91ciBvbmx5IGhvcGVcbiAgICB9XG4gICAgLy8gdHJ1dGh5IGNoZWNrIGZpeGVzICMyMzksIGVxdWFsaXR5IGZpeGVzICMyMDdcbiAgICBpZiAoZS5jbGllbnRYICE9PSB2b2lkIDAgJiYgZS5jbGllbnRYID09PSBfbW92ZVggJiYgZS5jbGllbnRZICE9PSB2b2lkIDAgJiYgZS5jbGllbnRZID09PSBfbW92ZVkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uKSB7XG4gICAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgICB2YXIgZWxlbWVudEJlaGluZEN1cnNvciA9IGRvYy5lbGVtZW50RnJvbVBvaW50KGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgaWYgKGlzSW5wdXQoZWxlbWVudEJlaGluZEN1cnNvcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBncmFiYmVkID0gX2dyYWJiZWQ7IC8vIGNhbGwgdG8gZW5kKCkgdW5zZXRzIF9ncmFiYmVkXG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKCk7XG4gICAgZW5kKCk7XG4gICAgc3RhcnQoZ3JhYmJlZCk7XG5cbiAgICB2YXIgb2Zmc2V0ID0gZ2V0T2Zmc2V0KF9pdGVtKTtcbiAgICBfb2Zmc2V0WCA9IGdldENvb3JkKCdwYWdlWCcsIGUpIC0gb2Zmc2V0LmxlZnQ7XG4gICAgX29mZnNldFkgPSBnZXRDb29yZCgncGFnZVknLCBlKSAtIG9mZnNldC50b3A7XG5cbiAgICBjbGFzc2VzLmFkZChfY29weSB8fCBfaXRlbSwgJ2d1LXRyYW5zaXQnKTtcbiAgICByZW5kZXJNaXJyb3JJbWFnZSgpO1xuICAgIGRyYWcoZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5TdGFydCAoaXRlbSkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZyAmJiBfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpc0NvbnRhaW5lcihpdGVtKSkge1xuICAgICAgcmV0dXJuOyAvLyBkb24ndCBkcmFnIGNvbnRhaW5lciBpdHNlbGZcbiAgICB9XG4gICAgdmFyIGhhbmRsZSA9IGl0ZW07XG4gICAgd2hpbGUgKGdldFBhcmVudChpdGVtKSAmJiBpc0NvbnRhaW5lcihnZXRQYXJlbnQoaXRlbSkpID09PSBmYWxzZSkge1xuICAgICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGl0ZW0gPSBnZXRQYXJlbnQoaXRlbSk7IC8vIGRyYWcgdGFyZ2V0IHNob3VsZCBiZSBhIHRvcCBlbGVtZW50XG4gICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgc291cmNlID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmICghc291cmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvLmludmFsaWQoaXRlbSwgaGFuZGxlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBtb3ZhYmxlID0gby5tb3ZlcyhpdGVtLCBzb3VyY2UsIGhhbmRsZSwgbmV4dEVsKGl0ZW0pKTtcbiAgICBpZiAoIW1vdmFibGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXRlbTogaXRlbSxcbiAgICAgIHNvdXJjZTogc291cmNlXG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk1vdmUgKGl0ZW0pIHtcbiAgICByZXR1cm4gISFjYW5TdGFydChpdGVtKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hbnVhbFN0YXJ0IChpdGVtKSB7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoY29udGV4dCkge1xuICAgICAgc3RhcnQoY29udGV4dCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnQgKGNvbnRleHQpIHtcbiAgICBpZiAoaXNDb3B5KGNvbnRleHQuaXRlbSwgY29udGV4dC5zb3VyY2UpKSB7XG4gICAgICBfY29weSA9IGNvbnRleHQuaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfY29weSwgY29udGV4dC5pdGVtLCAnY29weScpO1xuICAgIH1cblxuICAgIF9zb3VyY2UgPSBjb250ZXh0LnNvdXJjZTtcbiAgICBfaXRlbSA9IGNvbnRleHQuaXRlbTtcbiAgICBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBuZXh0RWwoY29udGV4dC5pdGVtKTtcblxuICAgIGRyYWtlLmRyYWdnaW5nID0gdHJ1ZTtcbiAgICBkcmFrZS5lbWl0KCdkcmFnJywgX2l0ZW0sIF9zb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52YWxpZFRhcmdldCAoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZnVuY3Rpb24gZW5kICgpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgZHJvcChpdGVtLCBnZXRQYXJlbnQoaXRlbSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdW5ncmFiICgpIHtcbiAgICBfZ3JhYmJlZCA9IGZhbHNlO1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKHRydWUpO1xuICAgIG1vdmVtZW50cyh0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbGVhc2UgKGUpIHtcbiAgICB1bmdyYWIoKTtcblxuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgJiYgKChfY29weSAmJiBvLmNvcHlTb3J0U291cmNlKSB8fCAoIV9jb3B5IHx8IGRyb3BUYXJnZXQgIT09IF9zb3VyY2UpKSkge1xuICAgICAgZHJvcChpdGVtLCBkcm9wVGFyZ2V0KTtcbiAgICB9IGVsc2UgaWYgKG8ucmVtb3ZlT25TcGlsbCkge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbmNlbCgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyb3AgKGl0ZW0sIHRhcmdldCkge1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UgJiYgdGFyZ2V0ID09PSBfc291cmNlKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2l0ZW0pO1xuICAgIH1cbiAgICBpZiAoaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCkpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2NhbmNlbCcsIGl0ZW0sIF9zb3VyY2UsIF9zb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkcmFrZS5lbWl0KCdkcm9wJywgaXRlbSwgdGFyZ2V0LCBfc291cmNlLCBfY3VycmVudFNpYmxpbmcpO1xuICAgIH1cbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmUgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIGlmIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICB9XG4gICAgZHJha2UuZW1pdChfY29weSA/ICdjYW5jZWwnIDogJ3JlbW92ZScsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSk7XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsIChyZXZlcnQpIHtcbiAgICBpZiAoIWRyYWtlLmRyYWdnaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZXZlcnRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgPyByZXZlcnQgOiBvLnJldmVydE9uU3BpbGw7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB2YXIgcGFyZW50ID0gZ2V0UGFyZW50KGl0ZW0pO1xuICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHBhcmVudCk7XG4gICAgaWYgKGluaXRpYWwgPT09IGZhbHNlICYmIHJldmVydHMpIHtcbiAgICAgIGlmIChfY29weSkge1xuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKF9jb3B5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3NvdXJjZS5pbnNlcnRCZWZvcmUoaXRlbSwgX2luaXRpYWxTaWJsaW5nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGluaXRpYWwgfHwgcmV2ZXJ0cykge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCBwYXJlbnQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsZWFudXAgKCkge1xuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdW5ncmFiKCk7XG4gICAgcmVtb3ZlTWlycm9ySW1hZ2UoKTtcbiAgICBpZiAoaXRlbSkge1xuICAgICAgY2xhc3Nlcy5ybShpdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIH1cbiAgICBpZiAoX3JlbmRlclRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQoX3JlbmRlclRpbWVyKTtcbiAgICB9XG4gICAgZHJha2UuZHJhZ2dpbmcgPSBmYWxzZTtcbiAgICBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7XG4gICAgICBkcmFrZS5lbWl0KCdvdXQnLCBpdGVtLCBfbGFzdERyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KCdkcmFnZW5kJywgaXRlbSk7XG4gICAgX3NvdXJjZSA9IF9pdGVtID0gX2NvcHkgPSBfaW5pdGlhbFNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmcgPSBfcmVuZGVyVGltZXIgPSBfbGFzdERyb3BUYXJnZXQgPSBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbml0aWFsUGxhY2VtZW50ICh0YXJnZXQsIHMpIHtcbiAgICB2YXIgc2libGluZztcbiAgICBpZiAocyAhPT0gdm9pZCAwKSB7XG4gICAgICBzaWJsaW5nID0gcztcbiAgICB9IGVsc2UgaWYgKF9taXJyb3IpIHtcbiAgICAgIHNpYmxpbmcgPSBfY3VycmVudFNpYmxpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNpYmxpbmcgPSBuZXh0RWwoX2NvcHkgfHwgX2l0ZW0pO1xuICAgIH1cbiAgICByZXR1cm4gdGFyZ2V0ID09PSBfc291cmNlICYmIHNpYmxpbmcgPT09IF9pbml0aWFsU2libGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbmREcm9wVGFyZ2V0IChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKSB7XG4gICAgdmFyIHRhcmdldCA9IGVsZW1lbnRCZWhpbmRDdXJzb3I7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhYWNjZXB0ZWQoKSkge1xuICAgICAgdGFyZ2V0ID0gZ2V0UGFyZW50KHRhcmdldCk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQ7XG5cbiAgICBmdW5jdGlvbiBhY2NlcHRlZCAoKSB7XG4gICAgICB2YXIgZHJvcHBhYmxlID0gaXNDb250YWluZXIodGFyZ2V0KTtcbiAgICAgIGlmIChkcm9wcGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKHRhcmdldCwgZWxlbWVudEJlaGluZEN1cnNvcik7XG4gICAgICB2YXIgcmVmZXJlbmNlID0gZ2V0UmVmZXJlbmNlKHRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICAgIHZhciBpbml0aWFsID0gaXNJbml0aWFsUGxhY2VtZW50KHRhcmdldCwgcmVmZXJlbmNlKTtcbiAgICAgIGlmIChpbml0aWFsKSB7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBzaG91bGQgYWx3YXlzIGJlIGFibGUgdG8gZHJvcCBpdCByaWdodCBiYWNrIHdoZXJlIGl0IHdhc1xuICAgICAgfVxuICAgICAgcmV0dXJuIG8uYWNjZXB0cyhfaXRlbSwgdGFyZ2V0LCBfc291cmNlLCByZWZlcmVuY2UpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWcgKGUpIHtcbiAgICBpZiAoIV9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgdmFyIGNsaWVudFggPSBnZXRDb29yZCgnY2xpZW50WCcsIGUpO1xuICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICB2YXIgeCA9IGNsaWVudFggLSBfb2Zmc2V0WDtcbiAgICB2YXIgeSA9IGNsaWVudFkgLSBfb2Zmc2V0WTtcblxuICAgIF9taXJyb3Iuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuICAgIF9taXJyb3Iuc3R5bGUudG9wID0geSArICdweCc7XG5cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZ2V0RWxlbWVudEJlaGluZFBvaW50KF9taXJyb3IsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIHZhciBkcm9wVGFyZ2V0ID0gZmluZERyb3BUYXJnZXQoZWxlbWVudEJlaGluZEN1cnNvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGNoYW5nZWQgPSBkcm9wVGFyZ2V0ICE9PSBudWxsICYmIGRyb3BUYXJnZXQgIT09IF9sYXN0RHJvcFRhcmdldDtcbiAgICBpZiAoY2hhbmdlZCB8fCBkcm9wVGFyZ2V0ID09PSBudWxsKSB7XG4gICAgICBvdXQoKTtcbiAgICAgIF9sYXN0RHJvcFRhcmdldCA9IGRyb3BUYXJnZXQ7XG4gICAgICBvdmVyKCk7XG4gICAgfVxuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKGRyb3BUYXJnZXQgPT09IF9zb3VyY2UgJiYgX2NvcHkgJiYgIW8uY29weVNvcnRTb3VyY2UpIHtcbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVmZXJlbmNlO1xuICAgIHZhciBpbW1lZGlhdGUgPSBnZXRJbW1lZGlhdGVDaGlsZChkcm9wVGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICBpZiAoaW1tZWRpYXRlICE9PSBudWxsKSB7XG4gICAgICByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UoZHJvcFRhcmdldCwgaW1tZWRpYXRlLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB9IGVsc2UgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdHJ1ZSAmJiAhX2NvcHkpIHtcbiAgICAgIHJlZmVyZW5jZSA9IF9pbml0aWFsU2libGluZztcbiAgICAgIGRyb3BUYXJnZXQgPSBfc291cmNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2NvcHkgJiYgcGFyZW50KSB7XG4gICAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKHJlZmVyZW5jZSA9PT0gbnVsbCAmJiBjaGFuZ2VkKSB8fFxuICAgICAgcmVmZXJlbmNlICE9PSBpdGVtICYmXG4gICAgICByZWZlcmVuY2UgIT09IG5leHRFbChpdGVtKVxuICAgICkge1xuICAgICAgX2N1cnJlbnRTaWJsaW5nID0gcmVmZXJlbmNlO1xuICAgICAgZHJvcFRhcmdldC5pbnNlcnRCZWZvcmUoaXRlbSwgcmVmZXJlbmNlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ3NoYWRvdycsIGl0ZW0sIGRyb3BUYXJnZXQsIF9zb3VyY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBtb3ZlZCAodHlwZSkgeyBkcmFrZS5lbWl0KHR5cGUsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7IH1cbiAgICBmdW5jdGlvbiBvdmVyICgpIHsgaWYgKGNoYW5nZWQpIHsgbW92ZWQoJ292ZXInKTsgfSB9XG4gICAgZnVuY3Rpb24gb3V0ICgpIHsgaWYgKF9sYXN0RHJvcFRhcmdldCkgeyBtb3ZlZCgnb3V0Jyk7IH0gfVxuICB9XG5cbiAgZnVuY3Rpb24gc3BpbGxPdmVyIChlbCkge1xuICAgIGNsYXNzZXMucm0oZWwsICdndS1oaWRlJyk7XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE91dCAoZWwpIHtcbiAgICBpZiAoZHJha2UuZHJhZ2dpbmcpIHsgY2xhc3Nlcy5hZGQoZWwsICdndS1oaWRlJyk7IH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pcnJvckltYWdlICgpIHtcbiAgICBpZiAoX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVjdCA9IF9pdGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIF9taXJyb3IgPSBfaXRlbS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgX21pcnJvci5zdHlsZS53aWR0aCA9IGdldFJlY3RXaWR0aChyZWN0KSArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS5oZWlnaHQgPSBnZXRSZWN0SGVpZ2h0KHJlY3QpICsgJ3B4JztcbiAgICBjbGFzc2VzLnJtKF9taXJyb3IsICdndS10cmFuc2l0Jyk7XG4gICAgY2xhc3Nlcy5hZGQoX21pcnJvciwgJ2d1LW1pcnJvcicpO1xuICAgIG8ubWlycm9yQ29udGFpbmVyLmFwcGVuZENoaWxkKF9taXJyb3IpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdhZGQnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgY2xhc3Nlcy5hZGQoby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICBkcmFrZS5lbWl0KCdjbG9uZWQnLCBfbWlycm9yLCBfaXRlbSwgJ21pcnJvcicpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICBjbGFzc2VzLnJtKG8ubWlycm9yQ29udGFpbmVyLCAnZ3UtdW5zZWxlY3RhYmxlJyk7XG4gICAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCAncmVtb3ZlJywgJ21vdXNlbW92ZScsIGRyYWcpO1xuICAgICAgZ2V0UGFyZW50KF9taXJyb3IpLnJlbW92ZUNoaWxkKF9taXJyb3IpO1xuICAgICAgX21pcnJvciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0SW1tZWRpYXRlQ2hpbGQgKGRyb3BUYXJnZXQsIHRhcmdldCkge1xuICAgIHZhciBpbW1lZGlhdGUgPSB0YXJnZXQ7XG4gICAgd2hpbGUgKGltbWVkaWF0ZSAhPT0gZHJvcFRhcmdldCAmJiBnZXRQYXJlbnQoaW1tZWRpYXRlKSAhPT0gZHJvcFRhcmdldCkge1xuICAgICAgaW1tZWRpYXRlID0gZ2V0UGFyZW50KGltbWVkaWF0ZSk7XG4gICAgfVxuICAgIGlmIChpbW1lZGlhdGUgPT09IGRvY3VtZW50RWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbW1lZGlhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRSZWZlcmVuY2UgKGRyb3BUYXJnZXQsIHRhcmdldCwgeCwgeSkge1xuICAgIHZhciBob3Jpem9udGFsID0gby5kaXJlY3Rpb24gPT09ICdob3Jpem9udGFsJztcbiAgICB2YXIgcmVmZXJlbmNlID0gdGFyZ2V0ICE9PSBkcm9wVGFyZ2V0ID8gaW5zaWRlKCkgOiBvdXRzaWRlKCk7XG4gICAgcmV0dXJuIHJlZmVyZW5jZTtcblxuICAgIGZ1bmN0aW9uIG91dHNpZGUgKCkgeyAvLyBzbG93ZXIsIGJ1dCBhYmxlIHRvIGZpZ3VyZSBvdXQgYW55IHBvc2l0aW9uXG4gICAgICB2YXIgbGVuID0gZHJvcFRhcmdldC5jaGlsZHJlbi5sZW5ndGg7XG4gICAgICB2YXIgaTtcbiAgICAgIHZhciBlbDtcbiAgICAgIHZhciByZWN0O1xuICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGVsID0gZHJvcFRhcmdldC5jaGlsZHJlbltpXTtcbiAgICAgICAgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICBpZiAoaG9yaXpvbnRhbCAmJiAocmVjdC5sZWZ0ICsgcmVjdC53aWR0aCAvIDIpID4geCkgeyByZXR1cm4gZWw7IH1cbiAgICAgICAgaWYgKCFob3Jpem9udGFsICYmIChyZWN0LnRvcCArIHJlY3QuaGVpZ2h0IC8gMikgPiB5KSB7IHJldHVybiBlbDsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zaWRlICgpIHsgLy8gZmFzdGVyLCBidXQgb25seSBhdmFpbGFibGUgaWYgZHJvcHBlZCBpbnNpZGUgYSBjaGlsZCBlbGVtZW50XG4gICAgICB2YXIgcmVjdCA9IHRhcmdldC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIGlmIChob3Jpem9udGFsKSB7XG4gICAgICAgIHJldHVybiByZXNvbHZlKHggPiByZWN0LmxlZnQgKyBnZXRSZWN0V2lkdGgocmVjdCkgLyAyKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNvbHZlKHkgPiByZWN0LnRvcCArIGdldFJlY3RIZWlnaHQocmVjdCkgLyAyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlIChhZnRlcikge1xuICAgICAgcmV0dXJuIGFmdGVyID8gbmV4dEVsKHRhcmdldCkgOiB0YXJnZXQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaXNDb3B5IChpdGVtLCBjb250YWluZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG8uY29weSA9PT0gJ2Jvb2xlYW4nID8gby5jb3B5IDogby5jb3B5KGl0ZW0sIGNvbnRhaW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdG91Y2h5IChlbCwgb3AsIHR5cGUsIGZuKSB7XG4gIHZhciB0b3VjaCA9IHtcbiAgICBtb3VzZXVwOiAndG91Y2hlbmQnLFxuICAgIG1vdXNlZG93bjogJ3RvdWNoc3RhcnQnLFxuICAgIG1vdXNlbW92ZTogJ3RvdWNobW92ZSdcbiAgfTtcbiAgdmFyIHBvaW50ZXJzID0ge1xuICAgIG1vdXNldXA6ICdwb2ludGVydXAnLFxuICAgIG1vdXNlZG93bjogJ3BvaW50ZXJkb3duJyxcbiAgICBtb3VzZW1vdmU6ICdwb2ludGVybW92ZSdcbiAgfTtcbiAgdmFyIG1pY3Jvc29mdCA9IHtcbiAgICBtb3VzZXVwOiAnTVNQb2ludGVyVXAnLFxuICAgIG1vdXNlZG93bjogJ01TUG9pbnRlckRvd24nLFxuICAgIG1vdXNlbW92ZTogJ01TUG9pbnRlck1vdmUnXG4gIH07XG4gIGlmIChnbG9iYWwubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkKSB7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgcG9pbnRlcnNbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIGlmIChnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBtaWNyb3NvZnRbdHlwZV0sIGZuKTtcbiAgfSBlbHNlIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCB0b3VjaFt0eXBlXSwgZm4pO1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHR5cGUsIGZuKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3aGljaE1vdXNlQnV0dG9uIChlKSB7XG4gIGlmIChlLnRvdWNoZXMgIT09IHZvaWQgMCkgeyByZXR1cm4gZS50b3VjaGVzLmxlbmd0aDsgfVxuICBpZiAoZS53aGljaCAhPT0gdm9pZCAwICYmIGUud2hpY2ggIT09IDApIHsgcmV0dXJuIGUud2hpY2g7IH0gLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXZhY3F1YS9kcmFndWxhL2lzc3Vlcy8yNjFcbiAgaWYgKGUuYnV0dG9ucyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLmJ1dHRvbnM7IH1cbiAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9uO1xuICBpZiAoYnV0dG9uICE9PSB2b2lkIDApIHsgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L2Jsb2IvOTllOGZmMWJhYTdhZTM0MWU5NGJiODljM2U4NDU3MGM3YzNhZDllYS9zcmMvZXZlbnQuanMjTDU3My1MNTc1XG4gICAgcmV0dXJuIGJ1dHRvbiAmIDEgPyAxIDogYnV0dG9uICYgMiA/IDMgOiAoYnV0dG9uICYgNCA/IDIgOiAwKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRPZmZzZXQgKGVsKSB7XG4gIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIHJldHVybiB7XG4gICAgbGVmdDogcmVjdC5sZWZ0ICsgZ2V0U2Nyb2xsKCdzY3JvbGxMZWZ0JywgJ3BhZ2VYT2Zmc2V0JyksXG4gICAgdG9wOiByZWN0LnRvcCArIGdldFNjcm9sbCgnc2Nyb2xsVG9wJywgJ3BhZ2VZT2Zmc2V0JylcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Nyb2xsIChzY3JvbGxQcm9wLCBvZmZzZXRQcm9wKSB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsW29mZnNldFByb3BdICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBnbG9iYWxbb2Zmc2V0UHJvcF07XG4gIH1cbiAgaWYgKGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRFbGVtZW50W3Njcm9sbFByb3BdO1xuICB9XG4gIHJldHVybiBkb2MuYm9keVtzY3JvbGxQcm9wXTtcbn1cblxuZnVuY3Rpb24gZ2V0RWxlbWVudEJlaGluZFBvaW50IChwb2ludCwgeCwgeSkge1xuICB2YXIgcCA9IHBvaW50IHx8IHt9O1xuICB2YXIgc3RhdGUgPSBwLmNsYXNzTmFtZTtcbiAgdmFyIGVsO1xuICBwLmNsYXNzTmFtZSArPSAnIGd1LWhpZGUnO1xuICBlbCA9IGRvYy5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICBwLmNsYXNzTmFtZSA9IHN0YXRlO1xuICByZXR1cm4gZWw7XG59XG5cbmZ1bmN0aW9uIG5ldmVyICgpIHsgcmV0dXJuIGZhbHNlOyB9XG5mdW5jdGlvbiBhbHdheXMgKCkgeyByZXR1cm4gdHJ1ZTsgfVxuZnVuY3Rpb24gZ2V0UmVjdFdpZHRoIChyZWN0KSB7IHJldHVybiByZWN0LndpZHRoIHx8IChyZWN0LnJpZ2h0IC0gcmVjdC5sZWZ0KTsgfVxuZnVuY3Rpb24gZ2V0UmVjdEhlaWdodCAocmVjdCkgeyByZXR1cm4gcmVjdC5oZWlnaHQgfHwgKHJlY3QuYm90dG9tIC0gcmVjdC50b3ApOyB9XG5mdW5jdGlvbiBnZXRQYXJlbnQgKGVsKSB7IHJldHVybiBlbC5wYXJlbnROb2RlID09PSBkb2MgPyBudWxsIDogZWwucGFyZW50Tm9kZTsgfVxuZnVuY3Rpb24gaXNJbnB1dCAoZWwpIHsgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyB8fCBlbC50YWdOYW1lID09PSAnU0VMRUNUJyB8fCBpc0VkaXRhYmxlKGVsKTsgfVxuZnVuY3Rpb24gaXNFZGl0YWJsZSAoZWwpIHtcbiAgaWYgKCFlbCkgeyByZXR1cm4gZmFsc2U7IH0gLy8gbm8gcGFyZW50cyB3ZXJlIGVkaXRhYmxlXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICdmYWxzZScpIHsgcmV0dXJuIGZhbHNlOyB9IC8vIHN0b3AgdGhlIGxvb2t1cFxuICBpZiAoZWwuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHsgcmV0dXJuIHRydWU7IH0gLy8gZm91bmQgYSBjb250ZW50RWRpdGFibGUgZWxlbWVudCBpbiB0aGUgY2hhaW5cbiAgcmV0dXJuIGlzRWRpdGFibGUoZ2V0UGFyZW50KGVsKSk7IC8vIGNvbnRlbnRFZGl0YWJsZSBpcyBzZXQgdG8gJ2luaGVyaXQnXG59XG5cbmZ1bmN0aW9uIG5leHRFbCAoZWwpIHtcbiAgcmV0dXJuIGVsLm5leHRFbGVtZW50U2libGluZyB8fCBtYW51YWxseSgpO1xuICBmdW5jdGlvbiBtYW51YWxseSAoKSB7XG4gICAgdmFyIHNpYmxpbmcgPSBlbDtcbiAgICBkbyB7XG4gICAgICBzaWJsaW5nID0gc2libGluZy5uZXh0U2libGluZztcbiAgICB9IHdoaWxlIChzaWJsaW5nICYmIHNpYmxpbmcubm9kZVR5cGUgIT09IDEpO1xuICAgIHJldHVybiBzaWJsaW5nO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldEV2ZW50SG9zdCAoZSkge1xuICAvLyBvbiB0b3VjaGVuZCBldmVudCwgd2UgaGF2ZSB0byB1c2UgYGUuY2hhbmdlZFRvdWNoZXNgXG4gIC8vIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcxOTI1NjMvdG91Y2hlbmQtZXZlbnQtcHJvcGVydGllc1xuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzM0XG4gIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF07XG4gIH1cbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2V0Q29vcmQgKGNvb3JkLCBlKSB7XG4gIHZhciBob3N0ID0gZ2V0RXZlbnRIb3N0KGUpO1xuICB2YXIgbWlzc01hcCA9IHtcbiAgICBwYWdlWDogJ2NsaWVudFgnLCAvLyBJRThcbiAgICBwYWdlWTogJ2NsaWVudFknIC8vIElFOFxuICB9O1xuICBpZiAoY29vcmQgaW4gbWlzc01hcCAmJiAhKGNvb3JkIGluIGhvc3QpICYmIG1pc3NNYXBbY29vcmRdIGluIGhvc3QpIHtcbiAgICBjb29yZCA9IG1pc3NNYXBbY29vcmRdO1xuICB9XG4gIHJldHVybiBob3N0W2Nvb3JkXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkcmFndWxhO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvZHJhZ3VsYS9kcmFndWxhLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGF0b2EgPSByZXF1aXJlKCdhdG9hJyk7XG52YXIgZGVib3VuY2UgPSByZXF1aXJlKCcuL2RlYm91bmNlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW1pdHRlciAodGhpbmcsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZXZ0ID0ge307XG4gIGlmICh0aGluZyA9PT0gdW5kZWZpbmVkKSB7IHRoaW5nID0ge307IH1cbiAgdGhpbmcub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xuICAgICAgZXZ0W3R5cGVdID0gW2ZuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9uY2UgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBmbi5fb25jZSA9IHRydWU7IC8vIHRoaW5nLm9mZihmbikgc3RpbGwgd29ya3MhXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChjID09PSAxKSB7XG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMCkge1xuICAgICAgZXZ0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBldCA9IGV2dFt0eXBlXTtcbiAgICAgIGlmICghZXQpIHsgcmV0dXJuIHRoaW5nOyB9XG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuICB0aGluZy5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xuICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicgJiYgb3B0cy50aHJvd3MgIT09IGZhbHNlICYmICFldC5sZW5ndGgpIHsgdGhyb3cgYXJncy5sZW5ndGggPT09IDEgPyBhcmdzWzBdIDogYXJnczsgfVxuICAgICAgZXQuZm9yRWFjaChmdW5jdGlvbiBlbWl0dGVyIChsaXN0ZW4pIHtcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxuICAgICAgICBpZiAobGlzdGVuLl9vbmNlKSB7IHRoaW5nLm9mZih0eXBlLCBsaXN0ZW4pOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGluZztcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdGhpbmc7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY29udHJhL2VtaXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvYXRvYS9hdG9hLmpzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIHRpY2t5ID0gcmVxdWlyZSgndGlja3knKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkZWJvdW5jZSAoZm4sIGFyZ3MsIGN0eCkge1xuICBpZiAoIWZuKSB7IHJldHVybjsgfVxuICB0aWNreShmdW5jdGlvbiBydW4gKCkge1xuICAgIGZuLmFwcGx5KGN0eCB8fCBudWxsLCBhcmdzIHx8IFtdKTtcbiAgfSk7XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY29udHJhL2RlYm91bmNlLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBzaSA9IHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09ICdmdW5jdGlvbicsIHRpY2s7XG5pZiAoc2kpIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRJbW1lZGlhdGUoZm4pOyB9O1xufSBlbHNlIHtcbiAgdGljayA9IGZ1bmN0aW9uIChmbikgeyBzZXRUaW1lb3V0KGZuLCAwKTsgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0aWNrO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvdGltZXJzLWJyb3dzZXJpZnkvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG52YXIgcHJvY2VzcyA9IG1vZHVsZS5leHBvcnRzID0ge307XG5cbi8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuLy8gZG9uJ3QgYnJlYWsgdGhpbmdzLiAgQnV0IHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRyeSBjYXRjaCBpbiBjYXNlIGl0IGlzXG4vLyB3cmFwcGVkIGluIHN0cmljdCBtb2RlIGNvZGUgd2hpY2ggZG9lc24ndCBkZWZpbmUgYW55IGdsb2JhbHMuICBJdCdzIGluc2lkZSBhXG4vLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXG52YXIgY2FjaGVkU2V0VGltZW91dDtcbnZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTZXRUaW1vdXQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG5mdW5jdGlvbiBkZWZhdWx0Q2xlYXJUaW1lb3V0ICgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuKGZ1bmN0aW9uICgpIHtcbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIHNldFRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBpZiAodHlwZW9mIGNsZWFyVGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gZGVmYXVsdENsZWFyVGltZW91dDtcbiAgICB9XG59ICgpKVxuZnVuY3Rpb24gcnVuVGltZW91dChmdW4pIHtcbiAgICBpZiAoY2FjaGVkU2V0VGltZW91dCA9PT0gc2V0VGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgLy8gaWYgc2V0VGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZFNldFRpbWVvdXQgPT09IGRlZmF1bHRTZXRUaW1vdXQgfHwgIWNhY2hlZFNldFRpbWVvdXQpICYmIHNldFRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9IGNhdGNoKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0IHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKG51bGwsIGZ1biwgMCk7XG4gICAgICAgIH0gY2F0Y2goZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvclxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbCh0aGlzLCBmdW4sIDApO1xuICAgICAgICB9XG4gICAgfVxuXG5cbn1cbmZ1bmN0aW9uIHJ1bkNsZWFyVGltZW91dChtYXJrZXIpIHtcbiAgICBpZiAoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgLy8gaWYgY2xlYXJUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkQ2xlYXJUaW1lb3V0ID09PSBkZWZhdWx0Q2xlYXJUaW1lb3V0IHx8ICFjYWNoZWRDbGVhclRpbWVvdXQpICYmIGNsZWFyVGltZW91dCkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIHJldHVybiBjbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfSBjYXRjaCAoZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgIHRydXN0IHRoZSBnbG9iYWwgb2JqZWN0IHdoZW4gY2FsbGVkIG5vcm1hbGx5XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwobnVsbCwgbWFya2VyKTtcbiAgICAgICAgfSBjYXRjaCAoZSl7XG4gICAgICAgICAgICAvLyBzYW1lIGFzIGFib3ZlIGJ1dCB3aGVuIGl0J3MgYSB2ZXJzaW9uIG9mIEkuRS4gdGhhdCBtdXN0IGhhdmUgdGhlIGdsb2JhbCBvYmplY3QgZm9yICd0aGlzJywgaG9wZnVsbHkgb3VyIGNvbnRleHQgY29ycmVjdCBvdGhlcndpc2UgaXQgd2lsbCB0aHJvdyBhIGdsb2JhbCBlcnJvci5cbiAgICAgICAgICAgIC8vIFNvbWUgdmVyc2lvbnMgb2YgSS5FLiBoYXZlIGRpZmZlcmVudCBydWxlcyBmb3IgY2xlYXJUaW1lb3V0IHZzIHNldFRpbWVvdXRcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbCh0aGlzLCBtYXJrZXIpO1xuICAgICAgICB9XG4gICAgfVxuXG5cblxufVxudmFyIHF1ZXVlID0gW107XG52YXIgZHJhaW5pbmcgPSBmYWxzZTtcbnZhciBjdXJyZW50UXVldWU7XG52YXIgcXVldWVJbmRleCA9IC0xO1xuXG5mdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG4gICAgaWYgKCFkcmFpbmluZyB8fCAhY3VycmVudFF1ZXVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBpZiAoY3VycmVudFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuICAgICAgICBkcmFpblF1ZXVlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuICAgIGlmIChkcmFpbmluZykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciB0aW1lb3V0ID0gcnVuVGltZW91dChjbGVhblVwTmV4dFRpY2spO1xuICAgIGRyYWluaW5nID0gdHJ1ZTtcblxuICAgIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUobGVuKSB7XG4gICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuICAgICAgICBxdWV1ZSA9IFtdO1xuICAgICAgICB3aGlsZSAoKytxdWV1ZUluZGV4IDwgbGVuKSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFF1ZXVlW3F1ZXVlSW5kZXhdLnJ1bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHF1ZXVlSW5kZXggPSAtMTtcbiAgICAgICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIH1cbiAgICBjdXJyZW50UXVldWUgPSBudWxsO1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgcnVuQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xufVxuXG5wcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGggLSAxKTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGFyZ3NbaSAtIDFdID0gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHF1ZXVlLnB1c2gobmV3IEl0ZW0oZnVuLCBhcmdzKSk7XG4gICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMSAmJiAhZHJhaW5pbmcpIHtcbiAgICAgICAgcnVuVGltZW91dChkcmFpblF1ZXVlKTtcbiAgICB9XG59O1xuXG4vLyB2OCBsaWtlcyBwcmVkaWN0aWJsZSBvYmplY3RzXG5mdW5jdGlvbiBJdGVtKGZ1biwgYXJyYXkpIHtcbiAgICB0aGlzLmZ1biA9IGZ1bjtcbiAgICB0aGlzLmFycmF5ID0gYXJyYXk7XG59XG5JdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5mdW4uYXBwbHkobnVsbCwgdGhpcy5hcnJheSk7XG59O1xucHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcbnByb2Nlc3MuYnJvd3NlciA9IHRydWU7XG5wcm9jZXNzLmVudiA9IHt9O1xucHJvY2Vzcy5hcmd2ID0gW107XG5wcm9jZXNzLnZlcnNpb24gPSAnJzsgLy8gZW1wdHkgc3RyaW5nIHRvIGF2b2lkIHJlZ2V4cCBpc3N1ZXNcbnByb2Nlc3MudmVyc2lvbnMgPSB7fTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnByb2Nlc3Mub24gPSBub29wO1xucHJvY2Vzcy5hZGRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLm9uY2UgPSBub29wO1xucHJvY2Vzcy5vZmYgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUFsbExpc3RlbmVycyA9IG5vb3A7XG5wcm9jZXNzLmVtaXQgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5wcmVwZW5kT25jZUxpc3RlbmVyID0gbm9vcDtcblxucHJvY2Vzcy5saXN0ZW5lcnMgPSBmdW5jdGlvbiAobmFtZSkgeyByZXR1cm4gW10gfVxuXG5wcm9jZXNzLmJpbmRpbmcgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5cbnByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5wcm9jZXNzLmNoZGlyID0gZnVuY3Rpb24gKGRpcikge1xuICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5jaGRpciBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xucHJvY2Vzcy51bWFzayA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gMDsgfTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3VzdG9tRXZlbnQgPSByZXF1aXJlKCdjdXN0b20tZXZlbnQnKTtcbnZhciBldmVudG1hcCA9IHJlcXVpcmUoJy4vZXZlbnRtYXAnKTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYWRkRXZlbnQgPSBhZGRFdmVudEVhc3k7XG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XG52YXIgaGFyZENhY2hlID0gW107XG5cbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgYWRkRXZlbnQgPSBhZGRFdmVudEhhcmQ7XG4gIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRIYXJkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgbGlzdGVuZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIGVsLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9jcm9zc3ZlbnQuanNcbi8vIG1vZHVsZSBpZCA9IDE0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlxudmFyIE5hdGl2ZUN1c3RvbUV2ZW50ID0gZ2xvYmFsLkN1c3RvbUV2ZW50O1xuXG5mdW5jdGlvbiB1c2VOYXRpdmUgKCkge1xuICB0cnkge1xuICAgIHZhciBwID0gbmV3IE5hdGl2ZUN1c3RvbUV2ZW50KCdjYXQnLCB7IGRldGFpbDogeyBmb286ICdiYXInIH0gfSk7XG4gICAgcmV0dXJuICAnY2F0JyA9PT0gcC50eXBlICYmICdiYXInID09PSBwLmRldGFpbC5mb287XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ3Jvc3MtYnJvd3NlciBgQ3VzdG9tRXZlbnRgIGNvbnN0cnVjdG9yLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC5DdXN0b21FdmVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZU5hdGl2ZSgpID8gTmF0aXZlQ3VzdG9tRXZlbnQgOlxuXG4vLyBJRSA+PSA5XG4nZnVuY3Rpb24nID09PSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPyBmdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICB9IGVsc2Uge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSwgdm9pZCAwKTtcbiAgfVxuICByZXR1cm4gZTtcbn0gOlxuXG4vLyBJRSA8PSA4XG5mdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgZS50eXBlID0gdHlwZTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuYnViYmxlcyA9IEJvb2xlYW4ocGFyYW1zLmJ1YmJsZXMpO1xuICAgIGUuY2FuY2VsYWJsZSA9IEJvb2xlYW4ocGFyYW1zLmNhbmNlbGFibGUpO1xuICAgIGUuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgfSBlbHNlIHtcbiAgICBlLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICBlLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICBlLmRldGFpbCA9IHZvaWQgMDtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9yaXNlL2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy9yaXNlL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL2N1c3RvbS1ldmVudC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgZXZlbnRtYXAgPSBbXTtcbnZhciBldmVudG5hbWUgPSAnJztcbnZhciByb24gPSAvXm9uLztcblxuZm9yIChldmVudG5hbWUgaW4gZ2xvYmFsKSB7XG4gIGlmIChyb24udGVzdChldmVudG5hbWUpKSB7XG4gICAgZXZlbnRtYXAucHVzaChldmVudG5hbWUuc2xpY2UoMikpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXZlbnRtYXA7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvcmlzZS9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvcmlzZS92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjYWNoZSA9IHt9O1xudmFyIHN0YXJ0ID0gJyg/Ol58XFxcXHMpJztcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xuXG5mdW5jdGlvbiBsb29rdXBDbGFzcyAoY2xhc3NOYW1lKSB7XG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY2FjaGVkLmxhc3RJbmRleCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbC5jbGFzc05hbWU7XG4gIGlmICghY3VycmVudC5sZW5ndGgpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIH0gZWxzZSBpZiAoIWxvb2t1cENsYXNzKGNsYXNzTmFtZSkudGVzdChjdXJyZW50KSkge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShsb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkQ2xhc3MsXG4gIHJtOiBybUNsYXNzXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3Jpc2UvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3Jpc2UvdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvZHJhZ3VsYS9jbGFzc2VzLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoIHBhcmVudCwgaGlkZGVuSW5wdXQgKSB7XG5cdGNvbnN0IGhpZGRlbkVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoIGhpZGRlbklucHV0ICk7XG5cblx0Y29uc3QgZ2V0Q3VycmVudFZhbHVlID0gKCkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlID0gaGlkZGVuRWwudmFsdWU7XG5cblx0XHRpZiAoIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIEpTT04ucGFyc2UoIHZhbHVlICk7XG5cdFx0fVxuXHRcdHJldHVybiBbXTtcblxuXHR9O1xuXG5cdGNvbnN0IGNoZWNrTGltaXQgPSAoIGN1cnJlbnRWYWx1ZSApID0+IHtcblx0XHRjb25zdCBjb3VudCA9IGN1cnJlbnRWYWx1ZS5sZW5ndGg7XG5cdFx0Y29uc3QgZmllbGQgPSBwYXJlbnQucXVlcnlTZWxlY3RvciggJy5jdXN0b21pemVyLWN1cmF0aW9uLWxpc3QtaW5wdXQnICk7XG5cdFx0Y29uc3QgbWF4ID0gZmllbGQuZ2V0QXR0cmlidXRlKCAnZGF0YS1tYXgnICk7XG5cblx0XHRpZiAoIG1heCApIHtcblx0XHRcdGlmICggY291bnQgPCBwYXJzZUludCggbWF4LCAxMCApICkge1xuXHRcdFx0XHRmaWVsZC5yZW1vdmVBdHRyaWJ1dGUoICdkaXNhYmxlZCcgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZpZWxkLnNldEF0dHJpYnV0ZSggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHRjb25zdCBhZGRWYWx1ZSA9ICggdmFsdWUgKSA9PiB7XG5cdFx0bGV0IGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuXG5cdFx0Y3VycmVudFZhbHVlID0gY3VycmVudFZhbHVlLmNvbmNhdCggdmFsdWUgKTtcblx0XHRjaGVja0xpbWl0KCBjdXJyZW50VmFsdWUgKTtcblx0XHRyZXR1cm4gY3VycmVudFZhbHVlO1xuXHR9O1xuXG5cdGNvbnN0IHJlbW92ZVZhbHVlID0gKCB2YWx1ZSwgb25SZW1vdmUgKSA9PiB7XG5cdFx0bGV0IGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuXG5cdFx0Y3VycmVudFZhbHVlID0gb25SZW1vdmUoIGN1cnJlbnRWYWx1ZSwgdmFsdWUgKTtcblx0XHRjaGVja0xpbWl0KCBjdXJyZW50VmFsdWUgKTtcblx0XHRyZXR1cm4gY3VycmVudFZhbHVlO1xuXHR9O1xuXG5cdHJldHVybiB7XG5cdFx0YWRkOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXHRcdFx0aGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeSggYWRkVmFsdWUoIHZhbHVlICkgKTtcblx0XHR9LFxuXHRcdHJlbW92ZTogZnVuY3Rpb24gKCB2YWx1ZSwgb25SZW1vdmUgKSB7XG5cdFx0XHRoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KCByZW1vdmVWYWx1ZSggdmFsdWUsIG9uUmVtb3ZlICkgKTtcblx0XHR9LFxuXHRcdHVwZGF0ZTogZnVuY3Rpb24gKCB2YWx1ZXMgKSB7XG5cdFx0XHRoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KCB2YWx1ZXMgKTtcblx0XHR9LFxuXHRcdGVsOiBoaWRkZW5FbFxuXHR9O1xufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc2VyaWFsaXplZC1pbnB1dC5qcyIsIi8qIGdsb2JhbCBqUXVlcnkgKi9cbmV4cG9ydCBjb25zdCBjaGVja0xpbWl0ID0gKCBhdXRvTGlzdCApID0+IHtcblx0Y29uc3QgY2hpbGRyZW4gPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCAnbGknICk7XG5cdGNvbnN0IGZpZWxkID0gYXV0b0xpc3QucXVlcnlTZWxlY3RvciggJy5jdXN0b21pemVyLWN1cmF0aW9uLWxpc3QtaW5wdXQnICk7XG5cdGNvbnN0IG1heCA9IGZpZWxkLmdldEF0dHJpYnV0ZSggJ2RhdGEtbWF4JyApO1xuXG5cdGlmICggbWF4ICkge1xuXHRcdGlmICggY2hpbGRyZW4ubGVuZ3RoIDwgcGFyc2VJbnQoIG1heCwgMTAgKSApIHtcblx0XHRcdGZpZWxkLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRmaWVsZC5zZXRBdHRyaWJ1dGUoICdkaXNhYmxlZCcsIHRydWUgKTtcblx0XHR9XG5cdH1cbn07XG5cbmV4cG9ydCBjb25zdCByZW1vdmVJdGVtcyA9ICggSGlkZGVuLCBvblJlbW92ZSwgYXV0b0xpc3QgKSA9PiB7XG5cdHJldHVybiAoIHZhbHVlICkgPT4ge1xuXHRcdEhpZGRlbi5yZW1vdmUoIHZhbHVlLCBvblJlbW92ZSApO1xuXHRcdGNoZWNrTGltaXQoIGF1dG9MaXN0ICk7XG5cdFx0alF1ZXJ5KCBIaWRkZW4uZWwgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHR9O1xufTtcblxuZXhwb3J0IGNvbnN0IGRyYWdJdGVtcyA9ICggSGlkZGVuLCBvbkRyYWcgKSA9PiB7XG5cdHJldHVybiAoIGxpc3QsIGxpc3RJdGVtcyApID0+IHtcblx0XHRjb25zdCB2YWx1ZXMgPSBvbkRyYWcoIGxpc3QsIGxpc3RJdGVtcyApO1xuXG5cdFx0SGlkZGVuLnVwZGF0ZSggdmFsdWVzICk7XG5cdFx0alF1ZXJ5KCBIaWRkZW4uZWwgKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHR9O1xufTtcblxuZXhwb3J0IGNvbnN0IG9uRHJhZ09iamVjdCA9ICggbGlzdCwgbGlzdEl0ZW1zICkgPT4ge1xuXHRyZXR1cm4gW10ucmVkdWNlLmNhbGwoIGxpc3RJdGVtcywgKCBhY2MsIGxpc3RJdGVtICkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlID0ge1xuXHRcdFx0aWQ6IGxpc3RJdGVtLmRhdGFzZXQuaWQsXG5cdFx0XHR0aXRsZTogbGlzdEl0ZW0ucXVlcnlTZWxlY3RvciggJ3NwYW4nICkuaW5uZXJIVE1MXG5cdFx0fTtcblxuXHRcdHJldHVybiBhY2MuY29uY2F0KCBbdmFsdWVdICk7XG5cdH0sIFtdICk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnVGV4dCA9ICggbGlzdCwgbGlzdEl0ZW1zICkgPT4ge1xuXHRyZXR1cm4gW10ucmVkdWNlLmNhbGwoIGxpc3RJdGVtcywgKCBhY2MsIGxpc3RJdGVtICkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvciggJ3NwYW4nICkuaW5uZXJIVE1MO1xuXG5cdFx0cmV0dXJuIGFjYy5jb25jYXQoIFt2YWx1ZV0gKTtcblx0fSwgW10gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZU9iamVjdCA9ICggY3VycmVudFZhbHVlLCBuZXdWYWx1ZSApID0+IHtcblx0cmV0dXJuIGN1cnJlbnRWYWx1ZS5maWx0ZXIoICggY3VycmVudCApID0+IGN1cnJlbnQudGl0bGUgIT09IG5ld1ZhbHVlICk7XG59O1xuXG5leHBvcnQgY29uc3Qgb25SZW1vdmVUZXh0ID0gKCBjdXJyZW50VmFsdWUsIG5ld1ZhbHVlICkgPT4ge1xuXHRyZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlciggKCBjdXJyZW50ICkgPT4gY3VycmVudCAhPT0gbmV3VmFsdWUgKTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi91dGlsaXRpZXMuanMiLCIvKiBnbG9iYWwgalF1ZXJ5ICovXG5cbmltcG9ydCBhdXRvU3VnZ2VzdCBmcm9tICcuL2F1dG9zdWdnZXN0JztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCBhcmdzICkge1xuXHRjb25zdCBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBhcmdzLnBhcmVudCApO1xuXG5cdGlmICggISBmaWVsZHMgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0W10uZm9yRWFjaC5jYWxsKCBmaWVsZHMsICggYXV0b0l0ZW0gKSA9PiB7XG5cdFx0Y29uc3QgaGlkZGVuID0gYXV0b0l0ZW0ucXVlcnlTZWxlY3RvciggYXJncy5oaWRkZW4gKTtcblx0XHRjb25zdCBsb2NhbGl6ZWRLZXkgPSBgQ3VyYXRpb25fJHthdXRvSXRlbS5kYXRhc2V0LmlkfWA7XG5cdFx0Y29uc3QgZW5kcG9pbnQgPSBgJHt3aW5kb3dbbG9jYWxpemVkS2V5XS5iYXNlVVJMfS93cC1qc29uL3dwL3YyLyR7d2luZG93W2xvY2FsaXplZEtleV0ucmVzb3VyY2V9P3NlYXJjaD1gO1xuXG5cdFx0YXV0b1N1Z2dlc3QoXG5cdFx0XHRhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCBhcmdzLmlucHV0ICksXG5cdFx0XHRlbmRwb2ludCxcblx0XHRcdCggdmFsdWUsIGlucHV0ICkgPT4ge1xuXHRcdFx0XHRoaWRkZW4udmFsdWUgPSBKU09OLnN0cmluZ2lmeSggdmFsdWUgKTtcblx0XHRcdFx0alF1ZXJ5KCBoaWRkZW4gKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0fSxcblx0XHRcdCgpID0+IHtcblx0XHRcdFx0aGlkZGVuLnZhbHVlID0gJyc7XG5cdFx0XHRcdGpRdWVyeSggaGlkZGVuICkudHJpZ2dlciggJ2NoYW5nZScgKTtcblx0XHRcdH1cblx0XHQpO1xuXHR9ICk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hdXRvLWl0ZW0uanMiXSwic291cmNlUm9vdCI6IiJ9