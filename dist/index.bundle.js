!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=2)}([function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){if(!e)return!1;var i=!1;e.addEventListener("keyup",function(n){if(0===n.target.value.length&&r&&r(),n.target.value.length<3)return!1;e.classList.add("show"),i=u(i,l,e,t)}),e.addEventListener("input",function(t){var r=o(t);r&&n(r,e)})};var r=function(e){if("string"!=typeof e)return!1;try{return JSON.parse(e),!0}catch(e){return!1}},i=function(e){return encodeURIComponent(e.toLowerCase())},o=function(e){var t=e.target,n=t.value,r=t.getAttribute("list"),i=document.getElementById(r).childNodes,o=[].reduce.call(i,function(e,t){return t.value===n?e.concat({id:t.dataset.id,title:t.value}):e},[]);return 0!==o.length&&o[0]},u=function(e,t,n,o){var u=i(n.value),c=o+u;return e&&e.abort(),e=new XMLHttpRequest,e.addEventListener("load",function(e){t(!1,e)},!1),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status?t(!1,{results:JSON.parse(e.responseText),input:n}):e.readyState===XMLHttpRequest.DONE&&e.status>=400&&e.responseText&&r(e.responseText)&&t({message:JSON.parse(e.responseText),input:n},!1)},e.addEventListener("error",function(e){t(e,!1)},!1),e.addEventListener("abort",function(e){t(!0,!1)},!1),e.open("GET",c,!0),e.send(),e},c=function(e){return"<option data-id="+e.id+' value="'+e.title.rendered+'">'},a=function(e,t){var n=t.getAttribute("list"),r=document.getElementById(n),i=e.reduce(function(e,t){var n=c(t);return e.concat(n)},"");t.classList.remove("show"),r.innerHTML=i},l=function(e,t){if(e){if(!0===e)return!1;e.input.classList.remove("show"),console.warn(e)}if(t){if(!Array.isArray(t.results))return!1;a(t.results,t.input)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(3),o=(r(i),n(4)),u=r(o),c=n(20),a=r(c),l=function(e){return'<li class="text-list-item" data-id="'+e.id+'">\n        <span>'+e.title+'</span>\n        <svg viewBox="0 0 20 20">\n            <path d="M10 2c4.42 0 8 3.58 8 8s-3.58 8-8 8-8-3.58-8-8 3.58-8\n\t\t\t8-8zM15 13l-3-3 3-3-2-2-3 3-3-3-2 2 3 3-3 3 2 2 3-3 3 3z"></path>\n        </svg>\n    </li>'};document.addEventListener("DOMContentLoaded",function(){(0,u.default)({parent:".customizer-curation-list",input:".customizer-curation-list-input",list:".customizer-curation-list-list",hidden:".customizer-curation-list-hidden",listTemplate:l,endpoint:CustomizerCuration.baseURL+"/wp-json/wp/v2/"+CustomizerCuration.resource+"?search="}),(0,a.default)({parent:".customizer-curation",input:".customizer-curation-input",hidden:".customizer-curation-hidden",endpoint:CustomizerCuration.baseURL+"/wp-json/wp/v2/"+CustomizerCuration.resource+"?search="})})},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=(0,l.default)(t,e.hidden),r=t.querySelector(e.hidden),i=(0,s.removeItems)(n,s.onRemoveObject,t),u=(0,s.dragItems)(n,s.onDragObject),a=(0,o.default)(t,Object.assign(e,{onDrag:u,onRemove:i}));(0,c.default)(t.querySelector(e.input),e.endpoint,function(e,i){a.add(e),i.value="",n.add(e),(0,s.checkLimit)(t),jQuery(r).trigger("change")})})};var i=n(5),o=r(i),u=n(1),c=r(u),a=n(18),l=r(a),s=n(19)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t.list);return u(n,t.onDrag),o(n,t.onRemove),{add:function(e){var r=t.listTemplate(e),i=document.createRange().createContextualFragment(r);n.appendChild(i)}}};var r=n(6),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t){var n=e.querySelectorAll("li");return e.addEventListener("click",function(n){if("svg"===("svg"===n.target.tagName?n.target:n.target.closest("svg")).tagName){var r=n.target.closest("li"),i=r.querySelector("span").innerHTML;e.removeChild(r),t(i)}}),n},u=function(e,t){(0,i.default)([e]).on("dragend",function(n){var r=e.querySelectorAll("li");t(e,r)})}},function(e,t,n){"use strict";(function(t){function r(e,t){function n(e){return-1!==le.containers.indexOf(e)||ae.isContainer(e)}function r(e){var t=e?"remove":"add";i(S,t,"mousedown",x),i(S,t,"mouseup",P)}function c(e){i(S,e?"remove":"add","mousemove",C)}function p(e){var t=e?"remove":"add";T[t](S,"selectstart",O),T[t](S,"click",O)}function h(){r(!0),P({})}function O(e){ue&&e.preventDefault()}function x(e){if(ee=e.clientX,te=e.clientY,!(1!==o(e)||e.metaKey||e.ctrlKey)){var t=e.target,n=_(t);n&&(ue=n,c(),"mousedown"===e.type&&(m(t)?t.focus():e.preventDefault()))}}function C(e){if(ue){if(0===o(e))return void P({});if(void 0===e.clientX||e.clientX!==ee||void 0===e.clientY||e.clientY!==te){if(ae.ignoreInputTextSelection){var t=y("clientX",e),n=y("clientY",e);if(m(E.elementFromPoint(t,n)))return}var r=ue;c(!0),p(),j(),I(r);var i=u(V);W=y("pageX",e)-i.left,Z=y("pageY",e)-i.top,w.add(ie||V,"gu-transit"),H(),B(e)}}}function _(e){if(!(le.dragging&&K||n(e))){for(var t=e;v(e)&&!1===n(v(e));){if(ae.invalid(e,t))return;if(!(e=v(e)))return}var r=v(e);if(r&&!ae.invalid(e,t)){if(ae.moves(e,r,t,g(e)))return{item:e,source:r}}}}function L(e){return!!_(e)}function M(e){var t=_(e);t&&I(t)}function I(e){$(e.item,e.source)&&(ie=e.item.cloneNode(!0),le.emit("cloned",ie,e.item,"copy")),G=e.source,V=e.item,ne=re=g(e.item),le.dragging=!0,le.emit("drag",V,G)}function N(){return!1}function j(){if(le.dragging){var e=ie||V;q(e,v(e))}}function A(){ue=!1,c(!0),p(!0)}function P(e){if(A(),le.dragging){var t=ie||V,n=y("clientX",e),r=y("clientY",e),i=a(K,n,r),o=X(i,n,r);o&&(ie&&ae.copySortSource||!ie||o!==G)?q(t,o):ae.removeOnSpill?R():z()}}function q(e,t){var n=v(e);ie&&ae.copySortSource&&t===G&&n.removeChild(V),D(t)?le.emit("cancel",e,G,G):le.emit("drop",e,t,G,re),k()}function R(){if(le.dragging){var e=ie||V,t=v(e);t&&t.removeChild(e),le.emit(ie?"cancel":"remove",e,t,G),k()}}function z(e){if(le.dragging){var t=arguments.length>0?e:ae.revertOnSpill,n=ie||V,r=v(n),i=D(r);!1===i&&t&&(ie?r&&r.removeChild(ie):G.insertBefore(n,ne)),i||t?le.emit("cancel",n,G,G):le.emit("drop",n,r,G,re),k()}}function k(){var e=ie||V;A(),J(),e&&w.rm(e,"gu-transit"),oe&&clearTimeout(oe),le.dragging=!1,ce&&le.emit("out",e,ce,G),le.emit("dragend",e),G=V=ie=ne=re=oe=ce=null}function D(e,t){var n;return n=void 0!==t?t:K?re:g(ie||V),e===G&&n===ne}function X(e,t,r){for(var i=e;i&&!function(){if(!1===n(i))return!1;var o=Q(i,e),u=U(i,o,t,r);return!!D(i,u)||ae.accepts(V,i,G,u)}();)i=v(i);return i}function B(e){function t(e){le.emit(e,u,ce,G)}if(K){e.preventDefault();var n=y("clientX",e),r=y("clientY",e),i=n-W,o=r-Z;K.style.left=i+"px",K.style.top=o+"px";var u=ie||V,c=a(K,n,r),l=X(c,n,r),s=null!==l&&l!==ce;(s||null===l)&&(function(){ce&&t("out")}(),ce=l,function(){s&&t("over")}());var f=v(u);if(l===G&&ie&&!ae.copySortSource)return void(f&&f.removeChild(u));var d,m=Q(l,c);if(null!==m)d=U(l,m,n,r);else{if(!0!==ae.revertOnSpill||ie)return void(ie&&f&&f.removeChild(u));d=ne,l=G}(null===d&&s||d!==u&&d!==g(u))&&(re=d,l.insertBefore(u,d),le.emit("shadow",u,l,G))}}function Y(e){w.rm(e,"gu-hide")}function F(e){le.dragging&&w.add(e,"gu-hide")}function H(){if(!K){var e=V.getBoundingClientRect();K=V.cloneNode(!0),K.style.width=f(e)+"px",K.style.height=d(e)+"px",w.rm(K,"gu-transit"),w.add(K,"gu-mirror"),ae.mirrorContainer.appendChild(K),i(S,"add","mousemove",B),w.add(ae.mirrorContainer,"gu-unselectable"),le.emit("cloned",K,V,"mirror")}}function J(){K&&(w.rm(ae.mirrorContainer,"gu-unselectable"),i(S,"remove","mousemove",B),v(K).removeChild(K),K=null)}function Q(e,t){for(var n=t;n!==e&&v(n)!==e;)n=v(n);return n===S?null:n}function U(e,t,n,r){function i(e){return e?g(t):t}var o="horizontal"===ae.direction;return t!==e?function(){var e=t.getBoundingClientRect();return i(o?n>e.left+f(e)/2:r>e.top+d(e)/2)}():function(){var t,i,u,c=e.children.length;for(t=0;t<c;t++){if(i=e.children[t],u=i.getBoundingClientRect(),o&&u.left+u.width/2>n)return i;if(!o&&u.top+u.height/2>r)return i}return null}()}function $(e,t){return"boolean"==typeof ae.copy?ae.copy:ae.copy(e,t)}1===arguments.length&&!1===Array.isArray(e)&&(t=e,e=[]);var K,G,V,W,Z,ee,te,ne,re,ie,oe,ue,ce=null,ae=t||{};void 0===ae.moves&&(ae.moves=s),void 0===ae.accepts&&(ae.accepts=s),void 0===ae.invalid&&(ae.invalid=N),void 0===ae.containers&&(ae.containers=e||[]),void 0===ae.isContainer&&(ae.isContainer=l),void 0===ae.copy&&(ae.copy=!1),void 0===ae.copySortSource&&(ae.copySortSource=!1),void 0===ae.revertOnSpill&&(ae.revertOnSpill=!1),void 0===ae.removeOnSpill&&(ae.removeOnSpill=!1),void 0===ae.direction&&(ae.direction="vertical"),void 0===ae.ignoreInputTextSelection&&(ae.ignoreInputTextSelection=!0),void 0===ae.mirrorContainer&&(ae.mirrorContainer=E.body);var le=b({containers:ae.containers,start:M,end:j,cancel:z,remove:R,destroy:h,canMove:L,dragging:!1});return!0===ae.removeOnSpill&&le.on("over",Y).on("out",F),r(),le}function i(e,n,r,i){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},u={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},c={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};t.navigator.pointerEnabled?T[n](e,u[r],i):t.navigator.msPointerEnabled?T[n](e,c[r],i):(T[n](e,o[r],i),T[n](e,r,i))}function o(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function u(e){var t=e.getBoundingClientRect();return{left:t.left+c("scrollLeft","pageXOffset"),top:t.top+c("scrollTop","pageYOffset")}}function c(e,n){return void 0!==t[n]?t[n]:S.clientHeight?S[e]:E.body[e]}function a(e,t,n){var r,i=e||{},o=i.className;return i.className+=" gu-hide",r=E.elementFromPoint(t,n),i.className=o,r}function l(){return!1}function s(){return!0}function f(e){return e.width||e.right-e.left}function d(e){return e.height||e.bottom-e.top}function v(e){return e.parentNode===E?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||p(e)}function p(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||p(v(e))))}function g(e){return e.nextElementSibling||function(){var t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t}()}function h(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function y(e,t){var n=h(t),r={pageX:"clientX",pageY:"clientY"};return e in r&&!(e in n)&&r[e]in n&&(e=r[e]),n[e]}var b=n(7),T=n(14),w=n(17),E=document,S=E.documentElement;e.exports=r}).call(t,n(0))},function(e,t,n){"use strict";var r=n(8),i=n(9);e.exports=function(e,t){var n=t||{},o={};return void 0===e&&(e={}),e.on=function(t,n){return o[t]?o[t].push(n):o[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var r=arguments.length;if(1===r)delete o[t];else if(0===r)o={};else{var i=o[t];if(!i)return e;i.splice(i.indexOf(n),1)}return e},e.emit=function(){var t=r(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var u=(o[t]||[]).slice(0);return function(){var o=r(arguments),c=this||e;if("error"===t&&!1!==n.throws&&!u.length)throw 1===o.length?o[0]:o;return u.forEach(function(r){n.async?i(r,o,c):r.apply(c,o),r._once&&e.off(t,r)}),e}},e}},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){"use strict";var r=n(10);e.exports=function(e,t,n){e&&r(function(){e.apply(n||null,t||[])})}},function(e,t,n){(function(t){var n,r="function"==typeof t;n=r?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(11).setImmediate)},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(12),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return l[a]=r,c(a),a++}function i(e){delete l[e]}function o(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function u(e){if(s)setTimeout(u,0,e);else{var t=l[e];if(t){s=!0;try{o(t)}finally{i(e),s=!1}}}}if(!e.setImmediate){var c,a=1,l={},s=!1,f=e.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(e);d=d&&d.setTimeout?d:e,"[object process]"==={}.toString.call(e.process)?function(){c=function(e){t.nextTick(function(){u(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&u(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),c=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){u(e.data)},c=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;c=function(t){var n=f.createElement("script");n.onreadystatechange=function(){u(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){c=function(e){setTimeout(u,0,e)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(0),n(13))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(s===setTimeout)return setTimeout(e,0);if((s===n||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){p&&v&&(p=!1,v.length?m=v.concat(m):g=-1,m.length&&c())}function c(){if(!p){var e=i(u);p=!0;for(var t=m.length;t;){for(v=m,m=[];++g<t;)v&&v[g].run();g=-1,t=m.length}v=null,p=!1,o(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var s,f,d=e.exports={};!function(){try{s="function"==typeof setTimeout?setTimeout:n}catch(e){s=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var v,m=[],p=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new a(e,t)),1!==m.length||p||i(c)},a.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){function r(e,t,n,r){return e.addEventListener(t,n,r)}function i(e,t,n){return e.attachEvent("on"+t,l(e,t,n))}function o(e,t,n,r){return e.removeEventListener(t,n,r)}function u(e,t,n){var r=s(e,t,n);if(r)return e.detachEvent("on"+t,r)}function c(e,t,n){var r=-1===v.indexOf(t)?function(){return new d(t,{detail:n})}():function(){var e;return m.createEvent?(e=m.createEvent("Event"),e.initEvent(t,!0,!0)):m.createEventObject&&(e=m.createEventObject()),e}();e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+t,r)}function a(e,n,r){return function(n){var i=n||t.event;i.target=i.target||i.srcElement,i.preventDefault=i.preventDefault||function(){i.returnValue=!1},i.stopPropagation=i.stopPropagation||function(){i.cancelBubble=!0},i.which=i.which||i.keyCode,r.call(e,i)}}function l(e,t,n){var r=s(e,t,n)||a(e,t,n);return h.push({wrapper:r,element:e,type:t,fn:n}),r}function s(e,t,n){var r=f(e,t,n);if(r){var i=h[r].wrapper;return h.splice(r,1),i}}function f(e,t,n){var r,i;for(r=0;r<h.length;r++)if(i=h[r],i.element===e&&i.type===t&&i.fn===n)return r}var d=n(15),v=n(16),m=t.document,p=r,g=o,h=[];t.addEventListener||(p=i,g=u),e.exports={add:p,remove:g,fabricate:c}}).call(t,n(0))},function(e,t,n){(function(t){var n=t.CustomEvent;e.exports=function(){try{var e=new n("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}()?n:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(t,n(0))},function(e,t,n){"use strict";(function(t){var n=[],r="",i=/^on/;for(r in t)i.test(r)&&n.push(r.slice(2));e.exports=n}).call(t,n(0))},function(e,t,n){"use strict";function r(e){var t=u[e];return t?t.lastIndex=0:u[e]=t=new RegExp(c+e+a,"g"),t}function i(e,t){var n=e.className;n.length?r(t).test(n)||(e.className+=" "+t):e.className=t}function o(e,t){e.className=e.className.replace(r(t)," ").trim()}var u={},c="(?:^|\\s)",a="(?:\\s|$)";e.exports={add:i,rm:o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.querySelector(t),r=function(){var e=n.value;return e?JSON.parse(e):[]},i=function(t){var n=t.length,r=e.querySelector(".customizer-curation-list-input"),i=r.getAttribute("data-max");i&&(n<parseInt(i,10)?r.removeAttribute("disabled"):r.setAttribute("disabled",!0))},o=function(e){var t=r();return t=t.concat(e),i(t),t},u=function(e,t){var n=r();return n=t(n,e),i(n),n};return{add:function(e){n.value=JSON.stringify(o(e))},remove:function(e,t){n.value=JSON.stringify(u(e,t))},update:function(e){n.value=JSON.stringify(e)},el:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.checkLimit=function(e){var t=e.querySelectorAll("li"),n=e.querySelector(".customizer-curation-list-input"),r=n.getAttribute("data-max");r&&(t.length<parseInt(r,10)?n.removeAttribute("disabled"):n.setAttribute("disabled",!0))};t.removeItems=function(e,t,n){return function(i){e.remove(i,t),r(n),jQuery(e.el).trigger("change")}},t.dragItems=function(e,t){return function(n,r){var i=t(n,r);e.update(i),jQuery(e.el).trigger("change")}},t.onDragObject=function(e,t){return[].reduce.call(t,function(e,t){var n={id:t.dataset.id,title:t.querySelector("span").innerHTML};return e.concat([n])},[])},t.onDragText=function(e,t){return[].reduce.call(t,function(e,t){var n=t.querySelector("span").innerHTML;return e.concat([n])},[])},t.onRemoveObject=function(e,t){return e.filter(function(e){return e.title!==t})},t.onRemoveText=function(e,t){return e.filter(function(e){return e!==t})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.querySelectorAll(e.parent);if(!t)return!1;[].forEach.call(t,function(t){var n=t.querySelector(e.hidden);(0,i.default)(e.input,e.endpoint,function(e,t){n.value=JSON.stringify(e),jQuery(n).trigger("change")},function(){n.value="",jQuery(n).trigger("change")})})};var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vaW5kZXguYnVuZGxlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBiNDQ1N2Y3ODIyM2ZlZjRkMTViZSIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL2F1dG9zdWdnZXN0LmpzIiwid2VicGFjazovLy8uL2luZGV4LmpzIiwid2VicGFjazovLy8uL2F1dG9zdWdnZXN0LWxpc3QuanMiLCJ3ZWJwYWNrOi8vLy4vbGlzdC5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9kcmFndWxhL2RyYWd1bGEuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy90d2VudHlzZXZlbnRlZW4vdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY29udHJhL2VtaXR0ZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy90d2VudHlzZXZlbnRlZW4vdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvYXRvYS9hdG9hLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL2NvbnRyYS9kZWJvdW5jZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy90aWNreS90aWNreS1icm93c2VyLmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3RpbWVycy1icm93c2VyaWZ5L21haW4uanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy90d2VudHlzZXZlbnRlZW4vdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qcyIsIndlYnBhY2s6Ly8vL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy90d2VudHlzZXZlbnRlZW4vdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY3Jvc3N2ZW50L3NyYy9jcm9zc3ZlbnQuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy90d2VudHlzZXZlbnRlZW4vdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY3VzdG9tLWV2ZW50L2luZGV4LmpzIiwid2VicGFjazovLy8vVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL2Nyb3NzdmVudC9zcmMvZXZlbnRtYXAuanMiLCJ3ZWJwYWNrOi8vLy9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy90d2VudHlzZXZlbnRlZW4vdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvZHJhZ3VsYS9jbGFzc2VzLmpzIiwid2VicGFjazovLy8uL3NlcmlhbGl6ZWQtaW5wdXQuanMiLCJ3ZWJwYWNrOi8vLy4vdXRpbGl0aWVzLmpzIiwid2VicGFjazovLy8uL2F1dG8taXRlbS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiZyIsInRoaXMiLCJGdW5jdGlvbiIsImV2YWwiLCJlIiwid2luZG93IiwidmFsdWUiLCJkZWZhdWx0IiwiYXV0b3N1Z2dlc3QiLCJlbmRwb2ludCIsIm9uU2VsZWN0Iiwib25FbXB0eSIsInhociIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJsZW5ndGgiLCJjbGFzc0xpc3QiLCJhZGQiLCJnZXRPcHRpb25zIiwidXBkYXRlT3B0aW9ucyIsIm9uQXV0b1N1Z2dlc3RJbnB1dCIsImlzSlNPTiIsInN0ciIsIkpTT04iLCJwYXJzZSIsImJ1aWxkUXVlcnkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJ0b0xvd2VyQ2FzZSIsImlucHV0IiwiaW5wdXRWYWx1ZSIsImxpc3ROYW1lIiwiZ2V0QXR0cmlidXRlIiwibGlzdE9wdGlvbnMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiY2hpbGROb2RlcyIsIm1hdGNoIiwicmVkdWNlIiwiYWNjIiwib3B0aW9uIiwiY29uY2F0IiwiaWQiLCJkYXRhc2V0IiwidGl0bGUiLCJjYWxsYmFjayIsInF1ZXJ5IiwidXJsIiwiYWJvcnQiLCJYTUxIdHRwUmVxdWVzdCIsImV2dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInJlYWR5U3RhdGUiLCJET05FIiwic3RhdHVzIiwicmVzdWx0cyIsInJlc3BvbnNlVGV4dCIsIm1lc3NhZ2UiLCJvcGVuIiwic2VuZCIsImNyZWF0ZU9wdGlvbiIsInJlbmRlcmVkIiwiY3JlYXRlT3B0aW9ucyIsImRhdGFsaXN0IiwibmV3T3B0aW9ucyIsInJlc3VsdCIsInJlbW92ZSIsImlubmVySFRNTCIsImVycm9yIiwicmVzcG9uc2UiLCJjb25zb2xlIiwid2FybiIsIkFycmF5IiwiaXNBcnJheSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfaW5kZXgiLCJfYXV0b3N1Z2dlc3RMaXN0IiwiX2F1dG9zdWdnZXN0TGlzdDIiLCJfYXV0b0l0ZW0iLCJfYXV0b0l0ZW0yIiwiY3JlYXRlQXV0b1N1Z2dlc3RJdGVtIiwicGFyZW50IiwibGlzdCIsImhpZGRlbiIsImxpc3RUZW1wbGF0ZSIsIkN1c3RvbWl6ZXJDdXJhdGlvbiIsImJhc2VVUkwiLCJyZXNvdXJjZSIsImFyZ3MiLCJmaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImF1dG9MaXN0IiwiSGlkZGVuIiwiX3NlcmlhbGl6ZWRJbnB1dDIiLCJoaWRkZW5FbCIsInF1ZXJ5U2VsZWN0b3IiLCJfdXRpbGl0aWVzIiwicmVtb3ZlSXRlbXMiLCJvblJlbW92ZU9iamVjdCIsImRyYWciLCJkcmFnSXRlbXMiLCJvbkRyYWdPYmplY3QiLCJMaXN0IiwiX2xpc3QyIiwiYXNzaWduIiwib25EcmFnIiwib25SZW1vdmUiLCJfYXV0b3N1Z2dlc3QyIiwiY2hlY2tMaW1pdCIsImpRdWVyeSIsInRyaWdnZXIiLCJfbGlzdCIsIl9hdXRvc3VnZ2VzdCIsIl9zZXJpYWxpemVkSW5wdXQiLCJyZWdpc3RlckRyYWdFdmVudHMiLCJyZWdpc3RlclJlbW92ZUV2ZW50cyIsImh0bWwiLCJsaXN0SXRlbSIsImNyZWF0ZVJhbmdlIiwiY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50IiwiYXBwZW5kQ2hpbGQiLCJfZHJhZ3VsYSIsIl9kcmFndWxhMiIsImxpc3RJdGVtcyIsInRhZ05hbWUiLCJjbG9zZXN0IiwicmVtb3ZlQ2hpbGQiLCJvbiIsImVsIiwiZ2xvYmFsIiwiZHJhZ3VsYSIsImluaXRpYWxDb250YWluZXJzIiwib3B0aW9ucyIsImlzQ29udGFpbmVyIiwiZHJha2UiLCJjb250YWluZXJzIiwiaW5kZXhPZiIsImV2ZW50cyIsIm9wIiwidG91Y2h5IiwiZG9jdW1lbnRFbGVtZW50IiwiZ3JhYiIsInJlbGVhc2UiLCJldmVudHVhbE1vdmVtZW50cyIsInN0YXJ0QmVjYXVzZU1vdXNlTW92ZWQiLCJtb3ZlbWVudHMiLCJjcm9zc3ZlbnQiLCJwcmV2ZW50R3JhYmJlZCIsImRlc3Ryb3kiLCJfZ3JhYmJlZCIsInByZXZlbnREZWZhdWx0IiwiX21vdmVYIiwiY2xpZW50WCIsIl9tb3ZlWSIsImNsaWVudFkiLCJ3aGljaE1vdXNlQnV0dG9uIiwibWV0YUtleSIsImN0cmxLZXkiLCJpdGVtIiwiY29udGV4dCIsImNhblN0YXJ0IiwidHlwZSIsImlzSW5wdXQiLCJmb2N1cyIsImlnbm9yZUlucHV0VGV4dFNlbGVjdGlvbiIsImdldENvb3JkIiwiZG9jIiwiZWxlbWVudEZyb21Qb2ludCIsImdyYWJiZWQiLCJlbmQiLCJzdGFydCIsIm9mZnNldCIsImdldE9mZnNldCIsIl9pdGVtIiwiX29mZnNldFgiLCJsZWZ0IiwiX29mZnNldFkiLCJ0b3AiLCJjbGFzc2VzIiwiX2NvcHkiLCJyZW5kZXJNaXJyb3JJbWFnZSIsImRyYWdnaW5nIiwiX21pcnJvciIsImhhbmRsZSIsImdldFBhcmVudCIsImludmFsaWQiLCJzb3VyY2UiLCJtb3ZlcyIsIm5leHRFbCIsImNhbk1vdmUiLCJtYW51YWxTdGFydCIsImlzQ29weSIsImNsb25lTm9kZSIsImVtaXQiLCJfc291cmNlIiwiX2luaXRpYWxTaWJsaW5nIiwiX2N1cnJlbnRTaWJsaW5nIiwiaW52YWxpZFRhcmdldCIsImRyb3AiLCJ1bmdyYWIiLCJlbGVtZW50QmVoaW5kQ3Vyc29yIiwiZ2V0RWxlbWVudEJlaGluZFBvaW50IiwiZHJvcFRhcmdldCIsImZpbmREcm9wVGFyZ2V0IiwiY29weVNvcnRTb3VyY2UiLCJyZW1vdmVPblNwaWxsIiwiY2FuY2VsIiwiaXNJbml0aWFsUGxhY2VtZW50IiwiY2xlYW51cCIsInJldmVydCIsInJldmVydHMiLCJhcmd1bWVudHMiLCJyZXZlcnRPblNwaWxsIiwiaW5pdGlhbCIsImluc2VydEJlZm9yZSIsInJlbW92ZU1pcnJvckltYWdlIiwicm0iLCJfcmVuZGVyVGltZXIiLCJjbGVhclRpbWVvdXQiLCJfbGFzdERyb3BUYXJnZXQiLCJzaWJsaW5nIiwiaW1tZWRpYXRlIiwiZ2V0SW1tZWRpYXRlQ2hpbGQiLCJyZWZlcmVuY2UiLCJnZXRSZWZlcmVuY2UiLCJhY2NlcHRzIiwibW92ZWQiLCJ4IiwieSIsInN0eWxlIiwiY2hhbmdlZCIsInNwaWxsT3ZlciIsInNwaWxsT3V0IiwicmVjdCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIndpZHRoIiwiZ2V0UmVjdFdpZHRoIiwiaGVpZ2h0IiwiZ2V0UmVjdEhlaWdodCIsIm1pcnJvckNvbnRhaW5lciIsInJlc29sdmUiLCJhZnRlciIsImhvcml6b250YWwiLCJkaXJlY3Rpb24iLCJsZW4iLCJjaGlsZHJlbiIsImNvbnRhaW5lciIsImNvcHkiLCJhbHdheXMiLCJuZXZlciIsImJvZHkiLCJlbWl0dGVyIiwiZm4iLCJ0b3VjaCIsIm1vdXNldXAiLCJtb3VzZWRvd24iLCJtb3VzZW1vdmUiLCJwb2ludGVycyIsIm1pY3Jvc29mdCIsIm5hdmlnYXRvciIsInBvaW50ZXJFbmFibGVkIiwibXNQb2ludGVyRW5hYmxlZCIsInRvdWNoZXMiLCJ3aGljaCIsImJ1dHRvbnMiLCJidXR0b24iLCJnZXRTY3JvbGwiLCJzY3JvbGxQcm9wIiwib2Zmc2V0UHJvcCIsImNsaWVudEhlaWdodCIsInBvaW50Iiwic3RhdGUiLCJjbGFzc05hbWUiLCJyaWdodCIsImJvdHRvbSIsInBhcmVudE5vZGUiLCJpc0VkaXRhYmxlIiwiY29udGVudEVkaXRhYmxlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsImdldEV2ZW50SG9zdCIsInRhcmdldFRvdWNoZXMiLCJjaGFuZ2VkVG91Y2hlcyIsImNvb3JkIiwiaG9zdCIsIm1pc3NNYXAiLCJwYWdlWCIsInBhZ2VZIiwiYXRvYSIsImRlYm91bmNlIiwidGhpbmciLCJvcHRzIiwidW5kZWZpbmVkIiwicHVzaCIsIm9uY2UiLCJfb25jZSIsIm9mZiIsImV0Iiwic3BsaWNlIiwiZW1pdHRlclNuYXBzaG90Iiwic2hpZnQiLCJhcHBseSIsInNsaWNlIiwiY3R4IiwidGhyb3dzIiwibGlzdGVuIiwiYXN5bmMiLCJhIiwidGlja3kiLCJzZXRJbW1lZGlhdGUiLCJ0aWNrIiwic2kiLCJzZXRUaW1lb3V0IiwiVGltZW91dCIsImNsZWFyRm4iLCJfaWQiLCJfY2xlYXJGbiIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInRpbWVvdXQiLCJjbG9zZSIsInVucmVmIiwicmVmIiwiZW5yb2xsIiwibXNlY3MiLCJfaWRsZVRpbWVvdXRJZCIsIl9pZGxlVGltZW91dCIsInVuZW5yb2xsIiwiX3VucmVmQWN0aXZlIiwiYWN0aXZlIiwiX29uVGltZW91dCIsImNsZWFySW1tZWRpYXRlIiwicHJvY2VzcyIsInRhc2siLCJ0YXNrc0J5SGFuZGxlIiwibmV4dEhhbmRsZSIsInJlZ2lzdGVySW1tZWRpYXRlIiwicnVuIiwicnVuSWZQcmVzZW50IiwiY3VycmVudGx5UnVubmluZ0FUYXNrIiwiYXR0YWNoVG8iLCJnZXRQcm90b3R5cGVPZiIsInRvU3RyaW5nIiwibmV4dFRpY2siLCJwb3N0TWVzc2FnZSIsImltcG9ydFNjcmlwdHMiLCJwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzIiwib2xkT25NZXNzYWdlIiwib25tZXNzYWdlIiwibWVzc2FnZVByZWZpeCIsIk1hdGgiLCJyYW5kb20iLCJvbkdsb2JhbE1lc3NhZ2UiLCJldmVudCIsImRhdGEiLCJhdHRhY2hFdmVudCIsIk1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsInBvcnQxIiwicG9ydDIiLCJjcmVhdGVFbGVtZW50Iiwic2NyaXB0Iiwic2VsZiIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwiY2FjaGVkU2V0VGltZW91dCIsInJ1bkNsZWFyVGltZW91dCIsIm1hcmtlciIsImNhY2hlZENsZWFyVGltZW91dCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJwcmVwZW5kTGlzdGVuZXIiLCJwcmVwZW5kT25jZUxpc3RlbmVyIiwibGlzdGVuZXJzIiwiYmluZGluZyIsImN3ZCIsImNoZGlyIiwiZGlyIiwidW1hc2siLCJhZGRFdmVudEVhc3kiLCJjYXB0dXJpbmciLCJhZGRFdmVudEhhcmQiLCJ3cmFwIiwicmVtb3ZlRXZlbnRFYXN5IiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50SGFyZCIsImxpc3RlbmVyIiwidW53cmFwIiwiZGV0YWNoRXZlbnQiLCJmYWJyaWNhdGVFdmVudCIsIm1vZGVsIiwiZXZlbnRtYXAiLCJjdXN0b21FdmVudCIsImRldGFpbCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJkaXNwYXRjaEV2ZW50IiwiZmlyZUV2ZW50Iiwid3JhcHBlckZhY3RvcnkiLCJvcmlnaW5hbEV2ZW50Iiwic3JjRWxlbWVudCIsInJldHVyblZhbHVlIiwic3RvcFByb3BhZ2F0aW9uIiwiY2FuY2VsQnViYmxlIiwia2V5Q29kZSIsIndyYXBwZXIiLCJoYXJkQ2FjaGUiLCJlbGVtZW50IiwiZmluZCIsImFkZEV2ZW50IiwicmVtb3ZlRXZlbnQiLCJmYWJyaWNhdGUiLCJOYXRpdmVDdXN0b21FdmVudCIsIkN1c3RvbUV2ZW50IiwiZm9vIiwicGFyYW1zIiwiaW5pdEN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJCb29sZWFuIiwiZXZlbnRuYW1lIiwicm9uIiwidGVzdCIsImxvb2t1cENsYXNzIiwiY2FjaGVkIiwiY2FjaGUiLCJsYXN0SW5kZXgiLCJSZWdFeHAiLCJhZGRDbGFzcyIsImN1cnJlbnQiLCJybUNsYXNzIiwicmVwbGFjZSIsInRyaW0iLCJoaWRkZW5JbnB1dCIsImdldEN1cnJlbnRWYWx1ZSIsImN1cnJlbnRWYWx1ZSIsImNvdW50IiwiZmllbGQiLCJtYXgiLCJwYXJzZUludCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImFkZFZhbHVlIiwicmVtb3ZlVmFsdWUiLCJzdHJpbmdpZnkiLCJ1cGRhdGUiLCJ2YWx1ZXMiLCJvbkRyYWdUZXh0IiwibmV3VmFsdWUiLCJmaWx0ZXIiLCJvblJlbW92ZVRleHQiLCJhdXRvSXRlbSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFE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QUNqQyxTQUFVdkYsT0FBT3pELEtBQU1nSixFQUFXLFNBQUV0RixFQUFLZ0YsR0FDeEMsR0FBTWhILEdBQVFnSCxFQUFTdEIsY0FBZSxRQUFTOUIsU0FFL0MsT0FBTzVCLEdBQUlFLFFBQVNsQyxVQUlUNkYsaUJBQWlCLFNBQUVxVyxFQUFjYSxHQUM3QyxNQUFPYixHQUFhYyxPQUFRLFNBQUVwQixHQUFGLE1BQWVBLEdBQVF2WixRQUFVMGEsS0FHakRFLGVBQWUsU0FBRWYsRUFBY2EsR0FDM0MsTUFBT2IsR0FBYWMsT0FBUSxTQUFFcEIsR0FBRixNQUFlQSxLQUFZbUIsTXBCbTFEbEQsU0FBVTVlLEVBQVFELEVBQVNILEdBRWpDLFlBR0FjLFFBQU9DLGVBQWVaLEVBQVMsY0FDOUI4QixPQUFPLElBR1I5QixFQUFRK0IsUXFCaDVETyxTQUFXaUYsR0FDekIsR0FBTUMsR0FBU3hELFNBQVN5RCxpQkFBa0JGLEVBQUtQLE9BRS9DLEtBQU9RLEVBQ04sT0FBTyxLQUdMRSxRQUFRL0csS0FBTTZHLEVBQVEsU0FBRStYLEdBQzFCLEdBQU1yWSxHQUFTcVksRUFBU3hYLGNBQWVSLEVBQUtMLFNBRTVDLEVBQUF5QixFQUFBckcsU0FDQ2lGLEVBQUs1RCxNQUNMNEQsRUFBSy9FLFNBQ0wsU0FBRUgsRUFBT3NCLEdBQ1J1RCxFQUFPN0UsTUFBUWlCLEtBQUswYixVQUFXM2MsR0FDL0J3RyxPQUFRM0IsR0FBUzRCLFFBQVMsV0FFM0IsV0FDQzVCLEVBQU83RSxNQUFRLEdBQ2Z3RyxPQUFRM0IsR0FBUzRCLFFBQVMsY0FyQjlCLElBQUFFLEdBQUE1SSxFQUFBLEdyQnc2REl1SSxFQUVKLFNBQWdDbEMsR0FBTyxNQUFPQSxJQUFPQSxFQUFJakYsV0FBYWlGLEdBQVFuRSxRQUFTbUUsSUFGNUN1QyIsImZpbGUiOiJpbmRleC5idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4vKioqKioqLyBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4vKioqKioqLyBcdFx0XHRcdGdldDogZ2V0dGVyXG4vKioqKioqLyBcdFx0XHR9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2Rpc3QvXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbnZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGF1dG9zdWdnZXN0LCBlbmRwb2ludCwgb25TZWxlY3QsIG9uRW1wdHkpIHtcblxuXHRpZiAoIWF1dG9zdWdnZXN0KSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0dmFyIHhociA9IGZhbHNlO1xuXG5cdGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0XHRpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoID09PSAwICYmIG9uRW1wdHkpIHtcblx0XHRcdG9uRW1wdHkoKTtcblx0XHR9XG5cblx0XHRpZiAoZS50YXJnZXQudmFsdWUubGVuZ3RoIDwgMykge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGF1dG9zdWdnZXN0LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcblx0XHR4aHIgPSBnZXRPcHRpb25zKHhociwgdXBkYXRlT3B0aW9ucywgYXV0b3N1Z2dlc3QsIGVuZHBvaW50KTtcblx0fSk7XG5cdGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcblx0XHR2YXIgdmFsdWUgPSBvbkF1dG9TdWdnZXN0SW5wdXQoZSk7XG5cblx0XHRpZiAodmFsdWUpIHtcblx0XHRcdG9uU2VsZWN0KHZhbHVlLCBhdXRvc3VnZ2VzdCk7XG5cdFx0fVxuXHR9KTtcbn07XG5cbnZhciBpc0pTT04gPSBmdW5jdGlvbiBpc0pTT04oc3RyKSB7XG5cblx0aWYgKHR5cGVvZiBzdHIgIT09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHRyeSB7XG5cdFx0SlNPTi5wYXJzZShzdHIpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG59O1xuXG52YXIgYnVpbGRRdWVyeSA9IGZ1bmN0aW9uIGJ1aWxkUXVlcnkodmFsdWUpIHtcblx0cmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZS50b0xvd2VyQ2FzZSgpKTtcbn07XG5cbnZhciBvbkF1dG9TdWdnZXN0SW5wdXQgPSBmdW5jdGlvbiBvbkF1dG9TdWdnZXN0SW5wdXQoZSkge1xuXHR2YXIgaW5wdXQgPSBlLnRhcmdldDtcblx0dmFyIGlucHV0VmFsdWUgPSBpbnB1dC52YWx1ZTtcblx0dmFyIGxpc3ROYW1lID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsaXN0Jyk7XG5cdHZhciBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGxpc3ROYW1lKS5jaGlsZE5vZGVzO1xuXG5cdHZhciBtYXRjaCA9IFtdLnJlZHVjZS5jYWxsKGxpc3RPcHRpb25zLCBmdW5jdGlvbiAoYWNjLCBvcHRpb24pIHtcblx0XHRpZiAob3B0aW9uLnZhbHVlID09PSBpbnB1dFZhbHVlKSB7XG5cdFx0XHRyZXR1cm4gYWNjLmNvbmNhdCh7XG5cdFx0XHRcdGlkOiBvcHRpb24uZGF0YXNldC5pZCxcblx0XHRcdFx0dGl0bGU6IG9wdGlvbi52YWx1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdHJldHVybiBhY2M7XG5cdH0sIFtdKTtcblxuXHRyZXR1cm4gbWF0Y2gubGVuZ3RoID09PSAwID8gZmFsc2UgOiBtYXRjaFswXTtcbn07XG5cbnZhciBnZXRPcHRpb25zID0gZnVuY3Rpb24gZ2V0T3B0aW9ucyh4aHIsIGNhbGxiYWNrLCBpbnB1dCwgZW5kcG9pbnQpIHtcblx0dmFyIHF1ZXJ5ID0gYnVpbGRRdWVyeShpbnB1dC52YWx1ZSk7XG5cdHZhciB1cmwgPSBlbmRwb2ludCArIHF1ZXJ5O1xuXG5cdGlmICh4aHIpIHtcblx0XHR4aHIuYWJvcnQoKTtcblx0fVxuXG5cdHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG5cdHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKGV2dCkge1xuXHRcdGNhbGxiYWNrKGZhbHNlLCBldnQpO1xuXHR9LCBmYWxzZSk7XG5cblx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUgJiYgeGhyLnN0YXR1cyA9PT0gMjAwKSB7XG5cdFx0XHRjYWxsYmFjayhmYWxzZSwgeyByZXN1bHRzOiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLCBpbnB1dDogaW5wdXQgfSk7XG5cdFx0fSBlbHNlIGlmICh4aHIucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSAmJiB4aHIuc3RhdHVzID49IDQwMCkge1xuXHRcdFx0aWYgKHhoci5yZXNwb25zZVRleHQgJiYgaXNKU09OKHhoci5yZXNwb25zZVRleHQpKSB7XG5cdFx0XHRcdGNhbGxiYWNrKHsgbWVzc2FnZTogSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSwgaW5wdXQ6IGlucHV0IH0sIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cblx0eGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24gKGV2dCkge1xuXHRcdGNhbGxiYWNrKGV2dCwgZmFsc2UpO1xuXHR9LCBmYWxzZSk7XG5cblx0eGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZnVuY3Rpb24gKGV2dCkge1xuXHRcdGNhbGxiYWNrKHRydWUsIGZhbHNlKTtcblx0fSwgZmFsc2UpO1xuXG5cdHhoci5vcGVuKCdHRVQnLCB1cmwsIHRydWUpO1xuXG5cdHhoci5zZW5kKCk7XG5cblx0cmV0dXJuIHhocjtcbn07XG5cbnZhciBjcmVhdGVPcHRpb24gPSBmdW5jdGlvbiBjcmVhdGVPcHRpb24odmFsdWUpIHtcblx0cmV0dXJuICc8b3B0aW9uIGRhdGEtaWQ9JyArIHZhbHVlLmlkICsgJyB2YWx1ZT1cIicgKyB2YWx1ZS50aXRsZS5yZW5kZXJlZCArICdcIj4nO1xufTtcblxudmFyIGNyZWF0ZU9wdGlvbnMgPSBmdW5jdGlvbiBjcmVhdGVPcHRpb25zKHJlc3VsdHMsIGlucHV0KSB7XG5cdHZhciBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgnbGlzdCcpO1xuXHR2YXIgZGF0YWxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChsaXN0TmFtZSk7XG5cblx0dmFyIG5ld09wdGlvbnMgPSByZXN1bHRzLnJlZHVjZShmdW5jdGlvbiAoYWNjLCByZXN1bHQpIHtcblx0XHR2YXIgb3B0aW9uID0gY3JlYXRlT3B0aW9uKHJlc3VsdCk7XG5cblx0XHRyZXR1cm4gYWNjLmNvbmNhdChvcHRpb24pO1xuXHR9LCAnJyk7XG5cblx0aW5wdXQuY2xhc3NMaXN0LnJlbW92ZSgnc2hvdycpO1xuXHRkYXRhbGlzdC5pbm5lckhUTUwgPSBuZXdPcHRpb25zO1xufTtcblxudmFyIHVwZGF0ZU9wdGlvbnMgPSBmdW5jdGlvbiB1cGRhdGVPcHRpb25zKGVycm9yLCByZXNwb25zZSkge1xuXHRpZiAoZXJyb3IpIHtcblxuXHRcdGlmIChlcnJvciA9PT0gdHJ1ZSkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGVycm9yLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcblx0XHRjb25zb2xlLndhcm4oZXJyb3IpO1xuXHR9XG5cblx0aWYgKHJlc3BvbnNlKSB7XG5cdFx0aWYgKCFBcnJheS5pc0FycmF5KHJlc3BvbnNlLnJlc3VsdHMpKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Y3JlYXRlT3B0aW9ucyhyZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCk7XG5cdH1cbn07XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblxudmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cbnZhciBfYXV0b3N1Z2dlc3RMaXN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblxudmFyIF9hdXRvc3VnZ2VzdExpc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b3N1Z2dlc3RMaXN0KTtcblxudmFyIF9hdXRvSXRlbSA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXG52YXIgX2F1dG9JdGVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2F1dG9JdGVtKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIGNyZWF0ZUF1dG9TdWdnZXN0SXRlbSA9IGZ1bmN0aW9uIGNyZWF0ZUF1dG9TdWdnZXN0SXRlbSh2YWx1ZSkge1xuXHRyZXR1cm4gJzxsaSBjbGFzcz1cInRleHQtbGlzdC1pdGVtXCIgZGF0YS1pZD1cIicgKyB2YWx1ZS5pZCArICdcIj5cXG4gICAgICAgIDxzcGFuPicgKyB2YWx1ZS50aXRsZSArICc8L3NwYW4+XFxuICAgICAgICA8c3ZnIHZpZXdCb3g9XCIwIDAgMjAgMjBcIj5cXG4gICAgICAgICAgICA8cGF0aCBkPVwiTTEwIDJjNC40MiAwIDggMy41OCA4IDhzLTMuNTggOC04IDgtOC0zLjU4LTgtOCAzLjU4LThcXG5cXHRcXHRcXHQ4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cXG4gICAgICAgIDwvc3ZnPlxcbiAgICA8L2xpPic7XG59OyAvKiBlc2xpbnQgbm8tdW51c2VkLXZhcnM6IFtcImVycm9yXCIsIHsgXCJ2YXJzSWdub3JlUGF0dGVyblwiOiBcImJhc2VDc3NcIiB9XSAqL1xuLyogZ2xvYmFsIEN1c3RvbWl6ZXJDdXJhdGlvbiAqL1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuXHQoMCwgX2F1dG9zdWdnZXN0TGlzdDIuZGVmYXVsdCkoe1xuXHRcdHBhcmVudDogJy5jdXN0b21pemVyLWN1cmF0aW9uLWxpc3QnLFxuXHRcdGlucHV0OiAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1pbnB1dCcsXG5cdFx0bGlzdDogJy5jdXN0b21pemVyLWN1cmF0aW9uLWxpc3QtbGlzdCcsXG5cdFx0aGlkZGVuOiAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1oaWRkZW4nLFxuXHRcdGxpc3RUZW1wbGF0ZTogY3JlYXRlQXV0b1N1Z2dlc3RJdGVtLFxuXHRcdGVuZHBvaW50OiBDdXN0b21pemVyQ3VyYXRpb24uYmFzZVVSTCArICcvd3AtanNvbi93cC92Mi8nICsgQ3VzdG9taXplckN1cmF0aW9uLnJlc291cmNlICsgJz9zZWFyY2g9J1xuXHR9KTtcblxuXHQoMCwgX2F1dG9JdGVtMi5kZWZhdWx0KSh7XG5cdFx0cGFyZW50OiAnLmN1c3RvbWl6ZXItY3VyYXRpb24nLFxuXHRcdGlucHV0OiAnLmN1c3RvbWl6ZXItY3VyYXRpb24taW5wdXQnLFxuXHRcdGhpZGRlbjogJy5jdXN0b21pemVyLWN1cmF0aW9uLWhpZGRlbicsXG5cdFx0ZW5kcG9pbnQ6IEN1c3RvbWl6ZXJDdXJhdGlvbi5iYXNlVVJMICsgJy93cC1qc29uL3dwL3YyLycgKyBDdXN0b21pemVyQ3VyYXRpb24ucmVzb3VyY2UgKyAnP3NlYXJjaD0nXG5cdH0pO1xufSk7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG4vLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGFyZ3MpIHtcblx0dmFyIGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoYXJncy5wYXJlbnQpO1xuXG5cdGlmICghZmllbGRzKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0W10uZm9yRWFjaC5jYWxsKGZpZWxkcywgZnVuY3Rpb24gKGF1dG9MaXN0KSB7XG5cdFx0dmFyIEhpZGRlbiA9ICgwLCBfc2VyaWFsaXplZElucHV0Mi5kZWZhdWx0KShhdXRvTGlzdCwgYXJncy5oaWRkZW4pO1xuXHRcdHZhciBoaWRkZW5FbCA9IGF1dG9MaXN0LnF1ZXJ5U2VsZWN0b3IoYXJncy5oaWRkZW4pO1xuXHRcdHZhciByZW1vdmUgPSAoMCwgX3V0aWxpdGllcy5yZW1vdmVJdGVtcykoSGlkZGVuLCBfdXRpbGl0aWVzLm9uUmVtb3ZlT2JqZWN0LCBhdXRvTGlzdCk7XG5cdFx0dmFyIGRyYWcgPSAoMCwgX3V0aWxpdGllcy5kcmFnSXRlbXMpKEhpZGRlbiwgX3V0aWxpdGllcy5vbkRyYWdPYmplY3QpO1xuXHRcdHZhciBMaXN0ID0gKDAsIF9saXN0Mi5kZWZhdWx0KShhdXRvTGlzdCwgT2JqZWN0LmFzc2lnbihhcmdzLCB7IG9uRHJhZzogZHJhZywgb25SZW1vdmU6IHJlbW92ZSB9KSk7XG5cblx0XHQoMCwgX2F1dG9zdWdnZXN0Mi5kZWZhdWx0KShhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKGFyZ3MuaW5wdXQpLCBhcmdzLmVuZHBvaW50LCBmdW5jdGlvbiAodmFsdWUsIGlucHV0KSB7XG5cdFx0XHRMaXN0LmFkZCh2YWx1ZSk7XG5cdFx0XHRpbnB1dC52YWx1ZSA9ICcnO1xuXHRcdFx0SGlkZGVuLmFkZCh2YWx1ZSk7XG5cdFx0XHQoMCwgX3V0aWxpdGllcy5jaGVja0xpbWl0KShhdXRvTGlzdCk7XG5cdFx0XHRqUXVlcnkoaGlkZGVuRWwpLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0pO1xuXHR9KTtcbn07XG5cbnZhciBfbGlzdCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfbGlzdDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9saXN0KTtcblxudmFyIF9hdXRvc3VnZ2VzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfYXV0b3N1Z2dlc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b3N1Z2dlc3QpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpO1xuXG52YXIgX3NlcmlhbGl6ZWRJbnB1dDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXJpYWxpemVkSW5wdXQpO1xuXG52YXIgX3V0aWxpdGllcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTkpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKHBhcmVudCwgYXJncykge1xuXHR2YXIgbGlzdCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGFyZ3MubGlzdCk7XG5cblx0cmVnaXN0ZXJEcmFnRXZlbnRzKGxpc3QsIGFyZ3Mub25EcmFnKTtcblx0cmVnaXN0ZXJSZW1vdmVFdmVudHMobGlzdCwgYXJncy5vblJlbW92ZSk7XG5cblx0cmV0dXJuIHtcblx0XHRhZGQ6IGZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuXHRcdFx0dmFyIGh0bWwgPSBhcmdzLmxpc3RUZW1wbGF0ZSh2YWx1ZSk7XG5cdFx0XHR2YXIgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChodG1sKTtcblxuXHRcdFx0bGlzdC5hcHBlbmRDaGlsZChsaXN0SXRlbSk7XG5cdFx0fVxuXHR9O1xufTtcblxudmFyIF9kcmFndWxhID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9kcmFndWxhMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RyYWd1bGEpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG52YXIgcmVnaXN0ZXJSZW1vdmVFdmVudHMgPSBmdW5jdGlvbiByZWdpc3RlclJlbW92ZUV2ZW50cyhsaXN0LCBvblJlbW92ZSkge1xuXHR2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG5cdGxpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdHZhciB0YXJnZXQgPSBlLnRhcmdldC50YWdOYW1lID09PSAnc3ZnJyA/IGUudGFyZ2V0IDogZS50YXJnZXQuY2xvc2VzdCgnc3ZnJyk7XG5cblx0XHRpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdzdmcnKSB7XG5cdFx0XHR2YXIgbGlzdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCdsaScpO1xuXHRcdFx0dmFyIHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcblxuXHRcdFx0bGlzdC5yZW1vdmVDaGlsZChsaXN0SXRlbSk7XG5cdFx0XHRvblJlbW92ZSh2YWx1ZSk7XG5cdFx0fVxuXHR9KTtcblxuXHRyZXR1cm4gbGlzdEl0ZW1zO1xufTtcblxudmFyIHJlZ2lzdGVyRHJhZ0V2ZW50cyA9IGZ1bmN0aW9uIHJlZ2lzdGVyRHJhZ0V2ZW50cyhsaXN0LCBjYWxsYmFjaykge1xuXHR2YXIgZHJha2UgPSAoMCwgX2RyYWd1bGEyLmRlZmF1bHQpKFtsaXN0XSk7XG5cblx0ZHJha2Uub24oJ2RyYWdlbmQnLCBmdW5jdGlvbiAoZWwpIHtcblx0XHR2YXIgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG5cdFx0Y2FsbGJhY2sobGlzdCwgbGlzdEl0ZW1zKTtcblx0fSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cbnZhciBlbWl0dGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcbnZhciBjcm9zc3ZlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcbnZhciBjbGFzc2VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyk7XG52YXIgZG9jID0gZG9jdW1lbnQ7XG52YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuZnVuY3Rpb24gZHJhZ3VsYSAoaW5pdGlhbENvbnRhaW5lcnMsIG9wdGlvbnMpIHtcbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChsZW4gPT09IDEgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsQ29udGFpbmVycykgPT09IGZhbHNlKSB7XG4gICAgb3B0aW9ucyA9IGluaXRpYWxDb250YWluZXJzO1xuICAgIGluaXRpYWxDb250YWluZXJzID0gW107XG4gIH1cbiAgdmFyIF9taXJyb3I7IC8vIG1pcnJvciBpbWFnZVxuICB2YXIgX3NvdXJjZTsgLy8gc291cmNlIGNvbnRhaW5lclxuICB2YXIgX2l0ZW07IC8vIGl0ZW0gYmVpbmcgZHJhZ2dlZFxuICB2YXIgX29mZnNldFg7IC8vIHJlZmVyZW5jZSB4XG4gIHZhciBfb2Zmc2V0WTsgLy8gcmVmZXJlbmNlIHlcbiAgdmFyIF9tb3ZlWDsgLy8gcmVmZXJlbmNlIG1vdmUgeFxuICB2YXIgX21vdmVZOyAvLyByZWZlcmVuY2UgbW92ZSB5XG4gIHZhciBfaW5pdGlhbFNpYmxpbmc7IC8vIHJlZmVyZW5jZSBzaWJsaW5nIHdoZW4gZ3JhYmJlZFxuICB2YXIgX2N1cnJlbnRTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyBub3dcbiAgdmFyIF9jb3B5OyAvLyBpdGVtIHVzZWQgZm9yIGNvcHlpbmdcbiAgdmFyIF9yZW5kZXJUaW1lcjsgLy8gdGltZXIgZm9yIHNldFRpbWVvdXQgcmVuZGVyTWlycm9ySW1hZ2VcbiAgdmFyIF9sYXN0RHJvcFRhcmdldCA9IG51bGw7IC8vIGxhc3QgY29udGFpbmVyIGl0ZW0gd2FzIG92ZXJcbiAgdmFyIF9ncmFiYmVkOyAvLyBob2xkcyBtb3VzZWRvd24gY29udGV4dCB1bnRpbCBmaXJzdCBtb3VzZW1vdmVcblxuICB2YXIgbyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChvLm1vdmVzID09PSB2b2lkIDApIHsgby5tb3ZlcyA9IGFsd2F5czsgfVxuICBpZiAoby5hY2NlcHRzID09PSB2b2lkIDApIHsgby5hY2NlcHRzID0gYWx3YXlzOyB9XG4gIGlmIChvLmludmFsaWQgPT09IHZvaWQgMCkgeyBvLmludmFsaWQgPSBpbnZhbGlkVGFyZ2V0OyB9XG4gIGlmIChvLmNvbnRhaW5lcnMgPT09IHZvaWQgMCkgeyBvLmNvbnRhaW5lcnMgPSBpbml0aWFsQ29udGFpbmVycyB8fCBbXTsgfVxuICBpZiAoby5pc0NvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8uaXNDb250YWluZXIgPSBuZXZlcjsgfVxuICBpZiAoby5jb3B5ID09PSB2b2lkIDApIHsgby5jb3B5ID0gZmFsc2U7IH1cbiAgaWYgKG8uY29weVNvcnRTb3VyY2UgPT09IHZvaWQgMCkgeyBvLmNvcHlTb3J0U291cmNlID0gZmFsc2U7IH1cbiAgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdm9pZCAwKSB7IG8ucmV2ZXJ0T25TcGlsbCA9IGZhbHNlOyB9XG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJlbW92ZU9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5kaXJlY3Rpb24gPT09IHZvaWQgMCkgeyBvLmRpcmVjdGlvbiA9ICd2ZXJ0aWNhbCc7IH1cbiAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID09PSB2b2lkIDApIHsgby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24gPSB0cnVlOyB9XG4gIGlmIChvLm1pcnJvckNvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8ubWlycm9yQ29udGFpbmVyID0gZG9jLmJvZHk7IH1cblxuICB2YXIgZHJha2UgPSBlbWl0dGVyKHtcbiAgICBjb250YWluZXJzOiBvLmNvbnRhaW5lcnMsXG4gICAgc3RhcnQ6IG1hbnVhbFN0YXJ0LFxuICAgIGVuZDogZW5kLFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgY2FuTW92ZTogY2FuTW92ZSxcbiAgICBkcmFnZ2luZzogZmFsc2VcbiAgfSk7XG5cbiAgaWYgKG8ucmVtb3ZlT25TcGlsbCA9PT0gdHJ1ZSkge1xuICAgIGRyYWtlLm9uKCdvdmVyJywgc3BpbGxPdmVyKS5vbignb3V0Jywgc3BpbGxPdXQpO1xuICB9XG5cbiAgZXZlbnRzKCk7XG5cbiAgcmV0dXJuIGRyYWtlO1xuXG4gIGZ1bmN0aW9uIGlzQ29udGFpbmVyIChlbCkge1xuICAgIHJldHVybiBkcmFrZS5jb250YWluZXJzLmluZGV4T2YoZWwpICE9PSAtMSB8fCBvLmlzQ29udGFpbmVyKGVsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlZG93bicsIGdyYWIpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2V1cCcsIHJlbGVhc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnR1YWxNb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZW1vdmUnLCBzdGFydEJlY2F1c2VNb3VzZU1vdmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVtZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ3NlbGVjdHN0YXJ0JywgcHJldmVudEdyYWJiZWQpOyAvLyBJRThcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ2NsaWNrJywgcHJldmVudEdyYWJiZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSAoKSB7XG4gICAgZXZlbnRzKHRydWUpO1xuICAgIHJlbGVhc2Uoe30pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJldmVudEdyYWJiZWQgKGUpIHtcbiAgICBpZiAoX2dyYWJiZWQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBncmFiIChlKSB7XG4gICAgX21vdmVYID0gZS5jbGllbnRYO1xuICAgIF9tb3ZlWSA9IGUuY2xpZW50WTtcblxuICAgIHZhciBpZ25vcmUgPSB3aGljaE1vdXNlQnV0dG9uKGUpICE9PSAxIHx8IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XG4gICAgaWYgKGlnbm9yZSkge1xuICAgICAgcmV0dXJuOyAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgaG9uZXN0LXRvLWdvZCBsZWZ0IGNsaWNrcyBhbmQgdG91Y2ggZXZlbnRzXG4gICAgfVxuICAgIHZhciBpdGVtID0gZS50YXJnZXQ7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX2dyYWJiZWQgPSBjb250ZXh0O1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKCk7XG4gICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicpIHtcbiAgICAgIGlmIChpc0lucHV0KGl0ZW0pKSB7IC8vIHNlZSBhbHNvOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjA4XG4gICAgICAgIGl0ZW0uZm9jdXMoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE3NlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTU1XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCAoZSkge1xuICAgIGlmICghX2dyYWJiZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdoaWNoTW91c2VCdXR0b24oZSkgPT09IDApIHtcbiAgICAgIHJlbGVhc2Uoe30pO1xuICAgICAgcmV0dXJuOyAvLyB3aGVuIHRleHQgaXMgc2VsZWN0ZWQgb24gYW4gaW5wdXQgYW5kIHRoZW4gZHJhZ2dlZCwgbW91c2V1cCBkb2Vzbid0IGZpcmUuIHRoaXMgaXMgb3VyIG9ubHkgaG9wZVxuICAgIH1cbiAgICAvLyB0cnV0aHkgY2hlY2sgZml4ZXMgIzIzOSwgZXF1YWxpdHkgZml4ZXMgIzIwN1xuICAgIGlmIChlLmNsaWVudFggIT09IHZvaWQgMCAmJiBlLmNsaWVudFggPT09IF9tb3ZlWCAmJiBlLmNsaWVudFkgIT09IHZvaWQgMCAmJiBlLmNsaWVudFkgPT09IF9tb3ZlWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24pIHtcbiAgICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoY2xpZW50WCwgY2xpZW50WSk7XG4gICAgICBpZiAoaXNJbnB1dChlbGVtZW50QmVoaW5kQ3Vyc29yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdyYWJiZWQgPSBfZ3JhYmJlZDsgLy8gY2FsbCB0byBlbmQoKSB1bnNldHMgX2dyYWJiZWRcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcbiAgICBtb3ZlbWVudHMoKTtcbiAgICBlbmQoKTtcbiAgICBzdGFydChncmFiYmVkKTtcblxuICAgIHZhciBvZmZzZXQgPSBnZXRPZmZzZXQoX2l0ZW0pO1xuICAgIF9vZmZzZXRYID0gZ2V0Q29vcmQoJ3BhZ2VYJywgZSkgLSBvZmZzZXQubGVmdDtcbiAgICBfb2Zmc2V0WSA9IGdldENvb3JkKCdwYWdlWScsIGUpIC0gb2Zmc2V0LnRvcDtcblxuICAgIGNsYXNzZXMuYWRkKF9jb3B5IHx8IF9pdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIHJlbmRlck1pcnJvckltYWdlKCk7XG4gICAgZHJhZyhlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblN0YXJ0IChpdGVtKSB7XG4gICAgaWYgKGRyYWtlLmRyYWdnaW5nICYmIF9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzQ29udGFpbmVyKGl0ZW0pKSB7XG4gICAgICByZXR1cm47IC8vIGRvbid0IGRyYWcgY29udGFpbmVyIGl0c2VsZlxuICAgIH1cbiAgICB2YXIgaGFuZGxlID0gaXRlbTtcbiAgICB3aGlsZSAoZ2V0UGFyZW50KGl0ZW0pICYmIGlzQ29udGFpbmVyKGdldFBhcmVudChpdGVtKSkgPT09IGZhbHNlKSB7XG4gICAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaXRlbSA9IGdldFBhcmVudChpdGVtKTsgLy8gZHJhZyB0YXJnZXQgc2hvdWxkIGJlIGEgdG9wIGVsZW1lbnRcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBzb3VyY2UgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1vdmFibGUgPSBvLm1vdmVzKGl0ZW0sIHNvdXJjZSwgaGFuZGxlLCBuZXh0RWwoaXRlbSkpO1xuICAgIGlmICghbW92YWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpdGVtOiBpdGVtLFxuICAgICAgc291cmNlOiBzb3VyY2VcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuTW92ZSAoaXRlbSkge1xuICAgIHJldHVybiAhIWNhblN0YXJ0KGl0ZW0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFudWFsU3RhcnQgKGl0ZW0pIHtcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBzdGFydChjb250ZXh0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydCAoY29udGV4dCkge1xuICAgIGlmIChpc0NvcHkoY29udGV4dC5pdGVtLCBjb250ZXh0LnNvdXJjZSkpIHtcbiAgICAgIF9jb3B5ID0gY29udGV4dC5pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9jb3B5LCBjb250ZXh0Lml0ZW0sICdjb3B5Jyk7XG4gICAgfVxuXG4gICAgX3NvdXJjZSA9IGNvbnRleHQuc291cmNlO1xuICAgIF9pdGVtID0gY29udGV4dC5pdGVtO1xuICAgIF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IG5leHRFbChjb250ZXh0Lml0ZW0pO1xuXG4gICAgZHJha2UuZHJhZ2dpbmcgPSB0cnVlO1xuICAgIGRyYWtlLmVtaXQoJ2RyYWcnLCBfaXRlbSwgX3NvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZhbGlkVGFyZ2V0ICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBlbmQgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICBkcm9wKGl0ZW0sIGdldFBhcmVudChpdGVtKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1bmdyYWIgKCkge1xuICAgIF9ncmFiYmVkID0gZmFsc2U7XG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVsZWFzZSAoZSkge1xuICAgIHVuZ3JhYigpO1xuXG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICBpZiAoZHJvcFRhcmdldCAmJiAoKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UpIHx8ICghX2NvcHkgfHwgZHJvcFRhcmdldCAhPT0gX3NvdXJjZSkpKSB7XG4gICAgICBkcm9wKGl0ZW0sIGRyb3BUYXJnZXQpO1xuICAgIH0gZWxzZSBpZiAoby5yZW1vdmVPblNwaWxsKSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJvcCAoaXRlbSwgdGFyZ2V0KSB7XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoX2NvcHkgJiYgby5jb3B5U29ydFNvdXJjZSAmJiB0YXJnZXQgPT09IF9zb3VyY2UpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfaXRlbSk7XG4gICAgfVxuICAgIGlmIChpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0KSkge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCB0YXJnZXQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSAoKSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KF9jb3B5ID8gJ2NhbmNlbCcgOiAncmVtb3ZlJywgaXRlbSwgcGFyZW50LCBfc291cmNlKTtcbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwgKHJldmVydCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldmVydHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCA/IHJldmVydCA6IG8ucmV2ZXJ0T25TcGlsbDtcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQocGFyZW50KTtcbiAgICBpZiAoaW5pdGlhbCA9PT0gZmFsc2UgJiYgcmV2ZXJ0cykge1xuICAgICAgaWYgKF9jb3B5KSB7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2NvcHkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfc291cmNlLmluc2VydEJlZm9yZShpdGVtLCBfaW5pdGlhbFNpYmxpbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5pdGlhbCB8fCByZXZlcnRzKSB7XG4gICAgICBkcmFrZS5lbWl0KCdjYW5jZWwnLCBpdGVtLCBfc291cmNlLCBfc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJha2UuZW1pdCgnZHJvcCcsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSwgX2N1cnJlbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYW51cCAoKSB7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB1bmdyYWIoKTtcbiAgICByZW1vdmVNaXJyb3JJbWFnZSgpO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBjbGFzc2VzLnJtKGl0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgfVxuICAgIGlmIChfcmVuZGVyVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dChfcmVuZGVyVGltZXIpO1xuICAgIH1cbiAgICBkcmFrZS5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIGlmIChfbGFzdERyb3BUYXJnZXQpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ291dCcsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGRyYWtlLmVtaXQoJ2RyYWdlbmQnLCBpdGVtKTtcbiAgICBfc291cmNlID0gX2l0ZW0gPSBfY29weSA9IF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IF9yZW5kZXJUaW1lciA9IF9sYXN0RHJvcFRhcmdldCA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBpc0luaXRpYWxQbGFjZW1lbnQgKHRhcmdldCwgcykge1xuICAgIHZhciBzaWJsaW5nO1xuICAgIGlmIChzICE9PSB2b2lkIDApIHtcbiAgICAgIHNpYmxpbmcgPSBzO1xuICAgIH0gZWxzZSBpZiAoX21pcnJvcikge1xuICAgICAgc2libGluZyA9IF9jdXJyZW50U2libGluZztcbiAgICB9IGVsc2Uge1xuICAgICAgc2libGluZyA9IG5leHRFbChfY29weSB8fCBfaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQgPT09IF9zb3VyY2UgJiYgc2libGluZyA9PT0gX2luaXRpYWxTaWJsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZERyb3BUYXJnZXQgKGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZWxlbWVudEJlaGluZEN1cnNvcjtcbiAgICB3aGlsZSAodGFyZ2V0ICYmICFhY2NlcHRlZCgpKSB7XG4gICAgICB0YXJnZXQgPSBnZXRQYXJlbnQodGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcblxuICAgIGZ1bmN0aW9uIGFjY2VwdGVkICgpIHtcbiAgICAgIHZhciBkcm9wcGFibGUgPSBpc0NvbnRhaW5lcih0YXJnZXQpO1xuICAgICAgaWYgKGRyb3BwYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgaW1tZWRpYXRlID0gZ2V0SW1tZWRpYXRlQ2hpbGQodGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICAgIHZhciByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UodGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0LCByZWZlcmVuY2UpO1xuICAgICAgaWYgKGluaXRpYWwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIHNob3VsZCBhbHdheXMgYmUgYWJsZSB0byBkcm9wIGl0IHJpZ2h0IGJhY2sgd2hlcmUgaXQgd2FzXG4gICAgICB9XG4gICAgICByZXR1cm4gby5hY2NlcHRzKF9pdGVtLCB0YXJnZXQsIF9zb3VyY2UsIHJlZmVyZW5jZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhZyAoZSkge1xuICAgIGlmICghX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciB4ID0gY2xpZW50WCAtIF9vZmZzZXRYO1xuICAgIHZhciB5ID0gY2xpZW50WSAtIF9vZmZzZXRZO1xuXG4gICAgX21pcnJvci5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS50b3AgPSB5ICsgJ3B4JztcblxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgY2hhbmdlZCA9IGRyb3BUYXJnZXQgIT09IG51bGwgJiYgZHJvcFRhcmdldCAhPT0gX2xhc3REcm9wVGFyZ2V0O1xuICAgIGlmIChjaGFuZ2VkIHx8IGRyb3BUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgIG91dCgpO1xuICAgICAgX2xhc3REcm9wVGFyZ2V0ID0gZHJvcFRhcmdldDtcbiAgICAgIG92ZXIoKTtcbiAgICB9XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoZHJvcFRhcmdldCA9PT0gX3NvdXJjZSAmJiBfY29weSAmJiAhby5jb3B5U29ydFNvdXJjZSkge1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWZlcmVuY2U7XG4gICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKGRyb3BUYXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgIGlmIChpbW1lZGlhdGUgIT09IG51bGwpIHtcbiAgICAgIHJlZmVyZW5jZSA9IGdldFJlZmVyZW5jZShkcm9wVGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIH0gZWxzZSBpZiAoby5yZXZlcnRPblNwaWxsID09PSB0cnVlICYmICFfY29weSkge1xuICAgICAgcmVmZXJlbmNlID0gX2luaXRpYWxTaWJsaW5nO1xuICAgICAgZHJvcFRhcmdldCA9IF9zb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChfY29weSAmJiBwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAocmVmZXJlbmNlID09PSBudWxsICYmIGNoYW5nZWQpIHx8XG4gICAgICByZWZlcmVuY2UgIT09IGl0ZW0gJiZcbiAgICAgIHJlZmVyZW5jZSAhPT0gbmV4dEVsKGl0ZW0pXG4gICAgKSB7XG4gICAgICBfY3VycmVudFNpYmxpbmcgPSByZWZlcmVuY2U7XG4gICAgICBkcm9wVGFyZ2V0Lmluc2VydEJlZm9yZShpdGVtLCByZWZlcmVuY2UpO1xuICAgICAgZHJha2UuZW1pdCgnc2hhZG93JywgaXRlbSwgZHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdmVkICh0eXBlKSB7IGRyYWtlLmVtaXQodHlwZSwgaXRlbSwgX2xhc3REcm9wVGFyZ2V0LCBfc291cmNlKTsgfVxuICAgIGZ1bmN0aW9uIG92ZXIgKCkgeyBpZiAoY2hhbmdlZCkgeyBtb3ZlZCgnb3ZlcicpOyB9IH1cbiAgICBmdW5jdGlvbiBvdXQgKCkgeyBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7IG1vdmVkKCdvdXQnKTsgfSB9XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE92ZXIgKGVsKSB7XG4gICAgY2xhc3Nlcy5ybShlbCwgJ2d1LWhpZGUnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwaWxsT3V0IChlbCkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZykgeyBjbGFzc2VzLmFkZChlbCwgJ2d1LWhpZGUnKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWN0ID0gX2l0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgX21pcnJvciA9IF9pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICBfbWlycm9yLnN0eWxlLndpZHRoID0gZ2V0UmVjdFdpZHRoKHJlY3QpICsgJ3B4JztcbiAgICBfbWlycm9yLnN0eWxlLmhlaWdodCA9IGdldFJlY3RIZWlnaHQocmVjdCkgKyAncHgnO1xuICAgIGNsYXNzZXMucm0oX21pcnJvciwgJ2d1LXRyYW5zaXQnKTtcbiAgICBjbGFzc2VzLmFkZChfbWlycm9yLCAnZ3UtbWlycm9yJyk7XG4gICAgby5taXJyb3JDb250YWluZXIuYXBwZW5kQ2hpbGQoX21pcnJvcik7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ2FkZCcsICdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICBjbGFzc2VzLmFkZChvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9taXJyb3IsIF9pdGVtLCAnbWlycm9yJyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVNaXJyb3JJbWFnZSAoKSB7XG4gICAgaWYgKF9taXJyb3IpIHtcbiAgICAgIGNsYXNzZXMucm0oby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdyZW1vdmUnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgICBnZXRQYXJlbnQoX21pcnJvcikucmVtb3ZlQ2hpbGQoX21pcnJvcik7XG4gICAgICBfbWlycm9yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbW1lZGlhdGVDaGlsZCAoZHJvcFRhcmdldCwgdGFyZ2V0KSB7XG4gICAgdmFyIGltbWVkaWF0ZSA9IHRhcmdldDtcbiAgICB3aGlsZSAoaW1tZWRpYXRlICE9PSBkcm9wVGFyZ2V0ICYmIGdldFBhcmVudChpbW1lZGlhdGUpICE9PSBkcm9wVGFyZ2V0KSB7XG4gICAgICBpbW1lZGlhdGUgPSBnZXRQYXJlbnQoaW1tZWRpYXRlKTtcbiAgICB9XG4gICAgaWYgKGltbWVkaWF0ZSA9PT0gZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGltbWVkaWF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJlZmVyZW5jZSAoZHJvcFRhcmdldCwgdGFyZ2V0LCB4LCB5KSB7XG4gICAgdmFyIGhvcml6b250YWwgPSBvLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciByZWZlcmVuY2UgPSB0YXJnZXQgIT09IGRyb3BUYXJnZXQgPyBpbnNpZGUoKSA6IG91dHNpZGUoKTtcbiAgICByZXR1cm4gcmVmZXJlbmNlO1xuXG4gICAgZnVuY3Rpb24gb3V0c2lkZSAoKSB7IC8vIHNsb3dlciwgYnV0IGFibGUgdG8gZmlndXJlIG91dCBhbnkgcG9zaXRpb25cbiAgICAgIHZhciBsZW4gPSBkcm9wVGFyZ2V0LmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGVsO1xuICAgICAgdmFyIHJlY3Q7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZWwgPSBkcm9wVGFyZ2V0LmNoaWxkcmVuW2ldO1xuICAgICAgICByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChob3Jpem9udGFsICYmIChyZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMikgPiB4KSB7IHJldHVybiBlbDsgfVxuICAgICAgICBpZiAoIWhvcml6b250YWwgJiYgKHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyKSA+IHkpIHsgcmV0dXJuIGVsOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnNpZGUgKCkgeyAvLyBmYXN0ZXIsIGJ1dCBvbmx5IGF2YWlsYWJsZSBpZiBkcm9wcGVkIGluc2lkZSBhIGNoaWxkIGVsZW1lbnRcbiAgICAgIHZhciByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgaWYgKGhvcml6b250YWwpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoeCA+IHJlY3QubGVmdCArIGdldFJlY3RXaWR0aChyZWN0KSAvIDIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc29sdmUoeSA+IHJlY3QudG9wICsgZ2V0UmVjdEhlaWdodChyZWN0KSAvIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmUgKGFmdGVyKSB7XG4gICAgICByZXR1cm4gYWZ0ZXIgPyBuZXh0RWwodGFyZ2V0KSA6IHRhcmdldDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0NvcHkgKGl0ZW0sIGNvbnRhaW5lcikge1xuICAgIHJldHVybiB0eXBlb2Ygby5jb3B5ID09PSAnYm9vbGVhbicgPyBvLmNvcHkgOiBvLmNvcHkoaXRlbSwgY29udGFpbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b3VjaHkgKGVsLCBvcCwgdHlwZSwgZm4pIHtcbiAgdmFyIHRvdWNoID0ge1xuICAgIG1vdXNldXA6ICd0b3VjaGVuZCcsXG4gICAgbW91c2Vkb3duOiAndG91Y2hzdGFydCcsXG4gICAgbW91c2Vtb3ZlOiAndG91Y2htb3ZlJ1xuICB9O1xuICB2YXIgcG9pbnRlcnMgPSB7XG4gICAgbW91c2V1cDogJ3BvaW50ZXJ1cCcsXG4gICAgbW91c2Vkb3duOiAncG9pbnRlcmRvd24nLFxuICAgIG1vdXNlbW92ZTogJ3BvaW50ZXJtb3ZlJ1xuICB9O1xuICB2YXIgbWljcm9zb2Z0ID0ge1xuICAgIG1vdXNldXA6ICdNU1BvaW50ZXJVcCcsXG4gICAgbW91c2Vkb3duOiAnTVNQb2ludGVyRG93bicsXG4gICAgbW91c2Vtb3ZlOiAnTVNQb2ludGVyTW92ZSdcbiAgfTtcbiAgaWYgKGdsb2JhbC5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBwb2ludGVyc1t0eXBlXSwgZm4pO1xuICB9IGVsc2UgaWYgKGdsb2JhbC5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIG1pY3Jvc29mdFt0eXBlXSwgZm4pO1xuICB9IGVsc2Uge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHRvdWNoW3R5cGVdLCBmbik7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdHlwZSwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdoaWNoTW91c2VCdXR0b24gKGUpIHtcbiAgaWYgKGUudG91Y2hlcyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLnRvdWNoZXMubGVuZ3RoOyB9XG4gIGlmIChlLndoaWNoICE9PSB2b2lkIDAgJiYgZS53aGljaCAhPT0gMCkgeyByZXR1cm4gZS53aGljaDsgfSAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzI2MVxuICBpZiAoZS5idXR0b25zICE9PSB2b2lkIDApIHsgcmV0dXJuIGUuYnV0dG9uczsgfVxuICB2YXIgYnV0dG9uID0gZS5idXR0b247XG4gIGlmIChidXR0b24gIT09IHZvaWQgMCkgeyAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvYmxvYi85OWU4ZmYxYmFhN2FlMzQxZTk0YmI4OWMzZTg0NTcwYzdjM2FkOWVhL3NyYy9ldmVudC5qcyNMNTczLUw1NzVcbiAgICByZXR1cm4gYnV0dG9uICYgMSA/IDEgOiBidXR0b24gJiAyID8gMyA6IChidXR0b24gJiA0ID8gMiA6IDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldCAoZWwpIHtcbiAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiByZWN0LmxlZnQgKyBnZXRTY3JvbGwoJ3Njcm9sbExlZnQnLCAncGFnZVhPZmZzZXQnKSxcbiAgICB0b3A6IHJlY3QudG9wICsgZ2V0U2Nyb2xsKCdzY3JvbGxUb3AnLCAncGFnZVlPZmZzZXQnKVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGwgKHNjcm9sbFByb3AsIG9mZnNldFByb3ApIHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxbb2Zmc2V0UHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbFtvZmZzZXRQcm9wXTtcbiAgfVxuICBpZiAoZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgIHJldHVybiBkb2N1bWVudEVsZW1lbnRbc2Nyb2xsUHJvcF07XG4gIH1cbiAgcmV0dXJuIGRvYy5ib2R5W3Njcm9sbFByb3BdO1xufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50QmVoaW5kUG9pbnQgKHBvaW50LCB4LCB5KSB7XG4gIHZhciBwID0gcG9pbnQgfHwge307XG4gIHZhciBzdGF0ZSA9IHAuY2xhc3NOYW1lO1xuICB2YXIgZWw7XG4gIHAuY2xhc3NOYW1lICs9ICcgZ3UtaGlkZSc7XG4gIGVsID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoeCwgeSk7XG4gIHAuY2xhc3NOYW1lID0gc3RhdGU7XG4gIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gbmV2ZXIgKCkgeyByZXR1cm4gZmFsc2U7IH1cbmZ1bmN0aW9uIGFsd2F5cyAoKSB7IHJldHVybiB0cnVlOyB9XG5mdW5jdGlvbiBnZXRSZWN0V2lkdGggKHJlY3QpIHsgcmV0dXJuIHJlY3Qud2lkdGggfHwgKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpOyB9XG5mdW5jdGlvbiBnZXRSZWN0SGVpZ2h0IChyZWN0KSB7IHJldHVybiByZWN0LmhlaWdodCB8fCAocmVjdC5ib3R0b20gLSByZWN0LnRvcCk7IH1cbmZ1bmN0aW9uIGdldFBhcmVudCAoZWwpIHsgcmV0dXJuIGVsLnBhcmVudE5vZGUgPT09IGRvYyA/IG51bGwgOiBlbC5wYXJlbnROb2RlOyB9XG5mdW5jdGlvbiBpc0lucHV0IChlbCkgeyByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnIHx8IGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnIHx8IGlzRWRpdGFibGUoZWwpOyB9XG5mdW5jdGlvbiBpc0VkaXRhYmxlIChlbCkge1xuICBpZiAoIWVsKSB7IHJldHVybiBmYWxzZTsgfSAvLyBubyBwYXJlbnRzIHdlcmUgZWRpdGFibGVcbiAgaWYgKGVsLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ2ZhbHNlJykgeyByZXR1cm4gZmFsc2U7IH0gLy8gc3RvcCB0aGUgbG9va3VwXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJykgeyByZXR1cm4gdHJ1ZTsgfSAvLyBmb3VuZCBhIGNvbnRlbnRFZGl0YWJsZSBlbGVtZW50IGluIHRoZSBjaGFpblxuICByZXR1cm4gaXNFZGl0YWJsZShnZXRQYXJlbnQoZWwpKTsgLy8gY29udGVudEVkaXRhYmxlIGlzIHNldCB0byAnaW5oZXJpdCdcbn1cblxuZnVuY3Rpb24gbmV4dEVsIChlbCkge1xuICByZXR1cm4gZWwubmV4dEVsZW1lbnRTaWJsaW5nIHx8IG1hbnVhbGx5KCk7XG4gIGZ1bmN0aW9uIG1hbnVhbGx5ICgpIHtcbiAgICB2YXIgc2libGluZyA9IGVsO1xuICAgIGRvIHtcbiAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgIH0gd2hpbGUgKHNpYmxpbmcgJiYgc2libGluZy5ub2RlVHlwZSAhPT0gMSk7XG4gICAgcmV0dXJuIHNpYmxpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRIb3N0IChlKSB7XG4gIC8vIG9uIHRvdWNoZW5kIGV2ZW50LCB3ZSBoYXZlIHRvIHVzZSBgZS5jaGFuZ2VkVG91Y2hlc2BcbiAgLy8gc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzE5MjU2My90b3VjaGVuZC1ldmVudC1wcm9wZXJ0aWVzXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMzRcbiAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGUudGFyZ2V0VG91Y2hlc1swXTtcbiAgfVxuICBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBnZXRDb29yZCAoY29vcmQsIGUpIHtcbiAgdmFyIGhvc3QgPSBnZXRFdmVudEhvc3QoZSk7XG4gIHZhciBtaXNzTWFwID0ge1xuICAgIHBhZ2VYOiAnY2xpZW50WCcsIC8vIElFOFxuICAgIHBhZ2VZOiAnY2xpZW50WScgLy8gSUU4XG4gIH07XG4gIGlmIChjb29yZCBpbiBtaXNzTWFwICYmICEoY29vcmQgaW4gaG9zdCkgJiYgbWlzc01hcFtjb29yZF0gaW4gaG9zdCkge1xuICAgIGNvb3JkID0gbWlzc01hcFtjb29yZF07XG4gIH1cbiAgcmV0dXJuIGhvc3RbY29vcmRdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYWd1bGE7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiA3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBhdG9hID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcbnZhciBkZWJvdW5jZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZW1pdHRlciAodGhpbmcsIG9wdGlvbnMpIHtcbiAgdmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgZXZ0ID0ge307XG4gIGlmICh0aGluZyA9PT0gdW5kZWZpbmVkKSB7IHRoaW5nID0ge307IH1cbiAgdGhpbmcub24gPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBpZiAoIWV2dFt0eXBlXSkge1xuICAgICAgZXZ0W3R5cGVdID0gW2ZuXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXZ0W3R5cGVdLnB1c2goZm4pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9uY2UgPSBmdW5jdGlvbiAodHlwZSwgZm4pIHtcbiAgICBmbi5fb25jZSA9IHRydWU7IC8vIHRoaW5nLm9mZihmbikgc3RpbGwgd29ya3MhXG4gICAgdGhpbmcub24odHlwZSwgZm4pO1xuICAgIHJldHVybiB0aGluZztcbiAgfTtcbiAgdGhpbmcub2ZmID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmIChjID09PSAxKSB7XG4gICAgICBkZWxldGUgZXZ0W3R5cGVdO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMCkge1xuICAgICAgZXZ0ID0ge307XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBldCA9IGV2dFt0eXBlXTtcbiAgICAgIGlmICghZXQpIHsgcmV0dXJuIHRoaW5nOyB9XG4gICAgICBldC5zcGxpY2UoZXQuaW5kZXhPZihmbiksIDEpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLmVtaXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIHRoaW5nLmVtaXR0ZXJTbmFwc2hvdChhcmdzLnNoaWZ0KCkpLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICB9O1xuICB0aGluZy5lbWl0dGVyU25hcHNob3QgPSBmdW5jdGlvbiAodHlwZSkge1xuICAgIHZhciBldCA9IChldnRbdHlwZV0gfHwgW10pLnNsaWNlKDApO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYXJncyA9IGF0b2EoYXJndW1lbnRzKTtcbiAgICAgIHZhciBjdHggPSB0aGlzIHx8IHRoaW5nO1xuICAgICAgaWYgKHR5cGUgPT09ICdlcnJvcicgJiYgb3B0cy50aHJvd3MgIT09IGZhbHNlICYmICFldC5sZW5ndGgpIHsgdGhyb3cgYXJncy5sZW5ndGggPT09IDEgPyBhcmdzWzBdIDogYXJnczsgfVxuICAgICAgZXQuZm9yRWFjaChmdW5jdGlvbiBlbWl0dGVyIChsaXN0ZW4pIHtcbiAgICAgICAgaWYgKG9wdHMuYXN5bmMpIHsgZGVib3VuY2UobGlzdGVuLCBhcmdzLCBjdHgpOyB9IGVsc2UgeyBsaXN0ZW4uYXBwbHkoY3R4LCBhcmdzKTsgfVxuICAgICAgICBpZiAobGlzdGVuLl9vbmNlKSB7IHRoaW5nLm9mZih0eXBlLCBsaXN0ZW4pOyB9XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGluZztcbiAgICB9O1xuICB9O1xuICByZXR1cm4gdGhpbmc7XG59O1xuXG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGF0b2EgKGEsIG4pIHsgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEsIG4pOyB9XG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciB0aWNreSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlIChmbiwgYXJncywgY3R4KSB7XG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XG4gIHRpY2t5KGZ1bmN0aW9uIHJ1biAoKSB7XG4gICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIGFyZ3MgfHwgW10pO1xuICB9KTtcbn07XG5cblxuLyoqKi8gfSksXG4vKiAxMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oc2V0SW1tZWRpYXRlKSB7dmFyIHNpID0gdHlwZW9mIHNldEltbWVkaWF0ZSA9PT0gJ2Z1bmN0aW9uJywgdGljaztcbmlmIChzaSkge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldEltbWVkaWF0ZShmbik7IH07XG59IGVsc2Uge1xuICB0aWNrID0gZnVuY3Rpb24gKGZuKSB7IHNldFRpbWVvdXQoZm4sIDApOyB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHRpY2s7XG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxMSkuc2V0SW1tZWRpYXRlKSlcblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgYXBwbHkgPSBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHk7XG5cbi8vIERPTSBBUElzLCBmb3IgY29tcGxldGVuZXNzXG5cbmV4cG9ydHMuc2V0VGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRUaW1lb3V0LCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFyVGltZW91dCk7XG59O1xuZXhwb3J0cy5zZXRJbnRlcnZhbCA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbmV3IFRpbWVvdXQoYXBwbHkuY2FsbChzZXRJbnRlcnZhbCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhckludGVydmFsKTtcbn07XG5leHBvcnRzLmNsZWFyVGltZW91dCA9XG5leHBvcnRzLmNsZWFySW50ZXJ2YWwgPSBmdW5jdGlvbih0aW1lb3V0KSB7XG4gIGlmICh0aW1lb3V0KSB7XG4gICAgdGltZW91dC5jbG9zZSgpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBUaW1lb3V0KGlkLCBjbGVhckZuKSB7XG4gIHRoaXMuX2lkID0gaWQ7XG4gIHRoaXMuX2NsZWFyRm4gPSBjbGVhckZuO1xufVxuVGltZW91dC5wcm90b3R5cGUudW5yZWYgPSBUaW1lb3V0LnByb3RvdHlwZS5yZWYgPSBmdW5jdGlvbigpIHt9O1xuVGltZW91dC5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5fY2xlYXJGbi5jYWxsKHdpbmRvdywgdGhpcy5faWQpO1xufTtcblxuLy8gRG9lcyBub3Qgc3RhcnQgdGhlIHRpbWUsIGp1c3Qgc2V0cyB1cCB0aGUgbWVtYmVycyBuZWVkZWQuXG5leHBvcnRzLmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0sIG1zZWNzKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSBtc2Vjcztcbn07XG5cbmV4cG9ydHMudW5lbnJvbGwgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcbiAgaXRlbS5faWRsZVRpbWVvdXQgPSAtMTtcbn07XG5cbmV4cG9ydHMuX3VucmVmQWN0aXZlID0gZXhwb3J0cy5hY3RpdmUgPSBmdW5jdGlvbihpdGVtKSB7XG4gIGNsZWFyVGltZW91dChpdGVtLl9pZGxlVGltZW91dElkKTtcblxuICB2YXIgbXNlY3MgPSBpdGVtLl9pZGxlVGltZW91dDtcbiAgaWYgKG1zZWNzID49IDApIHtcbiAgICBpdGVtLl9pZGxlVGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbiBvblRpbWVvdXQoKSB7XG4gICAgICBpZiAoaXRlbS5fb25UaW1lb3V0KVxuICAgICAgICBpdGVtLl9vblRpbWVvdXQoKTtcbiAgICB9LCBtc2Vjcyk7XG4gIH1cbn07XG5cbi8vIHNldGltbWVkaWF0ZSBhdHRhY2hlcyBpdHNlbGYgdG8gdGhlIGdsb2JhbCBvYmplY3Rcbl9fd2VicGFja19yZXF1aXJlX18oMTIpO1xuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cblxuLyoqKi8gfSksXG4vKiAxMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7KGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxMykpKVxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHtcblxudmFyIGN1c3RvbUV2ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG52YXIgZXZlbnRtYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYWRkRXZlbnQgPSBhZGRFdmVudEVhc3k7XG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XG52YXIgaGFyZENhY2hlID0gW107XG5cbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgYWRkRXZlbnQgPSBhZGRFdmVudEhhcmQ7XG4gIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRIYXJkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgbGlzdGVuZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIGVsLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG4vKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygwKSkpXG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xudmFyIE5hdGl2ZUN1c3RvbUV2ZW50ID0gZ2xvYmFsLkN1c3RvbUV2ZW50O1xuXG5mdW5jdGlvbiB1c2VOYXRpdmUgKCkge1xuICB0cnkge1xuICAgIHZhciBwID0gbmV3IE5hdGl2ZUN1c3RvbUV2ZW50KCdjYXQnLCB7IGRldGFpbDogeyBmb286ICdiYXInIH0gfSk7XG4gICAgcmV0dXJuICAnY2F0JyA9PT0gcC50eXBlICYmICdiYXInID09PSBwLmRldGFpbC5mb287XG4gIH0gY2F0Y2ggKGUpIHtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogQ3Jvc3MtYnJvd3NlciBgQ3VzdG9tRXZlbnRgIGNvbnN0cnVjdG9yLlxuICpcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9DdXN0b21FdmVudC5DdXN0b21FdmVudFxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVzZU5hdGl2ZSgpID8gTmF0aXZlQ3VzdG9tRXZlbnQgOlxuXG4vLyBJRSA+PSA5XG4nZnVuY3Rpb24nID09PSB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPyBmdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gIGlmIChwYXJhbXMpIHtcbiAgICBlLmluaXRDdXN0b21FdmVudCh0eXBlLCBwYXJhbXMuYnViYmxlcywgcGFyYW1zLmNhbmNlbGFibGUsIHBhcmFtcy5kZXRhaWwpO1xuICB9IGVsc2Uge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIGZhbHNlLCBmYWxzZSwgdm9pZCAwKTtcbiAgfVxuICByZXR1cm4gZTtcbn0gOlxuXG4vLyBJRSA8PSA4XG5mdW5jdGlvbiBDdXN0b21FdmVudCAodHlwZSwgcGFyYW1zKSB7XG4gIHZhciBlID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcbiAgZS50eXBlID0gdHlwZTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuYnViYmxlcyA9IEJvb2xlYW4ocGFyYW1zLmJ1YmJsZXMpO1xuICAgIGUuY2FuY2VsYWJsZSA9IEJvb2xlYW4ocGFyYW1zLmNhbmNlbGFibGUpO1xuICAgIGUuZGV0YWlsID0gcGFyYW1zLmRldGFpbDtcbiAgfSBlbHNlIHtcbiAgICBlLmJ1YmJsZXMgPSBmYWxzZTtcbiAgICBlLmNhbmNlbGFibGUgPSBmYWxzZTtcbiAgICBlLmRldGFpbCA9IHZvaWQgMDtcbiAgfVxuICByZXR1cm4gZTtcbn1cblxuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMCkpKVxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuLyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXG52YXIgZXZlbnRtYXAgPSBbXTtcbnZhciBldmVudG5hbWUgPSAnJztcbnZhciByb24gPSAvXm9uLztcblxuZm9yIChldmVudG5hbWUgaW4gZ2xvYmFsKSB7XG4gIGlmIChyb24udGVzdChldmVudG5hbWUpKSB7XG4gICAgZXZlbnRtYXAucHVzaChldmVudG5hbWUuc2xpY2UoMikpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXZlbnRtYXA7XG5cbi8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDApKSlcblxuLyoqKi8gfSksXG4vKiAxNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG52YXIgY2FjaGUgPSB7fTtcbnZhciBzdGFydCA9ICcoPzpefFxcXFxzKSc7XG52YXIgZW5kID0gJyg/OlxcXFxzfCQpJztcblxuZnVuY3Rpb24gbG9va3VwQ2xhc3MgKGNsYXNzTmFtZSkge1xuICB2YXIgY2FjaGVkID0gY2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKGNhY2hlZCkge1xuICAgIGNhY2hlZC5sYXN0SW5kZXggPSAwO1xuICB9IGVsc2Uge1xuICAgIGNhY2hlW2NsYXNzTmFtZV0gPSBjYWNoZWQgPSBuZXcgUmVnRXhwKHN0YXJ0ICsgY2xhc3NOYW1lICsgZW5kLCAnZycpO1xuICB9XG4gIHJldHVybiBjYWNoZWQ7XG59XG5cbmZ1bmN0aW9uIGFkZENsYXNzIChlbCwgY2xhc3NOYW1lKSB7XG4gIHZhciBjdXJyZW50ID0gZWwuY2xhc3NOYW1lO1xuICBpZiAoIWN1cnJlbnQubGVuZ3RoKSB7XG4gICAgZWwuY2xhc3NOYW1lID0gY2xhc3NOYW1lO1xuICB9IGVsc2UgaWYgKCFsb29rdXBDbGFzcyhjbGFzc05hbWUpLnRlc3QoY3VycmVudCkpIHtcbiAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICB9XG59XG5cbmZ1bmN0aW9uIHJtQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UobG9va3VwQ2xhc3MoY2xhc3NOYW1lKSwgJyAnKS50cmltKCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhZGQ6IGFkZENsYXNzLFxuICBybTogcm1DbGFzc1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChwYXJlbnQsIGhpZGRlbklucHV0KSB7XG5cdHZhciBoaWRkZW5FbCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKGhpZGRlbklucHV0KTtcblxuXHR2YXIgZ2V0Q3VycmVudFZhbHVlID0gZnVuY3Rpb24gZ2V0Q3VycmVudFZhbHVlKCkge1xuXHRcdHZhciB2YWx1ZSA9IGhpZGRlbkVsLnZhbHVlO1xuXG5cdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHRyZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cdFx0fVxuXHRcdHJldHVybiBbXTtcblx0fTtcblxuXHR2YXIgY2hlY2tMaW1pdCA9IGZ1bmN0aW9uIGNoZWNrTGltaXQoY3VycmVudFZhbHVlKSB7XG5cdFx0dmFyIGNvdW50ID0gY3VycmVudFZhbHVlLmxlbmd0aDtcblx0XHR2YXIgZmllbGQgPSBwYXJlbnQucXVlcnlTZWxlY3RvcignLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1pbnB1dCcpO1xuXHRcdHZhciBtYXggPSBmaWVsZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWF4Jyk7XG5cblx0XHRpZiAobWF4KSB7XG5cdFx0XHRpZiAoY291bnQgPCBwYXJzZUludChtYXgsIDEwKSkge1xuXHRcdFx0XHRmaWVsZC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmaWVsZC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdHZhciBhZGRWYWx1ZSA9IGZ1bmN0aW9uIGFkZFZhbHVlKHZhbHVlKSB7XG5cdFx0dmFyIGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuXG5cdFx0Y3VycmVudFZhbHVlID0gY3VycmVudFZhbHVlLmNvbmNhdCh2YWx1ZSk7XG5cdFx0Y2hlY2tMaW1pdChjdXJyZW50VmFsdWUpO1xuXHRcdHJldHVybiBjdXJyZW50VmFsdWU7XG5cdH07XG5cblx0dmFyIHJlbW92ZVZhbHVlID0gZnVuY3Rpb24gcmVtb3ZlVmFsdWUodmFsdWUsIG9uUmVtb3ZlKSB7XG5cdFx0dmFyIGN1cnJlbnRWYWx1ZSA9IGdldEN1cnJlbnRWYWx1ZSgpO1xuXG5cdFx0Y3VycmVudFZhbHVlID0gb25SZW1vdmUoY3VycmVudFZhbHVlLCB2YWx1ZSk7XG5cdFx0Y2hlY2tMaW1pdChjdXJyZW50VmFsdWUpO1xuXHRcdHJldHVybiBjdXJyZW50VmFsdWU7XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRhZGQ6IGZ1bmN0aW9uIGFkZCh2YWx1ZSkge1xuXHRcdFx0aGlkZGVuRWwudmFsdWUgPSBKU09OLnN0cmluZ2lmeShhZGRWYWx1ZSh2YWx1ZSkpO1xuXHRcdH0sXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUodmFsdWUsIG9uUmVtb3ZlKSB7XG5cdFx0XHRoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHJlbW92ZVZhbHVlKHZhbHVlLCBvblJlbW92ZSkpO1xuXHRcdH0sXG5cdFx0dXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWVzKSB7XG5cdFx0XHRoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlcyk7XG5cdFx0fSxcblx0XHRlbDogaGlkZGVuRWxcblx0fTtcbn07XG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcbi8qIGdsb2JhbCBqUXVlcnkgKi9cbnZhciBjaGVja0xpbWl0ID0gZXhwb3J0cy5jaGVja0xpbWl0ID0gZnVuY3Rpb24gY2hlY2tMaW1pdChhdXRvTGlzdCkge1xuXHR2YXIgY2hpbGRyZW4gPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXHR2YXIgZmllbGQgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCcuY3VzdG9taXplci1jdXJhdGlvbi1saXN0LWlucHV0Jyk7XG5cdHZhciBtYXggPSBmaWVsZC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbWF4Jyk7XG5cblx0aWYgKG1heCkge1xuXHRcdGlmIChjaGlsZHJlbi5sZW5ndGggPCBwYXJzZUludChtYXgsIDEwKSkge1xuXHRcdFx0ZmllbGQucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRmaWVsZC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG5cdFx0fVxuXHR9XG59O1xuXG52YXIgcmVtb3ZlSXRlbXMgPSBleHBvcnRzLnJlbW92ZUl0ZW1zID0gZnVuY3Rpb24gcmVtb3ZlSXRlbXMoSGlkZGVuLCBvblJlbW92ZSwgYXV0b0xpc3QpIHtcblx0cmV0dXJuIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHRcdEhpZGRlbi5yZW1vdmUodmFsdWUsIG9uUmVtb3ZlKTtcblx0XHRjaGVja0xpbWl0KGF1dG9MaXN0KTtcblx0XHRqUXVlcnkoSGlkZGVuLmVsKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0fTtcbn07XG5cbnZhciBkcmFnSXRlbXMgPSBleHBvcnRzLmRyYWdJdGVtcyA9IGZ1bmN0aW9uIGRyYWdJdGVtcyhIaWRkZW4sIG9uRHJhZykge1xuXHRyZXR1cm4gZnVuY3Rpb24gKGxpc3QsIGxpc3RJdGVtcykge1xuXHRcdHZhciB2YWx1ZXMgPSBvbkRyYWcobGlzdCwgbGlzdEl0ZW1zKTtcblxuXHRcdEhpZGRlbi51cGRhdGUodmFsdWVzKTtcblx0XHRqUXVlcnkoSGlkZGVuLmVsKS50cmlnZ2VyKCdjaGFuZ2UnKTtcblx0fTtcbn07XG5cbnZhciBvbkRyYWdPYmplY3QgPSBleHBvcnRzLm9uRHJhZ09iamVjdCA9IGZ1bmN0aW9uIG9uRHJhZ09iamVjdChsaXN0LCBsaXN0SXRlbXMpIHtcblx0cmV0dXJuIFtdLnJlZHVjZS5jYWxsKGxpc3RJdGVtcywgZnVuY3Rpb24gKGFjYywgbGlzdEl0ZW0pIHtcblx0XHR2YXIgdmFsdWUgPSB7XG5cdFx0XHRpZDogbGlzdEl0ZW0uZGF0YXNldC5pZCxcblx0XHRcdHRpdGxlOiBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCdzcGFuJykuaW5uZXJIVE1MXG5cdFx0fTtcblxuXHRcdHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuXHR9LCBbXSk7XG59O1xuXG52YXIgb25EcmFnVGV4dCA9IGV4cG9ydHMub25EcmFnVGV4dCA9IGZ1bmN0aW9uIG9uRHJhZ1RleHQobGlzdCwgbGlzdEl0ZW1zKSB7XG5cdHJldHVybiBbXS5yZWR1Y2UuY2FsbChsaXN0SXRlbXMsIGZ1bmN0aW9uIChhY2MsIGxpc3RJdGVtKSB7XG5cdFx0dmFyIHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3Rvcignc3BhbicpLmlubmVySFRNTDtcblxuXHRcdHJldHVybiBhY2MuY29uY2F0KFt2YWx1ZV0pO1xuXHR9LCBbXSk7XG59O1xuXG52YXIgb25SZW1vdmVPYmplY3QgPSBleHBvcnRzLm9uUmVtb3ZlT2JqZWN0ID0gZnVuY3Rpb24gb25SZW1vdmVPYmplY3QoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkge1xuXHRyZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoY3VycmVudCkge1xuXHRcdHJldHVybiBjdXJyZW50LnRpdGxlICE9PSBuZXdWYWx1ZTtcblx0fSk7XG59O1xuXG52YXIgb25SZW1vdmVUZXh0ID0gZXhwb3J0cy5vblJlbW92ZVRleHQgPSBmdW5jdGlvbiBvblJlbW92ZVRleHQoY3VycmVudFZhbHVlLCBuZXdWYWx1ZSkge1xuXHRyZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlcihmdW5jdGlvbiAoY3VycmVudCkge1xuXHRcdHJldHVybiBjdXJyZW50ICE9PSBuZXdWYWx1ZTtcblx0fSk7XG59O1xuXG4vKioqLyB9KSxcbi8qIDIwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHR2YWx1ZTogdHJ1ZVxufSk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IGZ1bmN0aW9uIChhcmdzKSB7XG5cdHZhciBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGFyZ3MucGFyZW50KTtcblxuXHRpZiAoIWZpZWxkcykge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdFtdLmZvckVhY2guY2FsbChmaWVsZHMsIGZ1bmN0aW9uIChhdXRvSXRlbSkge1xuXHRcdHZhciBoaWRkZW4gPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKGFyZ3MuaGlkZGVuKTtcblxuXHRcdCgwLCBfYXV0b3N1Z2dlc3QyLmRlZmF1bHQpKGFyZ3MuaW5wdXQsIGFyZ3MuZW5kcG9pbnQsIGZ1bmN0aW9uICh2YWx1ZSwgaW5wdXQpIHtcblx0XHRcdGhpZGRlbi52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcblx0XHRcdGpRdWVyeShoaWRkZW4pLnRyaWdnZXIoJ2NoYW5nZScpO1xuXHRcdH0sIGZ1bmN0aW9uICgpIHtcblx0XHRcdGhpZGRlbi52YWx1ZSA9ICcnO1xuXHRcdFx0alF1ZXJ5KGhpZGRlbikudHJpZ2dlcignY2hhbmdlJyk7XG5cdFx0fSk7XG5cdH0pO1xufTtcblxudmFyIF9hdXRvc3VnZ2VzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfYXV0b3N1Z2dlc3QyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYXV0b3N1Z2dlc3QpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGluZGV4LmJ1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9kaXN0L1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGI0NDU3Zjc4MjIzZmVmNGQxNWJlIiwidmFyIGc7XHJcblxyXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxyXG5nID0gKGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiB0aGlzO1xyXG59KSgpO1xyXG5cclxudHJ5IHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcclxuXHRnID0gZyB8fCBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkgfHwgKDEsZXZhbCkoXCJ0aGlzXCIpO1xyXG59IGNhdGNoKGUpIHtcclxuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxyXG5cdGlmKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpXHJcblx0XHRnID0gd2luZG93O1xyXG59XHJcblxyXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXHJcbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXHJcbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImNvbnN0IGlzSlNPTiA9ICggc3RyICkgPT4ge1xuXG5cdGlmICggdHlwZW9mICggc3RyICkgIT09ICdzdHJpbmcnICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHR0cnkge1xuXHRcdEpTT04ucGFyc2UoIHN0ciApO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9IGNhdGNoICggZSApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn07XG5cbmNvbnN0IGJ1aWxkUXVlcnkgPSAoIHZhbHVlICkgPT4ge1xuXHRyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZS50b0xvd2VyQ2FzZSgpICk7XG59O1xuXG5jb25zdCBvbkF1dG9TdWdnZXN0SW5wdXQgPSAoIGUgKSA9PiB7XG5cdGNvbnN0IGlucHV0ID0gZS50YXJnZXQ7XG5cdGNvbnN0IGlucHV0VmFsdWUgPSBpbnB1dC52YWx1ZTtcblx0Y29uc3QgbGlzdE5hbWUgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoICdsaXN0JyApO1xuXHRjb25zdCBsaXN0T3B0aW9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBsaXN0TmFtZSApLmNoaWxkTm9kZXM7XG5cblx0Y29uc3QgbWF0Y2ggPSBbXS5yZWR1Y2UuY2FsbCggbGlzdE9wdGlvbnMsICggYWNjLCBvcHRpb24gKSA9PiB7XG5cdFx0aWYgKCBvcHRpb24udmFsdWUgPT09IGlucHV0VmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gYWNjLmNvbmNhdCgge1xuXHRcdFx0XHRpZDogb3B0aW9uLmRhdGFzZXQuaWQsXG5cdFx0XHRcdHRpdGxlOiBvcHRpb24udmFsdWVcblx0XHRcdH0gKSA7XG5cdFx0fVxuXHRcdHJldHVybiBhY2M7XG5cdH0sIFtdICk7XG5cblx0cmV0dXJuICggbWF0Y2gubGVuZ3RoID09PSAwICkgPyBmYWxzZSA6IG1hdGNoWzBdO1xufTtcblxuY29uc3QgZ2V0T3B0aW9ucyA9ICggeGhyLCBjYWxsYmFjaywgaW5wdXQsIGVuZHBvaW50ICkgPT4ge1xuXHRjb25zdCBxdWVyeSA9IGJ1aWxkUXVlcnkoIGlucHV0LnZhbHVlICk7XG5cdGNvbnN0IHVybCA9IGVuZHBvaW50ICsgcXVlcnk7XG5cblx0aWYgKCB4aHIgKSB7XG5cdFx0eGhyLmFib3J0KCk7XG5cdH1cblxuXHR4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuXHR4aHIuYWRkRXZlbnRMaXN0ZW5lciggJ2xvYWQnLCAoIGV2dCApID0+IHtcblx0XHRjYWxsYmFjayggZmFsc2UsIGV2dCApO1xuXHR9LCBmYWxzZSApO1xuXG5cdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0aWYgKCB4aHIucmVhZHlTdGF0ZSA9PT0gWE1MSHR0cFJlcXVlc3QuRE9ORSAmJiB4aHIuc3RhdHVzID09PSAyMDAgKSB7XG5cdFx0XHRjYWxsYmFjayggZmFsc2UsIHsgcmVzdWx0czogSlNPTi5wYXJzZSggeGhyLnJlc3BvbnNlVGV4dCApLCBpbnB1dDogaW5wdXQgfSApO1xuXHRcdH0gZWxzZSBpZiAoIHhoci5yZWFkeVN0YXRlID09PSBYTUxIdHRwUmVxdWVzdC5ET05FICYmIHhoci5zdGF0dXMgPj0gNDAwICkge1xuXHRcdFx0aWYgKCB4aHIucmVzcG9uc2VUZXh0ICYmIGlzSlNPTiggeGhyLnJlc3BvbnNlVGV4dCApICkge1xuXHRcdFx0XHRjYWxsYmFjayggeyBtZXNzYWdlOiBKU09OLnBhcnNlKCB4aHIucmVzcG9uc2VUZXh0ICksIGlucHV0OiBpbnB1dCB9LCBmYWxzZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHR4aHIuYWRkRXZlbnRMaXN0ZW5lciggJ2Vycm9yJywgKCBldnQgKSA9PiB7XG5cdFx0Y2FsbGJhY2soIGV2dCwgZmFsc2UgKTtcblx0fSwgZmFsc2UgKTtcblxuXHR4aHIuYWRkRXZlbnRMaXN0ZW5lciggJ2Fib3J0JywgKCBldnQgKSA9PiB7XG5cdFx0Y2FsbGJhY2soIHRydWUsIGZhbHNlICk7XG5cdH0sIGZhbHNlICk7XG5cblx0eGhyLm9wZW4oICdHRVQnLCB1cmwsIHRydWUgKTtcblxuXHR4aHIuc2VuZCgpO1xuXG5cdHJldHVybiB4aHI7XG59O1xuXG5jb25zdCBjcmVhdGVPcHRpb24gPSAoIHZhbHVlICkgPT4ge1xuXHRyZXR1cm4gYDxvcHRpb24gZGF0YS1pZD0ke3ZhbHVlLmlkfSB2YWx1ZT1cIiR7dmFsdWUudGl0bGUucmVuZGVyZWR9XCI+YDtcbn07XG5cbmNvbnN0IGNyZWF0ZU9wdGlvbnMgPSAoIHJlc3VsdHMsIGlucHV0ICkgPT4ge1xuXHRjb25zdCBsaXN0TmFtZSA9IGlucHV0LmdldEF0dHJpYnV0ZSggJ2xpc3QnICk7XG5cdGNvbnN0IGRhdGFsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGxpc3ROYW1lICk7XG5cblx0Y29uc3QgbmV3T3B0aW9ucyA9IHJlc3VsdHMucmVkdWNlKCAoIGFjYywgcmVzdWx0ICkgPT4ge1xuXHRcdGNvbnN0IG9wdGlvbiA9IGNyZWF0ZU9wdGlvbiggcmVzdWx0ICk7XG5cblx0XHRyZXR1cm4gYWNjLmNvbmNhdCggb3B0aW9uICk7XG5cdH0sICcnICk7XG5cblx0aW5wdXQuY2xhc3NMaXN0LnJlbW92ZSggJ3Nob3cnICk7XG5cdGRhdGFsaXN0LmlubmVySFRNTCA9IG5ld09wdGlvbnM7XG59O1xuXG5jb25zdCB1cGRhdGVPcHRpb25zID0gKCBlcnJvciwgcmVzcG9uc2UgKSA9PiB7XG5cdGlmICggZXJyb3IgKSB7XG5cblx0XHRpZiAoIGVycm9yID09PSB0cnVlICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGVycm9yLmlucHV0LmNsYXNzTGlzdC5yZW1vdmUoICdzaG93JyApO1xuXHRcdGNvbnNvbGUud2FybiggZXJyb3IgKTtcblx0fVxuXG5cdGlmICggcmVzcG9uc2UgKSB7XG5cdFx0aWYgKCAhIEFycmF5LmlzQXJyYXkoIHJlc3BvbnNlLnJlc3VsdHMgKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRjcmVhdGVPcHRpb25zKCByZXNwb25zZS5yZXN1bHRzLCByZXNwb25zZS5pbnB1dCApO1xuXHR9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoIGF1dG9zdWdnZXN0LCBlbmRwb2ludCwgb25TZWxlY3QsIG9uRW1wdHkgKSB7XG5cblx0aWYgKCAhIGF1dG9zdWdnZXN0ICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGxldCB4aHIgPSBmYWxzZTtcblxuXHRhdXRvc3VnZ2VzdC5hZGRFdmVudExpc3RlbmVyKCAna2V5dXAnLCAoIGUgKSA9PiB7XG5cdFx0aWYgKCBlLnRhcmdldC52YWx1ZS5sZW5ndGggPT09IDAgJiYgb25FbXB0eSApIHtcblx0XHRcdG9uRW1wdHkoKTtcblx0XHR9XG5cblx0XHRpZiAoIGUudGFyZ2V0LnZhbHVlLmxlbmd0aCA8IDMgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0YXV0b3N1Z2dlc3QuY2xhc3NMaXN0LmFkZCggJ3Nob3cnICk7XG5cdFx0eGhyID0gZ2V0T3B0aW9ucyggeGhyLCB1cGRhdGVPcHRpb25zLCBhdXRvc3VnZ2VzdCwgZW5kcG9pbnQgKTtcblxuXHR9ICk7XG5cdGF1dG9zdWdnZXN0LmFkZEV2ZW50TGlzdGVuZXIoICdpbnB1dCcsICggZSApID0+IHtcblx0XHRjb25zdCB2YWx1ZSA9IG9uQXV0b1N1Z2dlc3RJbnB1dCggZSApO1xuXG5cdFx0aWYgKCB2YWx1ZSApIHtcblx0XHRcdG9uU2VsZWN0KCB2YWx1ZSwgYXV0b3N1Z2dlc3QgKTtcblx0XHR9XG5cdH0gKTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2F1dG9zdWdnZXN0LmpzIiwiLyogZXNsaW50IG5vLXVudXNlZC12YXJzOiBbXCJlcnJvclwiLCB7IFwidmFyc0lnbm9yZVBhdHRlcm5cIjogXCJiYXNlQ3NzXCIgfV0gKi9cbi8qIGdsb2JhbCBDdXN0b21pemVyQ3VyYXRpb24gKi9cblxuaW1wb3J0IGJhc2VDc3MgZnJvbSAnLi4vY3NzL2luZGV4LmNzcyc7XG5pbXBvcnQgYXV0b0xpc3QgZnJvbSAnLi9hdXRvc3VnZ2VzdC1saXN0JztcbmltcG9ydCBhdXRvSXRlbSBmcm9tICcuL2F1dG8taXRlbSc7XG5cbmNvbnN0IGNyZWF0ZUF1dG9TdWdnZXN0SXRlbSA9ICggdmFsdWUgKSA9PiB7XG5cdHJldHVybiBgPGxpIGNsYXNzPVwidGV4dC1saXN0LWl0ZW1cIiBkYXRhLWlkPVwiJHt2YWx1ZS5pZH1cIj5cbiAgICAgICAgPHNwYW4+JHt2YWx1ZS50aXRsZX08L3NwYW4+XG4gICAgICAgIDxzdmcgdmlld0JveD1cIjAgMCAyMCAyMFwiPlxuICAgICAgICAgICAgPHBhdGggZD1cIk0xMCAyYzQuNDIgMCA4IDMuNTggOCA4cy0zLjU4IDgtOCA4LTgtMy41OC04LTggMy41OC04XG5cdFx0XHQ4LTh6TTE1IDEzbC0zLTMgMy0zLTItMi0zIDMtMy0zLTIgMiAzIDMtMyAzIDIgMiAzLTMgMyAzelwiPjwvcGF0aD5cbiAgICAgICAgPC9zdmc+XG4gICAgPC9saT5gO1xufTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG5cdGF1dG9MaXN0KCB7XG5cdFx0cGFyZW50OiAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdCcsXG5cdFx0aW5wdXQ6ICcuY3VzdG9taXplci1jdXJhdGlvbi1saXN0LWlucHV0Jyxcblx0XHRsaXN0OiAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1saXN0Jyxcblx0XHRoaWRkZW46ICcuY3VzdG9taXplci1jdXJhdGlvbi1saXN0LWhpZGRlbicsXG5cdFx0bGlzdFRlbXBsYXRlOiBjcmVhdGVBdXRvU3VnZ2VzdEl0ZW0sXG5cdFx0ZW5kcG9pbnQ6IGAke0N1c3RvbWl6ZXJDdXJhdGlvbi5iYXNlVVJMfS93cC1qc29uL3dwL3YyLyR7Q3VzdG9taXplckN1cmF0aW9uLnJlc291cmNlfT9zZWFyY2g9YFxuXHR9ICk7XG5cblx0YXV0b0l0ZW0oIHtcblx0XHRwYXJlbnQ6ICcuY3VzdG9taXplci1jdXJhdGlvbicsXG5cdFx0aW5wdXQ6ICcuY3VzdG9taXplci1jdXJhdGlvbi1pbnB1dCcsXG5cdFx0aGlkZGVuOiAnLmN1c3RvbWl6ZXItY3VyYXRpb24taGlkZGVuJyxcblx0XHRlbmRwb2ludDogYCR7Q3VzdG9taXplckN1cmF0aW9uLmJhc2VVUkx9L3dwLWpzb24vd3AvdjIvJHtDdXN0b21pemVyQ3VyYXRpb24ucmVzb3VyY2V9P3NlYXJjaD1gXG5cdH0gKTtcbn0gKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2luZGV4LmpzIiwiLyogZ2xvYmFsIGpRdWVyeSAqL1xuXG5pbXBvcnQgbGlzdCBmcm9tICcuL2xpc3QnO1xuaW1wb3J0IGF1dG9TdWdnZXN0IGZyb20gJy4vYXV0b3N1Z2dlc3QnO1xuaW1wb3J0IGhpZGRlbiBmcm9tICcuL3NlcmlhbGl6ZWQtaW5wdXQnO1xuaW1wb3J0IHsgcmVtb3ZlSXRlbXMsIGRyYWdJdGVtcywgb25EcmFnT2JqZWN0LCBvblJlbW92ZU9iamVjdCwgY2hlY2tMaW1pdCB9IGZyb20gJy4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCBhcmdzICkge1xuXHRjb25zdCBmaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCBhcmdzLnBhcmVudCApO1xuXG5cdGlmICggISBmaWVsZHMgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0W10uZm9yRWFjaC5jYWxsKCBmaWVsZHMsICggYXV0b0xpc3QgKSA9PiB7XG5cdFx0Y29uc3QgSGlkZGVuID0gaGlkZGVuKCBhdXRvTGlzdCwgYXJncy5oaWRkZW4gKTtcblx0XHRjb25zdCBoaWRkZW5FbCA9IGF1dG9MaXN0LnF1ZXJ5U2VsZWN0b3IoIGFyZ3MuaGlkZGVuICk7XG5cdFx0Y29uc3QgcmVtb3ZlID0gcmVtb3ZlSXRlbXMoIEhpZGRlbiwgb25SZW1vdmVPYmplY3QsIGF1dG9MaXN0ICk7XG5cdFx0Y29uc3QgZHJhZyA9IGRyYWdJdGVtcyggSGlkZGVuLCBvbkRyYWdPYmplY3QgKTtcblx0XHRjb25zdCBMaXN0ID0gbGlzdCggYXV0b0xpc3QsIE9iamVjdC5hc3NpZ24oIGFyZ3MsIHsgb25EcmFnOiBkcmFnLCBvblJlbW92ZTogcmVtb3ZlfSApICk7XG5cblx0XHRhdXRvU3VnZ2VzdCggYXV0b0xpc3QucXVlcnlTZWxlY3RvciggYXJncy5pbnB1dCApLCBhcmdzLmVuZHBvaW50LCAoIHZhbHVlLCBpbnB1dCApID0+IHtcblx0XHRcdExpc3QuYWRkKCB2YWx1ZSApO1xuXHRcdFx0aW5wdXQudmFsdWUgPSAnJztcblx0XHRcdEhpZGRlbi5hZGQoIHZhbHVlICk7XG5cdFx0XHRjaGVja0xpbWl0KCBhdXRvTGlzdCApO1xuXHRcdFx0alF1ZXJ5KCBoaWRkZW5FbCApLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cdFx0fSApO1xuXHR9ICk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hdXRvc3VnZ2VzdC1saXN0LmpzIiwiaW1wb3J0IGRyYWd1bGEgZnJvbSAnZHJhZ3VsYSc7XG5cbmNvbnN0IHJlZ2lzdGVyUmVtb3ZlRXZlbnRzID0gKCBsaXN0LCBvblJlbW92ZSApID0+IHtcblx0Y29uc3QgbGlzdEl0ZW1zID0gbGlzdC5xdWVyeVNlbGVjdG9yQWxsKCAnbGknICk7XG5cblx0bGlzdC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCAoIGUgKSA9PiB7XG5cdFx0Y29uc3QgdGFyZ2V0ID0gKCBlLnRhcmdldC50YWdOYW1lID09PSAnc3ZnJyApID8gZS50YXJnZXQgOiBlLnRhcmdldC5jbG9zZXN0KCAnc3ZnJyApO1xuXG5cdFx0aWYgKCB0YXJnZXQudGFnTmFtZSA9PT0gJ3N2ZycgKSB7XG5cdFx0XHRjb25zdCBsaXN0SXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoICdsaScgKTtcblx0XHRcdGNvbnN0IHZhbHVlID0gbGlzdEl0ZW0ucXVlcnlTZWxlY3RvciggJ3NwYW4nICkuaW5uZXJIVE1MO1xuXG5cdFx0XHRsaXN0LnJlbW92ZUNoaWxkKCBsaXN0SXRlbSApO1xuXHRcdFx0b25SZW1vdmUoIHZhbHVlICk7XG5cdFx0fVxuXHR9ICk7XG5cblx0cmV0dXJuIGxpc3RJdGVtcztcbn07XG5cbmNvbnN0IHJlZ2lzdGVyRHJhZ0V2ZW50cyA9ICggbGlzdCwgY2FsbGJhY2sgKSA9PiB7XG5cdGNvbnN0IGRyYWtlID0gZHJhZ3VsYSggW2xpc3RdICk7XG5cblx0ZHJha2Uub24oICdkcmFnZW5kJywgKCBlbCApID0+IHtcblx0XHRjb25zdCBsaXN0SXRlbXMgPSBsaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoICdsaScgKTtcblxuXHRcdGNhbGxiYWNrKCBsaXN0LCBsaXN0SXRlbXMgKTtcblx0fSApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKCBwYXJlbnQsIGFyZ3MgKSB7XG5cdGNvbnN0IGxpc3QgPSBwYXJlbnQucXVlcnlTZWxlY3RvciggYXJncy5saXN0ICk7XG5cblx0cmVnaXN0ZXJEcmFnRXZlbnRzKCBsaXN0LCBhcmdzLm9uRHJhZyApO1xuXHRyZWdpc3RlclJlbW92ZUV2ZW50cyggbGlzdCwgYXJncy5vblJlbW92ZSApO1xuXG5cdHJldHVybiB7XG5cdFx0YWRkOiBmdW5jdGlvbiAoIHZhbHVlICkge1xuXHRcdFx0Y29uc3QgaHRtbCA9IGFyZ3MubGlzdFRlbXBsYXRlKCB2YWx1ZSApO1xuXHRcdFx0Y29uc3QgbGlzdEl0ZW0gPSBkb2N1bWVudC5jcmVhdGVSYW5nZSgpLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudCggaHRtbCApO1xuXG5cdFx0XHRsaXN0LmFwcGVuZENoaWxkKCBsaXN0SXRlbSApO1xuXHRcdH1cblx0fTtcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL2xpc3QuanMiLCIndXNlIHN0cmljdCc7XG5cbnZhciBlbWl0dGVyID0gcmVxdWlyZSgnY29udHJhL2VtaXR0ZXInKTtcbnZhciBjcm9zc3ZlbnQgPSByZXF1aXJlKCdjcm9zc3ZlbnQnKTtcbnZhciBjbGFzc2VzID0gcmVxdWlyZSgnLi9jbGFzc2VzJyk7XG52YXIgZG9jID0gZG9jdW1lbnQ7XG52YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuZnVuY3Rpb24gZHJhZ3VsYSAoaW5pdGlhbENvbnRhaW5lcnMsIG9wdGlvbnMpIHtcbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChsZW4gPT09IDEgJiYgQXJyYXkuaXNBcnJheShpbml0aWFsQ29udGFpbmVycykgPT09IGZhbHNlKSB7XG4gICAgb3B0aW9ucyA9IGluaXRpYWxDb250YWluZXJzO1xuICAgIGluaXRpYWxDb250YWluZXJzID0gW107XG4gIH1cbiAgdmFyIF9taXJyb3I7IC8vIG1pcnJvciBpbWFnZVxuICB2YXIgX3NvdXJjZTsgLy8gc291cmNlIGNvbnRhaW5lclxuICB2YXIgX2l0ZW07IC8vIGl0ZW0gYmVpbmcgZHJhZ2dlZFxuICB2YXIgX29mZnNldFg7IC8vIHJlZmVyZW5jZSB4XG4gIHZhciBfb2Zmc2V0WTsgLy8gcmVmZXJlbmNlIHlcbiAgdmFyIF9tb3ZlWDsgLy8gcmVmZXJlbmNlIG1vdmUgeFxuICB2YXIgX21vdmVZOyAvLyByZWZlcmVuY2UgbW92ZSB5XG4gIHZhciBfaW5pdGlhbFNpYmxpbmc7IC8vIHJlZmVyZW5jZSBzaWJsaW5nIHdoZW4gZ3JhYmJlZFxuICB2YXIgX2N1cnJlbnRTaWJsaW5nOyAvLyByZWZlcmVuY2Ugc2libGluZyBub3dcbiAgdmFyIF9jb3B5OyAvLyBpdGVtIHVzZWQgZm9yIGNvcHlpbmdcbiAgdmFyIF9yZW5kZXJUaW1lcjsgLy8gdGltZXIgZm9yIHNldFRpbWVvdXQgcmVuZGVyTWlycm9ySW1hZ2VcbiAgdmFyIF9sYXN0RHJvcFRhcmdldCA9IG51bGw7IC8vIGxhc3QgY29udGFpbmVyIGl0ZW0gd2FzIG92ZXJcbiAgdmFyIF9ncmFiYmVkOyAvLyBob2xkcyBtb3VzZWRvd24gY29udGV4dCB1bnRpbCBmaXJzdCBtb3VzZW1vdmVcblxuICB2YXIgbyA9IG9wdGlvbnMgfHwge307XG4gIGlmIChvLm1vdmVzID09PSB2b2lkIDApIHsgby5tb3ZlcyA9IGFsd2F5czsgfVxuICBpZiAoby5hY2NlcHRzID09PSB2b2lkIDApIHsgby5hY2NlcHRzID0gYWx3YXlzOyB9XG4gIGlmIChvLmludmFsaWQgPT09IHZvaWQgMCkgeyBvLmludmFsaWQgPSBpbnZhbGlkVGFyZ2V0OyB9XG4gIGlmIChvLmNvbnRhaW5lcnMgPT09IHZvaWQgMCkgeyBvLmNvbnRhaW5lcnMgPSBpbml0aWFsQ29udGFpbmVycyB8fCBbXTsgfVxuICBpZiAoby5pc0NvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8uaXNDb250YWluZXIgPSBuZXZlcjsgfVxuICBpZiAoby5jb3B5ID09PSB2b2lkIDApIHsgby5jb3B5ID0gZmFsc2U7IH1cbiAgaWYgKG8uY29weVNvcnRTb3VyY2UgPT09IHZvaWQgMCkgeyBvLmNvcHlTb3J0U291cmNlID0gZmFsc2U7IH1cbiAgaWYgKG8ucmV2ZXJ0T25TcGlsbCA9PT0gdm9pZCAwKSB7IG8ucmV2ZXJ0T25TcGlsbCA9IGZhbHNlOyB9XG4gIGlmIChvLnJlbW92ZU9uU3BpbGwgPT09IHZvaWQgMCkgeyBvLnJlbW92ZU9uU3BpbGwgPSBmYWxzZTsgfVxuICBpZiAoby5kaXJlY3Rpb24gPT09IHZvaWQgMCkgeyBvLmRpcmVjdGlvbiA9ICd2ZXJ0aWNhbCc7IH1cbiAgaWYgKG8uaWdub3JlSW5wdXRUZXh0U2VsZWN0aW9uID09PSB2b2lkIDApIHsgby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24gPSB0cnVlOyB9XG4gIGlmIChvLm1pcnJvckNvbnRhaW5lciA9PT0gdm9pZCAwKSB7IG8ubWlycm9yQ29udGFpbmVyID0gZG9jLmJvZHk7IH1cblxuICB2YXIgZHJha2UgPSBlbWl0dGVyKHtcbiAgICBjb250YWluZXJzOiBvLmNvbnRhaW5lcnMsXG4gICAgc3RhcnQ6IG1hbnVhbFN0YXJ0LFxuICAgIGVuZDogZW5kLFxuICAgIGNhbmNlbDogY2FuY2VsLFxuICAgIHJlbW92ZTogcmVtb3ZlLFxuICAgIGRlc3Ryb3k6IGRlc3Ryb3ksXG4gICAgY2FuTW92ZTogY2FuTW92ZSxcbiAgICBkcmFnZ2luZzogZmFsc2VcbiAgfSk7XG5cbiAgaWYgKG8ucmVtb3ZlT25TcGlsbCA9PT0gdHJ1ZSkge1xuICAgIGRyYWtlLm9uKCdvdmVyJywgc3BpbGxPdmVyKS5vbignb3V0Jywgc3BpbGxPdXQpO1xuICB9XG5cbiAgZXZlbnRzKCk7XG5cbiAgcmV0dXJuIGRyYWtlO1xuXG4gIGZ1bmN0aW9uIGlzQ29udGFpbmVyIChlbCkge1xuICAgIHJldHVybiBkcmFrZS5jb250YWluZXJzLmluZGV4T2YoZWwpICE9PSAtMSB8fCBvLmlzQ29udGFpbmVyKGVsKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGV2ZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICB0b3VjaHkoZG9jdW1lbnRFbGVtZW50LCBvcCwgJ21vdXNlZG93bicsIGdyYWIpO1xuICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsIG9wLCAnbW91c2V1cCcsIHJlbGVhc2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZXZlbnR1YWxNb3ZlbWVudHMgKHJlbW92ZSkge1xuICAgIHZhciBvcCA9IHJlbW92ZSA/ICdyZW1vdmUnIDogJ2FkZCc7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgb3AsICdtb3VzZW1vdmUnLCBzdGFydEJlY2F1c2VNb3VzZU1vdmVkKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1vdmVtZW50cyAocmVtb3ZlKSB7XG4gICAgdmFyIG9wID0gcmVtb3ZlID8gJ3JlbW92ZScgOiAnYWRkJztcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ3NlbGVjdHN0YXJ0JywgcHJldmVudEdyYWJiZWQpOyAvLyBJRThcbiAgICBjcm9zc3ZlbnRbb3BdKGRvY3VtZW50RWxlbWVudCwgJ2NsaWNrJywgcHJldmVudEdyYWJiZWQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVzdHJveSAoKSB7XG4gICAgZXZlbnRzKHRydWUpO1xuICAgIHJlbGVhc2Uoe30pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJldmVudEdyYWJiZWQgKGUpIHtcbiAgICBpZiAoX2dyYWJiZWQpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBncmFiIChlKSB7XG4gICAgX21vdmVYID0gZS5jbGllbnRYO1xuICAgIF9tb3ZlWSA9IGUuY2xpZW50WTtcblxuICAgIHZhciBpZ25vcmUgPSB3aGljaE1vdXNlQnV0dG9uKGUpICE9PSAxIHx8IGUubWV0YUtleSB8fCBlLmN0cmxLZXk7XG4gICAgaWYgKGlnbm9yZSkge1xuICAgICAgcmV0dXJuOyAvLyB3ZSBvbmx5IGNhcmUgYWJvdXQgaG9uZXN0LXRvLWdvZCBsZWZ0IGNsaWNrcyBhbmQgdG91Y2ggZXZlbnRzXG4gICAgfVxuICAgIHZhciBpdGVtID0gZS50YXJnZXQ7XG4gICAgdmFyIGNvbnRleHQgPSBjYW5TdGFydChpdGVtKTtcbiAgICBpZiAoIWNvbnRleHQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX2dyYWJiZWQgPSBjb250ZXh0O1xuICAgIGV2ZW50dWFsTW92ZW1lbnRzKCk7XG4gICAgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicpIHtcbiAgICAgIGlmIChpc0lucHV0KGl0ZW0pKSB7IC8vIHNlZSBhbHNvOiBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMjA4XG4gICAgICAgIGl0ZW0uZm9jdXMoKTsgLy8gZml4ZXMgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzE3NlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyAvLyBmaXhlcyBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMTU1XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRCZWNhdXNlTW91c2VNb3ZlZCAoZSkge1xuICAgIGlmICghX2dyYWJiZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHdoaWNoTW91c2VCdXR0b24oZSkgPT09IDApIHtcbiAgICAgIHJlbGVhc2Uoe30pO1xuICAgICAgcmV0dXJuOyAvLyB3aGVuIHRleHQgaXMgc2VsZWN0ZWQgb24gYW4gaW5wdXQgYW5kIHRoZW4gZHJhZ2dlZCwgbW91c2V1cCBkb2Vzbid0IGZpcmUuIHRoaXMgaXMgb3VyIG9ubHkgaG9wZVxuICAgIH1cbiAgICAvLyB0cnV0aHkgY2hlY2sgZml4ZXMgIzIzOSwgZXF1YWxpdHkgZml4ZXMgIzIwN1xuICAgIGlmIChlLmNsaWVudFggIT09IHZvaWQgMCAmJiBlLmNsaWVudFggPT09IF9tb3ZlWCAmJiBlLmNsaWVudFkgIT09IHZvaWQgMCAmJiBlLmNsaWVudFkgPT09IF9tb3ZlWSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoby5pZ25vcmVJbnB1dFRleHRTZWxlY3Rpb24pIHtcbiAgICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICAgIHZhciBjbGllbnRZID0gZ2V0Q29vcmQoJ2NsaWVudFknLCBlKTtcbiAgICAgIHZhciBlbGVtZW50QmVoaW5kQ3Vyc29yID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoY2xpZW50WCwgY2xpZW50WSk7XG4gICAgICBpZiAoaXNJbnB1dChlbGVtZW50QmVoaW5kQ3Vyc29yKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGdyYWJiZWQgPSBfZ3JhYmJlZDsgLy8gY2FsbCB0byBlbmQoKSB1bnNldHMgX2dyYWJiZWRcbiAgICBldmVudHVhbE1vdmVtZW50cyh0cnVlKTtcbiAgICBtb3ZlbWVudHMoKTtcbiAgICBlbmQoKTtcbiAgICBzdGFydChncmFiYmVkKTtcblxuICAgIHZhciBvZmZzZXQgPSBnZXRPZmZzZXQoX2l0ZW0pO1xuICAgIF9vZmZzZXRYID0gZ2V0Q29vcmQoJ3BhZ2VYJywgZSkgLSBvZmZzZXQubGVmdDtcbiAgICBfb2Zmc2V0WSA9IGdldENvb3JkKCdwYWdlWScsIGUpIC0gb2Zmc2V0LnRvcDtcblxuICAgIGNsYXNzZXMuYWRkKF9jb3B5IHx8IF9pdGVtLCAnZ3UtdHJhbnNpdCcpO1xuICAgIHJlbmRlck1pcnJvckltYWdlKCk7XG4gICAgZHJhZyhlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhblN0YXJ0IChpdGVtKSB7XG4gICAgaWYgKGRyYWtlLmRyYWdnaW5nICYmIF9taXJyb3IpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzQ29udGFpbmVyKGl0ZW0pKSB7XG4gICAgICByZXR1cm47IC8vIGRvbid0IGRyYWcgY29udGFpbmVyIGl0c2VsZlxuICAgIH1cbiAgICB2YXIgaGFuZGxlID0gaXRlbTtcbiAgICB3aGlsZSAoZ2V0UGFyZW50KGl0ZW0pICYmIGlzQ29udGFpbmVyKGdldFBhcmVudChpdGVtKSkgPT09IGZhbHNlKSB7XG4gICAgICBpZiAoby5pbnZhbGlkKGl0ZW0sIGhhbmRsZSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaXRlbSA9IGdldFBhcmVudChpdGVtKTsgLy8gZHJhZyB0YXJnZXQgc2hvdWxkIGJlIGEgdG9wIGVsZW1lbnRcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBzb3VyY2UgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKCFzb3VyY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG8uaW52YWxpZChpdGVtLCBoYW5kbGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1vdmFibGUgPSBvLm1vdmVzKGl0ZW0sIHNvdXJjZSwgaGFuZGxlLCBuZXh0RWwoaXRlbSkpO1xuICAgIGlmICghbW92YWJsZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpdGVtOiBpdGVtLFxuICAgICAgc291cmNlOiBzb3VyY2VcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuTW92ZSAoaXRlbSkge1xuICAgIHJldHVybiAhIWNhblN0YXJ0KGl0ZW0pO1xuICB9XG5cbiAgZnVuY3Rpb24gbWFudWFsU3RhcnQgKGl0ZW0pIHtcbiAgICB2YXIgY29udGV4dCA9IGNhblN0YXJ0KGl0ZW0pO1xuICAgIGlmIChjb250ZXh0KSB7XG4gICAgICBzdGFydChjb250ZXh0KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzdGFydCAoY29udGV4dCkge1xuICAgIGlmIChpc0NvcHkoY29udGV4dC5pdGVtLCBjb250ZXh0LnNvdXJjZSkpIHtcbiAgICAgIF9jb3B5ID0gY29udGV4dC5pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9jb3B5LCBjb250ZXh0Lml0ZW0sICdjb3B5Jyk7XG4gICAgfVxuXG4gICAgX3NvdXJjZSA9IGNvbnRleHQuc291cmNlO1xuICAgIF9pdGVtID0gY29udGV4dC5pdGVtO1xuICAgIF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IG5leHRFbChjb250ZXh0Lml0ZW0pO1xuXG4gICAgZHJha2UuZHJhZ2dpbmcgPSB0cnVlO1xuICAgIGRyYWtlLmVtaXQoJ2RyYWcnLCBfaXRlbSwgX3NvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpbnZhbGlkVGFyZ2V0ICgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBlbmQgKCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICBkcm9wKGl0ZW0sIGdldFBhcmVudChpdGVtKSk7XG4gIH1cblxuICBmdW5jdGlvbiB1bmdyYWIgKCkge1xuICAgIF9ncmFiYmVkID0gZmFsc2U7XG4gICAgZXZlbnR1YWxNb3ZlbWVudHModHJ1ZSk7XG4gICAgbW92ZW1lbnRzKHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVsZWFzZSAoZSkge1xuICAgIHVuZ3JhYigpO1xuXG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBjbGllbnRYID0gZ2V0Q29vcmQoJ2NsaWVudFgnLCBlKTtcbiAgICB2YXIgY2xpZW50WSA9IGdldENvb3JkKCdjbGllbnRZJywgZSk7XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICBpZiAoZHJvcFRhcmdldCAmJiAoKF9jb3B5ICYmIG8uY29weVNvcnRTb3VyY2UpIHx8ICghX2NvcHkgfHwgZHJvcFRhcmdldCAhPT0gX3NvdXJjZSkpKSB7XG4gICAgICBkcm9wKGl0ZW0sIGRyb3BUYXJnZXQpO1xuICAgIH0gZWxzZSBpZiAoby5yZW1vdmVPblNwaWxsKSB7XG4gICAgICByZW1vdmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FuY2VsKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJvcCAoaXRlbSwgdGFyZ2V0KSB7XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoX2NvcHkgJiYgby5jb3B5U29ydFNvdXJjZSAmJiB0YXJnZXQgPT09IF9zb3VyY2UpIHtcbiAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChfaXRlbSk7XG4gICAgfVxuICAgIGlmIChpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0KSkge1xuICAgICAgZHJha2UuZW1pdCgnY2FuY2VsJywgaXRlbSwgX3NvdXJjZSwgX3NvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRyYWtlLmVtaXQoJ2Ryb3AnLCBpdGVtLCB0YXJnZXQsIF9zb3VyY2UsIF9jdXJyZW50U2libGluZyk7XG4gICAgfVxuICAgIGNsZWFudXAoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZSAoKSB7XG4gICAgaWYgKCFkcmFrZS5kcmFnZ2luZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgaWYgKHBhcmVudCkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgIH1cbiAgICBkcmFrZS5lbWl0KF9jb3B5ID8gJ2NhbmNlbCcgOiAncmVtb3ZlJywgaXRlbSwgcGFyZW50LCBfc291cmNlKTtcbiAgICBjbGVhbnVwKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjYW5jZWwgKHJldmVydCkge1xuICAgIGlmICghZHJha2UuZHJhZ2dpbmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHJldmVydHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCA/IHJldmVydCA6IG8ucmV2ZXJ0T25TcGlsbDtcbiAgICB2YXIgaXRlbSA9IF9jb3B5IHx8IF9pdGVtO1xuICAgIHZhciBwYXJlbnQgPSBnZXRQYXJlbnQoaXRlbSk7XG4gICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQocGFyZW50KTtcbiAgICBpZiAoaW5pdGlhbCA9PT0gZmFsc2UgJiYgcmV2ZXJ0cykge1xuICAgICAgaWYgKF9jb3B5KSB7XG4gICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoX2NvcHkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfc291cmNlLmluc2VydEJlZm9yZShpdGVtLCBfaW5pdGlhbFNpYmxpbmcpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5pdGlhbCB8fCByZXZlcnRzKSB7XG4gICAgICBkcmFrZS5lbWl0KCdjYW5jZWwnLCBpdGVtLCBfc291cmNlLCBfc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZHJha2UuZW1pdCgnZHJvcCcsIGl0ZW0sIHBhcmVudCwgX3NvdXJjZSwgX2N1cnJlbnRTaWJsaW5nKTtcbiAgICB9XG4gICAgY2xlYW51cCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2xlYW51cCAoKSB7XG4gICAgdmFyIGl0ZW0gPSBfY29weSB8fCBfaXRlbTtcbiAgICB1bmdyYWIoKTtcbiAgICByZW1vdmVNaXJyb3JJbWFnZSgpO1xuICAgIGlmIChpdGVtKSB7XG4gICAgICBjbGFzc2VzLnJtKGl0ZW0sICdndS10cmFuc2l0Jyk7XG4gICAgfVxuICAgIGlmIChfcmVuZGVyVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dChfcmVuZGVyVGltZXIpO1xuICAgIH1cbiAgICBkcmFrZS5kcmFnZ2luZyA9IGZhbHNlO1xuICAgIGlmIChfbGFzdERyb3BUYXJnZXQpIHtcbiAgICAgIGRyYWtlLmVtaXQoJ291dCcsIGl0ZW0sIF9sYXN0RHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGRyYWtlLmVtaXQoJ2RyYWdlbmQnLCBpdGVtKTtcbiAgICBfc291cmNlID0gX2l0ZW0gPSBfY29weSA9IF9pbml0aWFsU2libGluZyA9IF9jdXJyZW50U2libGluZyA9IF9yZW5kZXJUaW1lciA9IF9sYXN0RHJvcFRhcmdldCA9IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBpc0luaXRpYWxQbGFjZW1lbnQgKHRhcmdldCwgcykge1xuICAgIHZhciBzaWJsaW5nO1xuICAgIGlmIChzICE9PSB2b2lkIDApIHtcbiAgICAgIHNpYmxpbmcgPSBzO1xuICAgIH0gZWxzZSBpZiAoX21pcnJvcikge1xuICAgICAgc2libGluZyA9IF9jdXJyZW50U2libGluZztcbiAgICB9IGVsc2Uge1xuICAgICAgc2libGluZyA9IG5leHRFbChfY29weSB8fCBfaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiB0YXJnZXQgPT09IF9zb3VyY2UgJiYgc2libGluZyA9PT0gX2luaXRpYWxTaWJsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gZmluZERyb3BUYXJnZXQgKGVsZW1lbnRCZWhpbmRDdXJzb3IsIGNsaWVudFgsIGNsaWVudFkpIHtcbiAgICB2YXIgdGFyZ2V0ID0gZWxlbWVudEJlaGluZEN1cnNvcjtcbiAgICB3aGlsZSAodGFyZ2V0ICYmICFhY2NlcHRlZCgpKSB7XG4gICAgICB0YXJnZXQgPSBnZXRQYXJlbnQodGFyZ2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcblxuICAgIGZ1bmN0aW9uIGFjY2VwdGVkICgpIHtcbiAgICAgIHZhciBkcm9wcGFibGUgPSBpc0NvbnRhaW5lcih0YXJnZXQpO1xuICAgICAgaWYgKGRyb3BwYWJsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgaW1tZWRpYXRlID0gZ2V0SW1tZWRpYXRlQ2hpbGQodGFyZ2V0LCBlbGVtZW50QmVoaW5kQ3Vyc29yKTtcbiAgICAgIHZhciByZWZlcmVuY2UgPSBnZXRSZWZlcmVuY2UodGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgICAgdmFyIGluaXRpYWwgPSBpc0luaXRpYWxQbGFjZW1lbnQodGFyZ2V0LCByZWZlcmVuY2UpO1xuICAgICAgaWYgKGluaXRpYWwpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7IC8vIHNob3VsZCBhbHdheXMgYmUgYWJsZSB0byBkcm9wIGl0IHJpZ2h0IGJhY2sgd2hlcmUgaXQgd2FzXG4gICAgICB9XG4gICAgICByZXR1cm4gby5hY2NlcHRzKF9pdGVtLCB0YXJnZXQsIF9zb3VyY2UsIHJlZmVyZW5jZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZHJhZyAoZSkge1xuICAgIGlmICghX21pcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICB2YXIgY2xpZW50WCA9IGdldENvb3JkKCdjbGllbnRYJywgZSk7XG4gICAgdmFyIGNsaWVudFkgPSBnZXRDb29yZCgnY2xpZW50WScsIGUpO1xuICAgIHZhciB4ID0gY2xpZW50WCAtIF9vZmZzZXRYO1xuICAgIHZhciB5ID0gY2xpZW50WSAtIF9vZmZzZXRZO1xuXG4gICAgX21pcnJvci5zdHlsZS5sZWZ0ID0geCArICdweCc7XG4gICAgX21pcnJvci5zdHlsZS50b3AgPSB5ICsgJ3B4JztcblxuICAgIHZhciBpdGVtID0gX2NvcHkgfHwgX2l0ZW07XG4gICAgdmFyIGVsZW1lbnRCZWhpbmRDdXJzb3IgPSBnZXRFbGVtZW50QmVoaW5kUG9pbnQoX21pcnJvciwgY2xpZW50WCwgY2xpZW50WSk7XG4gICAgdmFyIGRyb3BUYXJnZXQgPSBmaW5kRHJvcFRhcmdldChlbGVtZW50QmVoaW5kQ3Vyc29yLCBjbGllbnRYLCBjbGllbnRZKTtcbiAgICB2YXIgY2hhbmdlZCA9IGRyb3BUYXJnZXQgIT09IG51bGwgJiYgZHJvcFRhcmdldCAhPT0gX2xhc3REcm9wVGFyZ2V0O1xuICAgIGlmIChjaGFuZ2VkIHx8IGRyb3BUYXJnZXQgPT09IG51bGwpIHtcbiAgICAgIG91dCgpO1xuICAgICAgX2xhc3REcm9wVGFyZ2V0ID0gZHJvcFRhcmdldDtcbiAgICAgIG92ZXIoKTtcbiAgICB9XG4gICAgdmFyIHBhcmVudCA9IGdldFBhcmVudChpdGVtKTtcbiAgICBpZiAoZHJvcFRhcmdldCA9PT0gX3NvdXJjZSAmJiBfY29weSAmJiAhby5jb3B5U29ydFNvdXJjZSkge1xuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQoaXRlbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWZlcmVuY2U7XG4gICAgdmFyIGltbWVkaWF0ZSA9IGdldEltbWVkaWF0ZUNoaWxkKGRyb3BUYXJnZXQsIGVsZW1lbnRCZWhpbmRDdXJzb3IpO1xuICAgIGlmIChpbW1lZGlhdGUgIT09IG51bGwpIHtcbiAgICAgIHJlZmVyZW5jZSA9IGdldFJlZmVyZW5jZShkcm9wVGFyZ2V0LCBpbW1lZGlhdGUsIGNsaWVudFgsIGNsaWVudFkpO1xuICAgIH0gZWxzZSBpZiAoby5yZXZlcnRPblNwaWxsID09PSB0cnVlICYmICFfY29weSkge1xuICAgICAgcmVmZXJlbmNlID0gX2luaXRpYWxTaWJsaW5nO1xuICAgICAgZHJvcFRhcmdldCA9IF9zb3VyY2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChfY29weSAmJiBwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAocmVmZXJlbmNlID09PSBudWxsICYmIGNoYW5nZWQpIHx8XG4gICAgICByZWZlcmVuY2UgIT09IGl0ZW0gJiZcbiAgICAgIHJlZmVyZW5jZSAhPT0gbmV4dEVsKGl0ZW0pXG4gICAgKSB7XG4gICAgICBfY3VycmVudFNpYmxpbmcgPSByZWZlcmVuY2U7XG4gICAgICBkcm9wVGFyZ2V0Lmluc2VydEJlZm9yZShpdGVtLCByZWZlcmVuY2UpO1xuICAgICAgZHJha2UuZW1pdCgnc2hhZG93JywgaXRlbSwgZHJvcFRhcmdldCwgX3NvdXJjZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG1vdmVkICh0eXBlKSB7IGRyYWtlLmVtaXQodHlwZSwgaXRlbSwgX2xhc3REcm9wVGFyZ2V0LCBfc291cmNlKTsgfVxuICAgIGZ1bmN0aW9uIG92ZXIgKCkgeyBpZiAoY2hhbmdlZCkgeyBtb3ZlZCgnb3ZlcicpOyB9IH1cbiAgICBmdW5jdGlvbiBvdXQgKCkgeyBpZiAoX2xhc3REcm9wVGFyZ2V0KSB7IG1vdmVkKCdvdXQnKTsgfSB9XG4gIH1cblxuICBmdW5jdGlvbiBzcGlsbE92ZXIgKGVsKSB7XG4gICAgY2xhc3Nlcy5ybShlbCwgJ2d1LWhpZGUnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNwaWxsT3V0IChlbCkge1xuICAgIGlmIChkcmFrZS5kcmFnZ2luZykgeyBjbGFzc2VzLmFkZChlbCwgJ2d1LWhpZGUnKTsgfVxuICB9XG5cbiAgZnVuY3Rpb24gcmVuZGVyTWlycm9ySW1hZ2UgKCkge1xuICAgIGlmIChfbWlycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciByZWN0ID0gX2l0ZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgX21pcnJvciA9IF9pdGVtLmNsb25lTm9kZSh0cnVlKTtcbiAgICBfbWlycm9yLnN0eWxlLndpZHRoID0gZ2V0UmVjdFdpZHRoKHJlY3QpICsgJ3B4JztcbiAgICBfbWlycm9yLnN0eWxlLmhlaWdodCA9IGdldFJlY3RIZWlnaHQocmVjdCkgKyAncHgnO1xuICAgIGNsYXNzZXMucm0oX21pcnJvciwgJ2d1LXRyYW5zaXQnKTtcbiAgICBjbGFzc2VzLmFkZChfbWlycm9yLCAnZ3UtbWlycm9yJyk7XG4gICAgby5taXJyb3JDb250YWluZXIuYXBwZW5kQ2hpbGQoX21pcnJvcik7XG4gICAgdG91Y2h5KGRvY3VtZW50RWxlbWVudCwgJ2FkZCcsICdtb3VzZW1vdmUnLCBkcmFnKTtcbiAgICBjbGFzc2VzLmFkZChvLm1pcnJvckNvbnRhaW5lciwgJ2d1LXVuc2VsZWN0YWJsZScpO1xuICAgIGRyYWtlLmVtaXQoJ2Nsb25lZCcsIF9taXJyb3IsIF9pdGVtLCAnbWlycm9yJyk7XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVNaXJyb3JJbWFnZSAoKSB7XG4gICAgaWYgKF9taXJyb3IpIHtcbiAgICAgIGNsYXNzZXMucm0oby5taXJyb3JDb250YWluZXIsICdndS11bnNlbGVjdGFibGUnKTtcbiAgICAgIHRvdWNoeShkb2N1bWVudEVsZW1lbnQsICdyZW1vdmUnLCAnbW91c2Vtb3ZlJywgZHJhZyk7XG4gICAgICBnZXRQYXJlbnQoX21pcnJvcikucmVtb3ZlQ2hpbGQoX21pcnJvcik7XG4gICAgICBfbWlycm9yID0gbnVsbDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJbW1lZGlhdGVDaGlsZCAoZHJvcFRhcmdldCwgdGFyZ2V0KSB7XG4gICAgdmFyIGltbWVkaWF0ZSA9IHRhcmdldDtcbiAgICB3aGlsZSAoaW1tZWRpYXRlICE9PSBkcm9wVGFyZ2V0ICYmIGdldFBhcmVudChpbW1lZGlhdGUpICE9PSBkcm9wVGFyZ2V0KSB7XG4gICAgICBpbW1lZGlhdGUgPSBnZXRQYXJlbnQoaW1tZWRpYXRlKTtcbiAgICB9XG4gICAgaWYgKGltbWVkaWF0ZSA9PT0gZG9jdW1lbnRFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGltbWVkaWF0ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFJlZmVyZW5jZSAoZHJvcFRhcmdldCwgdGFyZ2V0LCB4LCB5KSB7XG4gICAgdmFyIGhvcml6b250YWwgPSBvLmRpcmVjdGlvbiA9PT0gJ2hvcml6b250YWwnO1xuICAgIHZhciByZWZlcmVuY2UgPSB0YXJnZXQgIT09IGRyb3BUYXJnZXQgPyBpbnNpZGUoKSA6IG91dHNpZGUoKTtcbiAgICByZXR1cm4gcmVmZXJlbmNlO1xuXG4gICAgZnVuY3Rpb24gb3V0c2lkZSAoKSB7IC8vIHNsb3dlciwgYnV0IGFibGUgdG8gZmlndXJlIG91dCBhbnkgcG9zaXRpb25cbiAgICAgIHZhciBsZW4gPSBkcm9wVGFyZ2V0LmNoaWxkcmVuLmxlbmd0aDtcbiAgICAgIHZhciBpO1xuICAgICAgdmFyIGVsO1xuICAgICAgdmFyIHJlY3Q7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgZWwgPSBkcm9wVGFyZ2V0LmNoaWxkcmVuW2ldO1xuICAgICAgICByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGlmIChob3Jpem9udGFsICYmIChyZWN0LmxlZnQgKyByZWN0LndpZHRoIC8gMikgPiB4KSB7IHJldHVybiBlbDsgfVxuICAgICAgICBpZiAoIWhvcml6b250YWwgJiYgKHJlY3QudG9wICsgcmVjdC5oZWlnaHQgLyAyKSA+IHkpIHsgcmV0dXJuIGVsOyB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnNpZGUgKCkgeyAvLyBmYXN0ZXIsIGJ1dCBvbmx5IGF2YWlsYWJsZSBpZiBkcm9wcGVkIGluc2lkZSBhIGNoaWxkIGVsZW1lbnRcbiAgICAgIHZhciByZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgaWYgKGhvcml6b250YWwpIHtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoeCA+IHJlY3QubGVmdCArIGdldFJlY3RXaWR0aChyZWN0KSAvIDIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc29sdmUoeSA+IHJlY3QudG9wICsgZ2V0UmVjdEhlaWdodChyZWN0KSAvIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlc29sdmUgKGFmdGVyKSB7XG4gICAgICByZXR1cm4gYWZ0ZXIgPyBuZXh0RWwodGFyZ2V0KSA6IHRhcmdldDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0NvcHkgKGl0ZW0sIGNvbnRhaW5lcikge1xuICAgIHJldHVybiB0eXBlb2Ygby5jb3B5ID09PSAnYm9vbGVhbicgPyBvLmNvcHkgOiBvLmNvcHkoaXRlbSwgY29udGFpbmVyKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0b3VjaHkgKGVsLCBvcCwgdHlwZSwgZm4pIHtcbiAgdmFyIHRvdWNoID0ge1xuICAgIG1vdXNldXA6ICd0b3VjaGVuZCcsXG4gICAgbW91c2Vkb3duOiAndG91Y2hzdGFydCcsXG4gICAgbW91c2Vtb3ZlOiAndG91Y2htb3ZlJ1xuICB9O1xuICB2YXIgcG9pbnRlcnMgPSB7XG4gICAgbW91c2V1cDogJ3BvaW50ZXJ1cCcsXG4gICAgbW91c2Vkb3duOiAncG9pbnRlcmRvd24nLFxuICAgIG1vdXNlbW92ZTogJ3BvaW50ZXJtb3ZlJ1xuICB9O1xuICB2YXIgbWljcm9zb2Z0ID0ge1xuICAgIG1vdXNldXA6ICdNU1BvaW50ZXJVcCcsXG4gICAgbW91c2Vkb3duOiAnTVNQb2ludGVyRG93bicsXG4gICAgbW91c2Vtb3ZlOiAnTVNQb2ludGVyTW92ZSdcbiAgfTtcbiAgaWYgKGdsb2JhbC5uYXZpZ2F0b3IucG9pbnRlckVuYWJsZWQpIHtcbiAgICBjcm9zc3ZlbnRbb3BdKGVsLCBwb2ludGVyc1t0eXBlXSwgZm4pO1xuICB9IGVsc2UgaWYgKGdsb2JhbC5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIG1pY3Jvc29mdFt0eXBlXSwgZm4pO1xuICB9IGVsc2Uge1xuICAgIGNyb3NzdmVudFtvcF0oZWwsIHRvdWNoW3R5cGVdLCBmbik7XG4gICAgY3Jvc3N2ZW50W29wXShlbCwgdHlwZSwgZm4pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdoaWNoTW91c2VCdXR0b24gKGUpIHtcbiAgaWYgKGUudG91Y2hlcyAhPT0gdm9pZCAwKSB7IHJldHVybiBlLnRvdWNoZXMubGVuZ3RoOyB9XG4gIGlmIChlLndoaWNoICE9PSB2b2lkIDAgJiYgZS53aGljaCAhPT0gMCkgeyByZXR1cm4gZS53aGljaDsgfSAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2JldmFjcXVhL2RyYWd1bGEvaXNzdWVzLzI2MVxuICBpZiAoZS5idXR0b25zICE9PSB2b2lkIDApIHsgcmV0dXJuIGUuYnV0dG9uczsgfVxuICB2YXIgYnV0dG9uID0gZS5idXR0b247XG4gIGlmIChidXR0b24gIT09IHZvaWQgMCkgeyAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvYmxvYi85OWU4ZmYxYmFhN2FlMzQxZTk0YmI4OWMzZTg0NTcwYzdjM2FkOWVhL3NyYy9ldmVudC5qcyNMNTczLUw1NzVcbiAgICByZXR1cm4gYnV0dG9uICYgMSA/IDEgOiBidXR0b24gJiAyID8gMyA6IChidXR0b24gJiA0ID8gMiA6IDApO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE9mZnNldCAoZWwpIHtcbiAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIHtcbiAgICBsZWZ0OiByZWN0LmxlZnQgKyBnZXRTY3JvbGwoJ3Njcm9sbExlZnQnLCAncGFnZVhPZmZzZXQnKSxcbiAgICB0b3A6IHJlY3QudG9wICsgZ2V0U2Nyb2xsKCdzY3JvbGxUb3AnLCAncGFnZVlPZmZzZXQnKVxuICB9O1xufVxuXG5mdW5jdGlvbiBnZXRTY3JvbGwgKHNjcm9sbFByb3AsIG9mZnNldFByb3ApIHtcbiAgaWYgKHR5cGVvZiBnbG9iYWxbb2Zmc2V0UHJvcF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGdsb2JhbFtvZmZzZXRQcm9wXTtcbiAgfVxuICBpZiAoZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgIHJldHVybiBkb2N1bWVudEVsZW1lbnRbc2Nyb2xsUHJvcF07XG4gIH1cbiAgcmV0dXJuIGRvYy5ib2R5W3Njcm9sbFByb3BdO1xufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50QmVoaW5kUG9pbnQgKHBvaW50LCB4LCB5KSB7XG4gIHZhciBwID0gcG9pbnQgfHwge307XG4gIHZhciBzdGF0ZSA9IHAuY2xhc3NOYW1lO1xuICB2YXIgZWw7XG4gIHAuY2xhc3NOYW1lICs9ICcgZ3UtaGlkZSc7XG4gIGVsID0gZG9jLmVsZW1lbnRGcm9tUG9pbnQoeCwgeSk7XG4gIHAuY2xhc3NOYW1lID0gc3RhdGU7XG4gIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gbmV2ZXIgKCkgeyByZXR1cm4gZmFsc2U7IH1cbmZ1bmN0aW9uIGFsd2F5cyAoKSB7IHJldHVybiB0cnVlOyB9XG5mdW5jdGlvbiBnZXRSZWN0V2lkdGggKHJlY3QpIHsgcmV0dXJuIHJlY3Qud2lkdGggfHwgKHJlY3QucmlnaHQgLSByZWN0LmxlZnQpOyB9XG5mdW5jdGlvbiBnZXRSZWN0SGVpZ2h0IChyZWN0KSB7IHJldHVybiByZWN0LmhlaWdodCB8fCAocmVjdC5ib3R0b20gLSByZWN0LnRvcCk7IH1cbmZ1bmN0aW9uIGdldFBhcmVudCAoZWwpIHsgcmV0dXJuIGVsLnBhcmVudE5vZGUgPT09IGRvYyA/IG51bGwgOiBlbC5wYXJlbnROb2RlOyB9XG5mdW5jdGlvbiBpc0lucHV0IChlbCkgeyByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnIHx8IGVsLnRhZ05hbWUgPT09ICdTRUxFQ1QnIHx8IGlzRWRpdGFibGUoZWwpOyB9XG5mdW5jdGlvbiBpc0VkaXRhYmxlIChlbCkge1xuICBpZiAoIWVsKSB7IHJldHVybiBmYWxzZTsgfSAvLyBubyBwYXJlbnRzIHdlcmUgZWRpdGFibGVcbiAgaWYgKGVsLmNvbnRlbnRFZGl0YWJsZSA9PT0gJ2ZhbHNlJykgeyByZXR1cm4gZmFsc2U7IH0gLy8gc3RvcCB0aGUgbG9va3VwXG4gIGlmIChlbC5jb250ZW50RWRpdGFibGUgPT09ICd0cnVlJykgeyByZXR1cm4gdHJ1ZTsgfSAvLyBmb3VuZCBhIGNvbnRlbnRFZGl0YWJsZSBlbGVtZW50IGluIHRoZSBjaGFpblxuICByZXR1cm4gaXNFZGl0YWJsZShnZXRQYXJlbnQoZWwpKTsgLy8gY29udGVudEVkaXRhYmxlIGlzIHNldCB0byAnaW5oZXJpdCdcbn1cblxuZnVuY3Rpb24gbmV4dEVsIChlbCkge1xuICByZXR1cm4gZWwubmV4dEVsZW1lbnRTaWJsaW5nIHx8IG1hbnVhbGx5KCk7XG4gIGZ1bmN0aW9uIG1hbnVhbGx5ICgpIHtcbiAgICB2YXIgc2libGluZyA9IGVsO1xuICAgIGRvIHtcbiAgICAgIHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nO1xuICAgIH0gd2hpbGUgKHNpYmxpbmcgJiYgc2libGluZy5ub2RlVHlwZSAhPT0gMSk7XG4gICAgcmV0dXJuIHNpYmxpbmc7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRIb3N0IChlKSB7XG4gIC8vIG9uIHRvdWNoZW5kIGV2ZW50LCB3ZSBoYXZlIHRvIHVzZSBgZS5jaGFuZ2VkVG91Y2hlc2BcbiAgLy8gc2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNzE5MjU2My90b3VjaGVuZC1ldmVudC1wcm9wZXJ0aWVzXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vYmV2YWNxdWEvZHJhZ3VsYS9pc3N1ZXMvMzRcbiAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGUudGFyZ2V0VG91Y2hlc1swXTtcbiAgfVxuICBpZiAoZS5jaGFuZ2VkVG91Y2hlcyAmJiBlLmNoYW5nZWRUb3VjaGVzLmxlbmd0aCkge1xuICAgIHJldHVybiBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBnZXRDb29yZCAoY29vcmQsIGUpIHtcbiAgdmFyIGhvc3QgPSBnZXRFdmVudEhvc3QoZSk7XG4gIHZhciBtaXNzTWFwID0ge1xuICAgIHBhZ2VYOiAnY2xpZW50WCcsIC8vIElFOFxuICAgIHBhZ2VZOiAnY2xpZW50WScgLy8gSUU4XG4gIH07XG4gIGlmIChjb29yZCBpbiBtaXNzTWFwICYmICEoY29vcmQgaW4gaG9zdCkgJiYgbWlzc01hcFtjb29yZF0gaW4gaG9zdCkge1xuICAgIGNvb3JkID0gbWlzc01hcFtjb29yZF07XG4gIH1cbiAgcmV0dXJuIGhvc3RbY29vcmRdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRyYWd1bGE7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL2RyYWd1bGEvZHJhZ3VsYS5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBhdG9hID0gcmVxdWlyZSgnYXRvYScpO1xudmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtaXR0ZXIgKHRoaW5nLCBvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gb3B0aW9ucyB8fCB7fTtcbiAgdmFyIGV2dCA9IHt9O1xuICBpZiAodGhpbmcgPT09IHVuZGVmaW5lZCkgeyB0aGluZyA9IHt9OyB9XG4gIHRoaW5nLm9uID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgaWYgKCFldnRbdHlwZV0pIHtcbiAgICAgIGV2dFt0eXBlXSA9IFtmbl07XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2dFt0eXBlXS5wdXNoKGZuKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5vbmNlID0gZnVuY3Rpb24gKHR5cGUsIGZuKSB7XG4gICAgZm4uX29uY2UgPSB0cnVlOyAvLyB0aGluZy5vZmYoZm4pIHN0aWxsIHdvcmtzIVxuICAgIHRoaW5nLm9uKHR5cGUsIGZuKTtcbiAgICByZXR1cm4gdGhpbmc7XG4gIH07XG4gIHRoaW5nLm9mZiA9IGZ1bmN0aW9uICh0eXBlLCBmbikge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBpZiAoYyA9PT0gMSkge1xuICAgICAgZGVsZXRlIGV2dFt0eXBlXTtcbiAgICB9IGVsc2UgaWYgKGMgPT09IDApIHtcbiAgICAgIGV2dCA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgZXQgPSBldnRbdHlwZV07XG4gICAgICBpZiAoIWV0KSB7IHJldHVybiB0aGluZzsgfVxuICAgICAgZXQuc3BsaWNlKGV0LmluZGV4T2YoZm4pLCAxKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaW5nO1xuICB9O1xuICB0aGluZy5lbWl0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzID0gYXRvYShhcmd1bWVudHMpO1xuICAgIHJldHVybiB0aGluZy5lbWl0dGVyU25hcHNob3QoYXJncy5zaGlmdCgpKS5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcbiAgdGhpbmcuZW1pdHRlclNuYXBzaG90ID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgZXQgPSAoZXZ0W3R5cGVdIHx8IFtdKS5zbGljZSgwKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGFyZ3MgPSBhdG9hKGFyZ3VtZW50cyk7XG4gICAgICB2YXIgY3R4ID0gdGhpcyB8fCB0aGluZztcbiAgICAgIGlmICh0eXBlID09PSAnZXJyb3InICYmIG9wdHMudGhyb3dzICE9PSBmYWxzZSAmJiAhZXQubGVuZ3RoKSB7IHRocm93IGFyZ3MubGVuZ3RoID09PSAxID8gYXJnc1swXSA6IGFyZ3M7IH1cbiAgICAgIGV0LmZvckVhY2goZnVuY3Rpb24gZW1pdHRlciAobGlzdGVuKSB7XG4gICAgICAgIGlmIChvcHRzLmFzeW5jKSB7IGRlYm91bmNlKGxpc3RlbiwgYXJncywgY3R4KTsgfSBlbHNlIHsgbGlzdGVuLmFwcGx5KGN0eCwgYXJncyk7IH1cbiAgICAgICAgaWYgKGxpc3Rlbi5fb25jZSkgeyB0aGluZy5vZmYodHlwZSwgbGlzdGVuKTsgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpbmc7XG4gICAgfTtcbiAgfTtcbiAgcmV0dXJuIHRoaW5nO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9ib2JieS9TaXRlcy9zYW5kYm94L2h0ZG9jcy93cC1jb250ZW50L3RoZW1lcy90d2VudHlzZXZlbnRlZW4vdmVuZG9yL2RldmVsb3B3aXRod3AvY3VzdG9taXplci1jdXJhdGlvbi9ub2RlX21vZHVsZXMvY29udHJhL2VtaXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhdG9hIChhLCBuKSB7IHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhLCBuKTsgfVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9hdG9hL2F0b2EuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgdGlja3kgPSByZXF1aXJlKCd0aWNreScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlYm91bmNlIChmbiwgYXJncywgY3R4KSB7XG4gIGlmICghZm4pIHsgcmV0dXJuOyB9XG4gIHRpY2t5KGZ1bmN0aW9uIHJ1biAoKSB7XG4gICAgZm4uYXBwbHkoY3R4IHx8IG51bGwsIGFyZ3MgfHwgW10pO1xuICB9KTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL2NvbnRyYS9kZWJvdW5jZS5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJ2YXIgc2kgPSB0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSAnZnVuY3Rpb24nLCB0aWNrO1xuaWYgKHNpKSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0SW1tZWRpYXRlKGZuKTsgfTtcbn0gZWxzZSB7XG4gIHRpY2sgPSBmdW5jdGlvbiAoZm4pIHsgc2V0VGltZW91dChmbiwgMCk7IH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdGljaztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3RpY2t5L3RpY2t5LWJyb3dzZXIuanNcbi8vIG1vZHVsZSBpZCA9IDEwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsInZhciBhcHBseSA9IEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseTtcblxuLy8gRE9NIEFQSXMsIGZvciBjb21wbGV0ZW5lc3NcblxuZXhwb3J0cy5zZXRUaW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldFRpbWVvdXQsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJUaW1lb3V0KTtcbn07XG5leHBvcnRzLnNldEludGVydmFsID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBuZXcgVGltZW91dChhcHBseS5jYWxsKHNldEludGVydmFsLCB3aW5kb3csIGFyZ3VtZW50cyksIGNsZWFySW50ZXJ2YWwpO1xufTtcbmV4cG9ydHMuY2xlYXJUaW1lb3V0ID1cbmV4cG9ydHMuY2xlYXJJbnRlcnZhbCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHtcbiAgaWYgKHRpbWVvdXQpIHtcbiAgICB0aW1lb3V0LmNsb3NlKCk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIFRpbWVvdXQoaWQsIGNsZWFyRm4pIHtcbiAgdGhpcy5faWQgPSBpZDtcbiAgdGhpcy5fY2xlYXJGbiA9IGNsZWFyRm47XG59XG5UaW1lb3V0LnByb3RvdHlwZS51bnJlZiA9IFRpbWVvdXQucHJvdG90eXBlLnJlZiA9IGZ1bmN0aW9uKCkge307XG5UaW1lb3V0LnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLl9jbGVhckZuLmNhbGwod2luZG93LCB0aGlzLl9pZCk7XG59O1xuXG4vLyBEb2VzIG5vdCBzdGFydCB0aGUgdGltZSwganVzdCBzZXRzIHVwIHRoZSBtZW1iZXJzIG5lZWRlZC5cbmV4cG9ydHMuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSwgbXNlY3MpIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IG1zZWNzO1xufTtcblxuZXhwb3J0cy51bmVucm9sbCA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuICBpdGVtLl9pZGxlVGltZW91dCA9IC0xO1xufTtcblxuZXhwb3J0cy5fdW5yZWZBY3RpdmUgPSBleHBvcnRzLmFjdGl2ZSA9IGZ1bmN0aW9uKGl0ZW0pIHtcbiAgY2xlYXJUaW1lb3V0KGl0ZW0uX2lkbGVUaW1lb3V0SWQpO1xuXG4gIHZhciBtc2VjcyA9IGl0ZW0uX2lkbGVUaW1lb3V0O1xuICBpZiAobXNlY3MgPj0gMCkge1xuICAgIGl0ZW0uX2lkbGVUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uIG9uVGltZW91dCgpIHtcbiAgICAgIGlmIChpdGVtLl9vblRpbWVvdXQpXG4gICAgICAgIGl0ZW0uX29uVGltZW91dCgpO1xuICAgIH0sIG1zZWNzKTtcbiAgfVxufTtcblxuLy8gc2V0aW1tZWRpYXRlIGF0dGFjaGVzIGl0c2VsZiB0byB0aGUgZ2xvYmFsIG9iamVjdFxucmVxdWlyZShcInNldGltbWVkaWF0ZVwiKTtcbmV4cG9ydHMuc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuZXhwb3J0cy5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgdW5kZWZpbmVkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBpZiAoZ2xvYmFsLnNldEltbWVkaWF0ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG5leHRIYW5kbGUgPSAxOyAvLyBTcGVjIHNheXMgZ3JlYXRlciB0aGFuIHplcm9cbiAgICB2YXIgdGFza3NCeUhhbmRsZSA9IHt9O1xuICAgIHZhciBjdXJyZW50bHlSdW5uaW5nQVRhc2sgPSBmYWxzZTtcbiAgICB2YXIgZG9jID0gZ2xvYmFsLmRvY3VtZW50O1xuICAgIHZhciByZWdpc3RlckltbWVkaWF0ZTtcblxuICAgIGZ1bmN0aW9uIHNldEltbWVkaWF0ZShjYWxsYmFjaykge1xuICAgICAgLy8gQ2FsbGJhY2sgY2FuIGVpdGhlciBiZSBhIGZ1bmN0aW9uIG9yIGEgc3RyaW5nXG4gICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuZXcgRnVuY3Rpb24oXCJcIiArIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICAgIC8vIENvcHkgZnVuY3Rpb24gYXJndW1lbnRzXG4gICAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2kgKyAxXTtcbiAgICAgIH1cbiAgICAgIC8vIFN0b3JlIGFuZCByZWdpc3RlciB0aGUgdGFza1xuICAgICAgdmFyIHRhc2sgPSB7IGNhbGxiYWNrOiBjYWxsYmFjaywgYXJnczogYXJncyB9O1xuICAgICAgdGFza3NCeUhhbmRsZVtuZXh0SGFuZGxlXSA9IHRhc2s7XG4gICAgICByZWdpc3RlckltbWVkaWF0ZShuZXh0SGFuZGxlKTtcbiAgICAgIHJldHVybiBuZXh0SGFuZGxlKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY2xlYXJJbW1lZGlhdGUoaGFuZGxlKSB7XG4gICAgICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuKHRhc2spIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gdGFzay5jYWxsYmFjaztcbiAgICAgICAgdmFyIGFyZ3MgPSB0YXNrLmFyZ3M7XG4gICAgICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICBjYWxsYmFjayhhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodW5kZWZpbmVkLCBhcmdzKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcnVuSWZQcmVzZW50KGhhbmRsZSkge1xuICAgICAgICAvLyBGcm9tIHRoZSBzcGVjOiBcIldhaXQgdW50aWwgYW55IGludm9jYXRpb25zIG9mIHRoaXMgYWxnb3JpdGhtIHN0YXJ0ZWQgYmVmb3JlIHRoaXMgb25lIGhhdmUgY29tcGxldGVkLlwiXG4gICAgICAgIC8vIFNvIGlmIHdlJ3JlIGN1cnJlbnRseSBydW5uaW5nIGEgdGFzaywgd2UnbGwgbmVlZCB0byBkZWxheSB0aGlzIGludm9jYXRpb24uXG4gICAgICAgIGlmIChjdXJyZW50bHlSdW5uaW5nQVRhc2spIHtcbiAgICAgICAgICAgIC8vIERlbGF5IGJ5IGRvaW5nIGEgc2V0VGltZW91dC4gc2V0SW1tZWRpYXRlIHdhcyB0cmllZCBpbnN0ZWFkLCBidXQgaW4gRmlyZWZveCA3IGl0IGdlbmVyYXRlZCBhXG4gICAgICAgICAgICAvLyBcInRvbyBtdWNoIHJlY3Vyc2lvblwiIGVycm9yLlxuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRhc2tzQnlIYW5kbGVbaGFuZGxlXTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBydW4odGFzayk7XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbW1lZGlhdGUoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE5leHRUaWNrSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGZ1bmN0aW9uICgpIHsgcnVuSWZQcmVzZW50KGhhbmRsZSk7IH0pO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNhblVzZVBvc3RNZXNzYWdlKCkge1xuICAgICAgICAvLyBUaGUgdGVzdCBhZ2FpbnN0IGBpbXBvcnRTY3JpcHRzYCBwcmV2ZW50cyB0aGlzIGltcGxlbWVudGF0aW9uIGZyb20gYmVpbmcgaW5zdGFsbGVkIGluc2lkZSBhIHdlYiB3b3JrZXIsXG4gICAgICAgIC8vIHdoZXJlIGBnbG9iYWwucG9zdE1lc3NhZ2VgIG1lYW5zIHNvbWV0aGluZyBjb21wbGV0ZWx5IGRpZmZlcmVudCBhbmQgY2FuJ3QgYmUgdXNlZCBmb3IgdGhpcyBwdXJwb3NlLlxuICAgICAgICBpZiAoZ2xvYmFsLnBvc3RNZXNzYWdlICYmICFnbG9iYWwuaW1wb3J0U2NyaXB0cykge1xuICAgICAgICAgICAgdmFyIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIG9sZE9uTWVzc2FnZSA9IGdsb2JhbC5vbm1lc3NhZ2U7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcG9zdE1lc3NhZ2VJc0FzeW5jaHJvbm91cyA9IGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShcIlwiLCBcIipcIik7XG4gICAgICAgICAgICBnbG9iYWwub25tZXNzYWdlID0gb2xkT25NZXNzYWdlO1xuICAgICAgICAgICAgcmV0dXJuIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgLy8gSW5zdGFsbHMgYW4gZXZlbnQgaGFuZGxlciBvbiBgZ2xvYmFsYCBmb3IgdGhlIGBtZXNzYWdlYCBldmVudDogc2VlXG4gICAgICAgIC8vICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4vRE9NL3dpbmRvdy5wb3N0TWVzc2FnZVxuICAgICAgICAvLyAqIGh0dHA6Ly93d3cud2hhdHdnLm9yZy9zcGVjcy93ZWItYXBwcy9jdXJyZW50LXdvcmsvbXVsdGlwYWdlL2NvbW1zLmh0bWwjY3Jvc3NEb2N1bWVudE1lc3NhZ2VzXG5cbiAgICAgICAgdmFyIG1lc3NhZ2VQcmVmaXggPSBcInNldEltbWVkaWF0ZSRcIiArIE1hdGgucmFuZG9tKCkgKyBcIiRcIjtcbiAgICAgICAgdmFyIG9uR2xvYmFsTWVzc2FnZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQuc291cmNlID09PSBnbG9iYWwgJiZcbiAgICAgICAgICAgICAgICB0eXBlb2YgZXZlbnQuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAgICAgICAgIGV2ZW50LmRhdGEuaW5kZXhPZihtZXNzYWdlUHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudCgrZXZlbnQuZGF0YS5zbGljZShtZXNzYWdlUHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChnbG9iYWwuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgICAgICAgZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSwgZmFsc2UpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2xvYmFsLmF0dGFjaEV2ZW50KFwib25tZXNzYWdlXCIsIG9uR2xvYmFsTWVzc2FnZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgZ2xvYmFsLnBvc3RNZXNzYWdlKG1lc3NhZ2VQcmVmaXggKyBoYW5kbGUsIFwiKlwiKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsTWVzc2FnZUNoYW5uZWxJbXBsZW1lbnRhdGlvbigpIHtcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IGV2ZW50LmRhdGE7XG4gICAgICAgICAgICBydW5JZlByZXNlbnQoaGFuZGxlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZShoYW5kbGUpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBodG1sID0gZG9jLmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgaHRtbC5yZW1vdmVDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgIHNjcmlwdCA9IG51bGw7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaHRtbC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxTZXRUaW1lb3V0SW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHJ1bklmUHJlc2VudCwgMCwgaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBJZiBzdXBwb3J0ZWQsIHdlIHNob3VsZCBhdHRhY2ggdG8gdGhlIHByb3RvdHlwZSBvZiBnbG9iYWwsIHNpbmNlIHRoYXQgaXMgd2hlcmUgc2V0VGltZW91dCBldCBhbC4gbGl2ZS5cbiAgICB2YXIgYXR0YWNoVG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKGdsb2JhbCk7XG4gICAgYXR0YWNoVG8gPSBhdHRhY2hUbyAmJiBhdHRhY2hUby5zZXRUaW1lb3V0ID8gYXR0YWNoVG8gOiBnbG9iYWw7XG5cbiAgICAvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IGUuZy4gYnJvd3NlcmlmeSBlbnZpcm9ubWVudHMuXG4gICAgaWYgKHt9LnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSBcIltvYmplY3QgcHJvY2Vzc11cIikge1xuICAgICAgICAvLyBGb3IgTm9kZS5qcyBiZWZvcmUgMC45XG4gICAgICAgIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGNhblVzZVBvc3RNZXNzYWdlKCkpIHtcbiAgICAgICAgLy8gRm9yIG5vbi1JRTEwIG1vZGVybiBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsUG9zdE1lc3NhZ2VJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChnbG9iYWwuTWVzc2FnZUNoYW5uZWwpIHtcbiAgICAgICAgLy8gRm9yIHdlYiB3b3JrZXJzLCB3aGVyZSBzdXBwb3J0ZWRcbiAgICAgICAgaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZG9jICYmIFwib25yZWFkeXN0YXRlY2hhbmdlXCIgaW4gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIikpIHtcbiAgICAgICAgLy8gRm9yIElFIDbigJM4XG4gICAgICAgIGluc3RhbGxSZWFkeVN0YXRlQ2hhbmdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBvbGRlciBicm93c2Vyc1xuICAgICAgICBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCk7XG4gICAgfVxuXG4gICAgYXR0YWNoVG8uc2V0SW1tZWRpYXRlID0gc2V0SW1tZWRpYXRlO1xuICAgIGF0dGFjaFRvLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG59KHR5cGVvZiBzZWxmID09PSBcInVuZGVmaW5lZFwiID8gdHlwZW9mIGdsb2JhbCA9PT0gXCJ1bmRlZmluZWRcIiA/IHRoaXMgOiBnbG9iYWwgOiBzZWxmKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3NldGltbWVkaWF0ZS9zZXRJbW1lZGlhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvYm9iYnkvU2l0ZXMvc2FuZGJveC9odGRvY3Mvd3AtY29udGVudC90aGVtZXMvdHdlbnR5c2V2ZW50ZWVuL3ZlbmRvci9kZXZlbG9wd2l0aHdwL2N1c3RvbWl6ZXItY3VyYXRpb24vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qc1xuLy8gbW9kdWxlIGlkID0gMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY3VzdG9tRXZlbnQgPSByZXF1aXJlKCdjdXN0b20tZXZlbnQnKTtcbnZhciBldmVudG1hcCA9IHJlcXVpcmUoJy4vZXZlbnRtYXAnKTtcbnZhciBkb2MgPSBnbG9iYWwuZG9jdW1lbnQ7XG52YXIgYWRkRXZlbnQgPSBhZGRFdmVudEVhc3k7XG52YXIgcmVtb3ZlRXZlbnQgPSByZW1vdmVFdmVudEVhc3k7XG52YXIgaGFyZENhY2hlID0gW107XG5cbmlmICghZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgYWRkRXZlbnQgPSBhZGRFdmVudEhhcmQ7XG4gIHJlbW92ZUV2ZW50ID0gcmVtb3ZlRXZlbnRIYXJkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYWRkOiBhZGRFdmVudCxcbiAgcmVtb3ZlOiByZW1vdmVFdmVudCxcbiAgZmFicmljYXRlOiBmYWJyaWNhdGVFdmVudFxufTtcblxuZnVuY3Rpb24gYWRkRXZlbnRFYXN5IChlbCwgdHlwZSwgZm4sIGNhcHR1cmluZykge1xuICByZXR1cm4gZWwuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmbiwgY2FwdHVyaW5nKTtcbn1cblxuZnVuY3Rpb24gYWRkRXZlbnRIYXJkIChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGVsLmF0dGFjaEV2ZW50KCdvbicgKyB0eXBlLCB3cmFwKGVsLCB0eXBlLCBmbikpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEVhc3kgKGVsLCB0eXBlLCBmbiwgY2FwdHVyaW5nKSB7XG4gIHJldHVybiBlbC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZuLCBjYXB0dXJpbmcpO1xufVxuXG5mdW5jdGlvbiByZW1vdmVFdmVudEhhcmQgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgbGlzdGVuZXIgPSB1bndyYXAoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgcmV0dXJuIGVsLmRldGFjaEV2ZW50KCdvbicgKyB0eXBlLCBsaXN0ZW5lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmFicmljYXRlRXZlbnQgKGVsLCB0eXBlLCBtb2RlbCkge1xuICB2YXIgZSA9IGV2ZW50bWFwLmluZGV4T2YodHlwZSkgPT09IC0xID8gbWFrZUN1c3RvbUV2ZW50KCkgOiBtYWtlQ2xhc3NpY0V2ZW50KCk7XG4gIGlmIChlbC5kaXNwYXRjaEV2ZW50KSB7XG4gICAgZWwuZGlzcGF0Y2hFdmVudChlKTtcbiAgfSBlbHNlIHtcbiAgICBlbC5maXJlRXZlbnQoJ29uJyArIHR5cGUsIGUpO1xuICB9XG4gIGZ1bmN0aW9uIG1ha2VDbGFzc2ljRXZlbnQgKCkge1xuICAgIHZhciBlO1xuICAgIGlmIChkb2MuY3JlYXRlRXZlbnQpIHtcbiAgICAgIGUgPSBkb2MuY3JlYXRlRXZlbnQoJ0V2ZW50Jyk7XG4gICAgICBlLmluaXRFdmVudCh0eXBlLCB0cnVlLCB0cnVlKTtcbiAgICB9IGVsc2UgaWYgKGRvYy5jcmVhdGVFdmVudE9iamVjdCkge1xuICAgICAgZSA9IGRvYy5jcmVhdGVFdmVudE9iamVjdCgpO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbiAgfVxuICBmdW5jdGlvbiBtYWtlQ3VzdG9tRXZlbnQgKCkge1xuICAgIHJldHVybiBuZXcgY3VzdG9tRXZlbnQodHlwZSwgeyBkZXRhaWw6IG1vZGVsIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyYXBwZXJGYWN0b3J5IChlbCwgdHlwZSwgZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIgKG9yaWdpbmFsRXZlbnQpIHtcbiAgICB2YXIgZSA9IG9yaWdpbmFsRXZlbnQgfHwgZ2xvYmFsLmV2ZW50O1xuICAgIGUudGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuICAgIGUucHJldmVudERlZmF1bHQgPSBlLnByZXZlbnREZWZhdWx0IHx8IGZ1bmN0aW9uIHByZXZlbnREZWZhdWx0ICgpIHsgZS5yZXR1cm5WYWx1ZSA9IGZhbHNlOyB9O1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uID0gZS5zdG9wUHJvcGFnYXRpb24gfHwgZnVuY3Rpb24gc3RvcFByb3BhZ2F0aW9uICgpIHsgZS5jYW5jZWxCdWJibGUgPSB0cnVlOyB9O1xuICAgIGUud2hpY2ggPSBlLndoaWNoIHx8IGUua2V5Q29kZTtcbiAgICBmbi5jYWxsKGVsLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gd3JhcCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciB3cmFwcGVyID0gdW53cmFwKGVsLCB0eXBlLCBmbikgfHwgd3JhcHBlckZhY3RvcnkoZWwsIHR5cGUsIGZuKTtcbiAgaGFyZENhY2hlLnB1c2goe1xuICAgIHdyYXBwZXI6IHdyYXBwZXIsXG4gICAgZWxlbWVudDogZWwsXG4gICAgdHlwZTogdHlwZSxcbiAgICBmbjogZm5cbiAgfSk7XG4gIHJldHVybiB3cmFwcGVyO1xufVxuXG5mdW5jdGlvbiB1bndyYXAgKGVsLCB0eXBlLCBmbikge1xuICB2YXIgaSA9IGZpbmQoZWwsIHR5cGUsIGZuKTtcbiAgaWYgKGkpIHtcbiAgICB2YXIgd3JhcHBlciA9IGhhcmRDYWNoZVtpXS53cmFwcGVyO1xuICAgIGhhcmRDYWNoZS5zcGxpY2UoaSwgMSk7IC8vIGZyZWUgdXAgYSB0YWQgb2YgbWVtb3J5XG4gICAgcmV0dXJuIHdyYXBwZXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZCAoZWwsIHR5cGUsIGZuKSB7XG4gIHZhciBpLCBpdGVtO1xuICBmb3IgKGkgPSAwOyBpIDwgaGFyZENhY2hlLmxlbmd0aDsgaSsrKSB7XG4gICAgaXRlbSA9IGhhcmRDYWNoZVtpXTtcbiAgICBpZiAoaXRlbS5lbGVtZW50ID09PSBlbCAmJiBpdGVtLnR5cGUgPT09IHR5cGUgJiYgaXRlbS5mbiA9PT0gZm4pIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2Nyb3NzdmVudC5qc1xuLy8gbW9kdWxlIGlkID0gMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXG52YXIgTmF0aXZlQ3VzdG9tRXZlbnQgPSBnbG9iYWwuQ3VzdG9tRXZlbnQ7XG5cbmZ1bmN0aW9uIHVzZU5hdGl2ZSAoKSB7XG4gIHRyeSB7XG4gICAgdmFyIHAgPSBuZXcgTmF0aXZlQ3VzdG9tRXZlbnQoJ2NhdCcsIHsgZGV0YWlsOiB7IGZvbzogJ2JhcicgfSB9KTtcbiAgICByZXR1cm4gICdjYXQnID09PSBwLnR5cGUgJiYgJ2JhcicgPT09IHAuZGV0YWlsLmZvbztcbiAgfSBjYXRjaCAoZSkge1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDcm9zcy1icm93c2VyIGBDdXN0b21FdmVudGAgY29uc3RydWN0b3IuXG4gKlxuICogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0N1c3RvbUV2ZW50LkN1c3RvbUV2ZW50XG4gKlxuICogQHB1YmxpY1xuICovXG5cbm1vZHVsZS5leHBvcnRzID0gdXNlTmF0aXZlKCkgPyBOYXRpdmVDdXN0b21FdmVudCA6XG5cbi8vIElFID49IDlcbidmdW5jdGlvbicgPT09IHR5cGVvZiBkb2N1bWVudC5jcmVhdGVFdmVudCA/IGZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcbiAgaWYgKHBhcmFtcykge1xuICAgIGUuaW5pdEN1c3RvbUV2ZW50KHR5cGUsIHBhcmFtcy5idWJibGVzLCBwYXJhbXMuY2FuY2VsYWJsZSwgcGFyYW1zLmRldGFpbCk7XG4gIH0gZWxzZSB7XG4gICAgZS5pbml0Q3VzdG9tRXZlbnQodHlwZSwgZmFsc2UsIGZhbHNlLCB2b2lkIDApO1xuICB9XG4gIHJldHVybiBlO1xufSA6XG5cbi8vIElFIDw9IDhcbmZ1bmN0aW9uIEN1c3RvbUV2ZW50ICh0eXBlLCBwYXJhbXMpIHtcbiAgdmFyIGUgPSBkb2N1bWVudC5jcmVhdGVFdmVudE9iamVjdCgpO1xuICBlLnR5cGUgPSB0eXBlO1xuICBpZiAocGFyYW1zKSB7XG4gICAgZS5idWJibGVzID0gQm9vbGVhbihwYXJhbXMuYnViYmxlcyk7XG4gICAgZS5jYW5jZWxhYmxlID0gQm9vbGVhbihwYXJhbXMuY2FuY2VsYWJsZSk7XG4gICAgZS5kZXRhaWwgPSBwYXJhbXMuZGV0YWlsO1xuICB9IGVsc2Uge1xuICAgIGUuYnViYmxlcyA9IGZhbHNlO1xuICAgIGUuY2FuY2VsYWJsZSA9IGZhbHNlO1xuICAgIGUuZGV0YWlsID0gdm9pZCAwO1xuICB9XG4gIHJldHVybiBlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9jdXN0b20tZXZlbnQvaW5kZXguanNcbi8vIG1vZHVsZSBpZCA9IDE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIid1c2Ugc3RyaWN0JztcblxudmFyIGV2ZW50bWFwID0gW107XG52YXIgZXZlbnRuYW1lID0gJyc7XG52YXIgcm9uID0gL15vbi87XG5cbmZvciAoZXZlbnRuYW1lIGluIGdsb2JhbCkge1xuICBpZiAocm9uLnRlc3QoZXZlbnRuYW1lKSkge1xuICAgIGV2ZW50bWFwLnB1c2goZXZlbnRuYW1lLnNsaWNlKDIpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV2ZW50bWFwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9jcm9zc3ZlbnQvc3JjL2V2ZW50bWFwLmpzXG4vLyBtb2R1bGUgaWQgPSAxNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIndXNlIHN0cmljdCc7XG5cbnZhciBjYWNoZSA9IHt9O1xudmFyIHN0YXJ0ID0gJyg/Ol58XFxcXHMpJztcbnZhciBlbmQgPSAnKD86XFxcXHN8JCknO1xuXG5mdW5jdGlvbiBsb29rdXBDbGFzcyAoY2xhc3NOYW1lKSB7XG4gIHZhciBjYWNoZWQgPSBjYWNoZVtjbGFzc05hbWVdO1xuICBpZiAoY2FjaGVkKSB7XG4gICAgY2FjaGVkLmxhc3RJbmRleCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgY2FjaGVbY2xhc3NOYW1lXSA9IGNhY2hlZCA9IG5ldyBSZWdFeHAoc3RhcnQgKyBjbGFzc05hbWUgKyBlbmQsICdnJyk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlZDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MgKGVsLCBjbGFzc05hbWUpIHtcbiAgdmFyIGN1cnJlbnQgPSBlbC5jbGFzc05hbWU7XG4gIGlmICghY3VycmVudC5sZW5ndGgpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbGFzc05hbWU7XG4gIH0gZWxzZSBpZiAoIWxvb2t1cENsYXNzKGNsYXNzTmFtZSkudGVzdChjdXJyZW50KSkge1xuICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gIH1cbn1cblxuZnVuY3Rpb24gcm1DbGFzcyAoZWwsIGNsYXNzTmFtZSkge1xuICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUucmVwbGFjZShsb29rdXBDbGFzcyhjbGFzc05hbWUpLCAnICcpLnRyaW0oKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGFkZDogYWRkQ2xhc3MsXG4gIHJtOiBybUNsYXNzXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2JvYmJ5L1NpdGVzL3NhbmRib3gvaHRkb2NzL3dwLWNvbnRlbnQvdGhlbWVzL3R3ZW50eXNldmVudGVlbi92ZW5kb3IvZGV2ZWxvcHdpdGh3cC9jdXN0b21pemVyLWN1cmF0aW9uL25vZGVfbW9kdWxlcy9kcmFndWxhL2NsYXNzZXMuanNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICggcGFyZW50LCBoaWRkZW5JbnB1dCApIHtcblx0Y29uc3QgaGlkZGVuRWwgPSBwYXJlbnQucXVlcnlTZWxlY3RvciggaGlkZGVuSW5wdXQgKTtcblxuXHRjb25zdCBnZXRDdXJyZW50VmFsdWUgPSAoKSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSBoaWRkZW5FbC52YWx1ZTtcblxuXHRcdGlmICggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gSlNPTi5wYXJzZSggdmFsdWUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIFtdO1xuXG5cdH07XG5cblx0Y29uc3QgY2hlY2tMaW1pdCA9ICggY3VycmVudFZhbHVlICkgPT4ge1xuXHRcdGNvbnN0IGNvdW50ID0gY3VycmVudFZhbHVlLmxlbmd0aDtcblx0XHRjb25zdCBmaWVsZCA9IHBhcmVudC5xdWVyeVNlbGVjdG9yKCAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1pbnB1dCcgKTtcblx0XHRjb25zdCBtYXggPSBmaWVsZC5nZXRBdHRyaWJ1dGUoICdkYXRhLW1heCcgKTtcblxuXHRcdGlmICggbWF4ICkge1xuXHRcdFx0aWYgKCBjb3VudCA8IHBhcnNlSW50KCBtYXgsIDEwICkgKSB7XG5cdFx0XHRcdGZpZWxkLnJlbW92ZUF0dHJpYnV0ZSggJ2Rpc2FibGVkJyApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZmllbGQuc2V0QXR0cmlidXRlKCAnZGlzYWJsZWQnLCB0cnVlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdGNvbnN0IGFkZFZhbHVlID0gKCB2YWx1ZSApID0+IHtcblx0XHRsZXQgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG5cblx0XHRjdXJyZW50VmFsdWUgPSBjdXJyZW50VmFsdWUuY29uY2F0KCB2YWx1ZSApO1xuXHRcdGNoZWNrTGltaXQoIGN1cnJlbnRWYWx1ZSApO1xuXHRcdHJldHVybiBjdXJyZW50VmFsdWU7XG5cdH07XG5cblx0Y29uc3QgcmVtb3ZlVmFsdWUgPSAoIHZhbHVlLCBvblJlbW92ZSApID0+IHtcblx0XHRsZXQgY3VycmVudFZhbHVlID0gZ2V0Q3VycmVudFZhbHVlKCk7XG5cblx0XHRjdXJyZW50VmFsdWUgPSBvblJlbW92ZSggY3VycmVudFZhbHVlLCB2YWx1ZSApO1xuXHRcdGNoZWNrTGltaXQoIGN1cnJlbnRWYWx1ZSApO1xuXHRcdHJldHVybiBjdXJyZW50VmFsdWU7XG5cdH07XG5cblx0cmV0dXJuIHtcblx0XHRhZGQ6IGZ1bmN0aW9uICggdmFsdWUgKSB7XG5cdFx0XHRoaWRkZW5FbC52YWx1ZSA9IEpTT04uc3RyaW5naWZ5KCBhZGRWYWx1ZSggdmFsdWUgKSApO1xuXHRcdH0sXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbiAoIHZhbHVlLCBvblJlbW92ZSApIHtcblx0XHRcdGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoIHJlbW92ZVZhbHVlKCB2YWx1ZSwgb25SZW1vdmUgKSApO1xuXHRcdH0sXG5cdFx0dXBkYXRlOiBmdW5jdGlvbiAoIHZhbHVlcyApIHtcblx0XHRcdGhpZGRlbkVsLnZhbHVlID0gSlNPTi5zdHJpbmdpZnkoIHZhbHVlcyApO1xuXHRcdH0sXG5cdFx0ZWw6IGhpZGRlbkVsXG5cdH07XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zZXJpYWxpemVkLWlucHV0LmpzIiwiLyogZ2xvYmFsIGpRdWVyeSAqL1xuZXhwb3J0IGNvbnN0IGNoZWNrTGltaXQgPSAoIGF1dG9MaXN0ICkgPT4ge1xuXHRjb25zdCBjaGlsZHJlbiA9IGF1dG9MaXN0LnF1ZXJ5U2VsZWN0b3JBbGwoICdsaScgKTtcblx0Y29uc3QgZmllbGQgPSBhdXRvTGlzdC5xdWVyeVNlbGVjdG9yKCAnLmN1c3RvbWl6ZXItY3VyYXRpb24tbGlzdC1pbnB1dCcgKTtcblx0Y29uc3QgbWF4ID0gZmllbGQuZ2V0QXR0cmlidXRlKCAnZGF0YS1tYXgnICk7XG5cblx0aWYgKCBtYXggKSB7XG5cdFx0aWYgKCBjaGlsZHJlbi5sZW5ndGggPCBwYXJzZUludCggbWF4LCAxMCApICkge1xuXHRcdFx0ZmllbGQucmVtb3ZlQXR0cmlidXRlKCAnZGlzYWJsZWQnICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZpZWxkLnNldEF0dHJpYnV0ZSggJ2Rpc2FibGVkJywgdHJ1ZSApO1xuXHRcdH1cblx0fVxufTtcblxuZXhwb3J0IGNvbnN0IHJlbW92ZUl0ZW1zID0gKCBIaWRkZW4sIG9uUmVtb3ZlLCBhdXRvTGlzdCApID0+IHtcblx0cmV0dXJuICggdmFsdWUgKSA9PiB7XG5cdFx0SGlkZGVuLnJlbW92ZSggdmFsdWUsIG9uUmVtb3ZlICk7XG5cdFx0Y2hlY2tMaW1pdCggYXV0b0xpc3QgKTtcblx0XHRqUXVlcnkoIEhpZGRlbi5lbCApLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cdH07XG59O1xuXG5leHBvcnQgY29uc3QgZHJhZ0l0ZW1zID0gKCBIaWRkZW4sIG9uRHJhZyApID0+IHtcblx0cmV0dXJuICggbGlzdCwgbGlzdEl0ZW1zICkgPT4ge1xuXHRcdGNvbnN0IHZhbHVlcyA9IG9uRHJhZyggbGlzdCwgbGlzdEl0ZW1zICk7XG5cblx0XHRIaWRkZW4udXBkYXRlKCB2YWx1ZXMgKTtcblx0XHRqUXVlcnkoIEhpZGRlbi5lbCApLnRyaWdnZXIoICdjaGFuZ2UnICk7XG5cdH07XG59O1xuXG5leHBvcnQgY29uc3Qgb25EcmFnT2JqZWN0ID0gKCBsaXN0LCBsaXN0SXRlbXMgKSA9PiB7XG5cdHJldHVybiBbXS5yZWR1Y2UuY2FsbCggbGlzdEl0ZW1zLCAoIGFjYywgbGlzdEl0ZW0gKSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSB7XG5cdFx0XHRpZDogbGlzdEl0ZW0uZGF0YXNldC5pZCxcblx0XHRcdHRpdGxlOiBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCAnc3BhbicgKS5pbm5lckhUTUxcblx0XHR9O1xuXG5cdFx0cmV0dXJuIGFjYy5jb25jYXQoIFt2YWx1ZV0gKTtcblx0fSwgW10gKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvbkRyYWdUZXh0ID0gKCBsaXN0LCBsaXN0SXRlbXMgKSA9PiB7XG5cdHJldHVybiBbXS5yZWR1Y2UuY2FsbCggbGlzdEl0ZW1zLCAoIGFjYywgbGlzdEl0ZW0gKSA9PiB7XG5cdFx0Y29uc3QgdmFsdWUgPSBsaXN0SXRlbS5xdWVyeVNlbGVjdG9yKCAnc3BhbicgKS5pbm5lckhUTUw7XG5cblx0XHRyZXR1cm4gYWNjLmNvbmNhdCggW3ZhbHVlXSApO1xuXHR9LCBbXSApO1xufTtcblxuZXhwb3J0IGNvbnN0IG9uUmVtb3ZlT2JqZWN0ID0gKCBjdXJyZW50VmFsdWUsIG5ld1ZhbHVlICkgPT4ge1xuXHRyZXR1cm4gY3VycmVudFZhbHVlLmZpbHRlciggKCBjdXJyZW50ICkgPT4gY3VycmVudC50aXRsZSAhPT0gbmV3VmFsdWUgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBvblJlbW92ZVRleHQgPSAoIGN1cnJlbnRWYWx1ZSwgbmV3VmFsdWUgKSA9PiB7XG5cdHJldHVybiBjdXJyZW50VmFsdWUuZmlsdGVyKCAoIGN1cnJlbnQgKSA9PiBjdXJyZW50ICE9PSBuZXdWYWx1ZSApO1xufTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3V0aWxpdGllcy5qcyIsIi8qIGdsb2JhbCBqUXVlcnkgKi9cblxuaW1wb3J0IGF1dG9TdWdnZXN0IGZyb20gJy4vYXV0b3N1Z2dlc3QnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoIGFyZ3MgKSB7XG5cdGNvbnN0IGZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIGFyZ3MucGFyZW50ICk7XG5cblx0aWYgKCAhIGZpZWxkcyApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRbXS5mb3JFYWNoLmNhbGwoIGZpZWxkcywgKCBhdXRvSXRlbSApID0+IHtcblx0XHRjb25zdCBoaWRkZW4gPSBhdXRvSXRlbS5xdWVyeVNlbGVjdG9yKCBhcmdzLmhpZGRlbiApO1xuXG5cdFx0YXV0b1N1Z2dlc3QoXG5cdFx0XHRhcmdzLmlucHV0LFxuXHRcdFx0YXJncy5lbmRwb2ludCxcblx0XHRcdCggdmFsdWUsIGlucHV0ICkgPT4ge1xuXHRcdFx0XHRoaWRkZW4udmFsdWUgPSBKU09OLnN0cmluZ2lmeSggdmFsdWUgKTtcblx0XHRcdFx0alF1ZXJ5KCBoaWRkZW4gKS50cmlnZ2VyKCAnY2hhbmdlJyApO1xuXHRcdFx0fSxcblx0XHRcdCgpID0+IHtcblx0XHRcdFx0aGlkZGVuLnZhbHVlID0gJyc7XG5cdFx0XHRcdGpRdWVyeSggaGlkZGVuICkudHJpZ2dlciggJ2NoYW5nZScgKTtcblx0XHRcdH1cblx0XHQpO1xuXHR9ICk7XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9hdXRvLWl0ZW0uanMiXSwic291cmNlUm9vdCI6IiJ9